require(["ta/rollupAmdShim"],function(a){a.install(["ta/Core/TA.FireEvent","utils/urlDecoder","ta/Core/TA.Event","ta/Browser","ta/Core/TA.Record","ta/util/SessionStorage","vanillajs","lib/jquery-amd","ta/util/Error","facebook/authutils","ta/util/ActionRecord","ta/util/Cookie","ta/popups/CookieSettingsPanel","ta/util/Currency","utils/ajax","common/Radio","ta/registration/RegEvents","utils/throttle","api-mod","ta/Core/TA.LocalStorage","ta/Core/TA.Store","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","overlays/options/repositionOnTaEvent","overlays/uiOverlay","ta/common/behavior/Ads-pagemoniker","servlets/standardTemplateSupport","facebook/authutils","google/authutils"],["ta","page-model","page-model","page-model"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"short_lived_global",files:{js3_secure:{ssl:{ta:{common:{behavior:{"Ads-pagemoniker":1}},Core:{"TA.Record":1}}}},"js-amd":{src:{common:{Radio:1},utils:{throttle:1,urlDecoder:1,ajax:1},"api-mod":1,facebook:{authutils:1},overlays:{uiOverlay:1,options:{fade:1,matchWidth:1,autoReposition:1,centerArrowOnSrcElement:1,repositionOnTaEvent:1,closeOnDocClick:1,closeOnScroll:1},styles:{flyout:1},position:1,Overlay:1},servlets:{standardTemplateSupport:1},google:{authutils:1},vanillajs:1}},js3:{lib:{"jquery-amd":1},src:{ta:{util:{Cookie:1,ActionRecord:1,Currency:1,Error:1,SessionStorage:1},popups:{CookieSettingsPanel:1},registration:{RegEvents:1},Browser:1,Core:{"TA.FireEvent":1,"TA.Event":1,"TA.LocalStorage":1,"TA.Store":1}}}}},_:{baseUrl:"/"}})};
require(["ta/p13n/placements"],function(n){var e=n.define.bind(n,"trip_planner_breadcrumbs","handlers",["handlers"]);e(["placement","ta/Core/TA.FireEvent","utils/urlDecoder"],function(n,e,r){"use strict";function t(e){var r=document.getElementById(n.id);r&&(r.innerHTML=e.innerHTML)}function i(n,e){r.goToLink(n,e)}return e.on("update-"+n.name,t),{goToLink:i}})});
define("ta/util/SessionStorage",["vanillajs","ns-exporter"],function(e,t){var n={};return n.canUseSessionStore=function(){try{if(window.sessionStorage){var e="taLsTest";sessionStorage.setItem(e,"1");var t=sessionStorage.getItem(e);return"1"==t}}catch(e){return!1}},n.canUseSessionStore()?(n.setObject=function(e,t){sessionStorage.setItem(e,JSON.stringify(t))},n.getObject=function(e){var t=sessionStorage.getItem(e);return t?JSON.parse(t):null},n.remove=function(e){sessionStorage.removeItem(e)}):(n.setObject=function(){},n.getObject=function(){return null},n.remove=function(){}),t.exportTo(n,"ta.util.sessionStorage"),n});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"browser_mode_tracking","handlers",["handlers"]);n(["placement","ta/Core/TA.Event","ta/Browser","ta/Core/TA.Record","ta/util/SessionStorage"],function(e,n,o,r,t){function s(e){r.trackEventOnPage("BROWSER_TRACKING",a,e,null,!0)}var a,i=e.id+"_browser_mode_tracked";n.queueForLoad(function(){t.canUseSessionStore()&&sessionStorage.getItem(i)||o.isChrome()&&(a="Chrome",o.isChromeIncognito(s),t.canUseSessionStore()&&sessionStorage.setItem(i,"1"))})})});
require(["ta/p13n/placements"],function(e){var c=e.define.bind(e,"comscore","handlers",["handlers"]);c(["placement","ta/Core/TA.Event","vanillajs"],function(e,c){"use strict";c.queueForLoad(function(){var c=document.getElementById(e.id),o=c.querySelector(".dataHolder"),t=o.getAttribute("data-id"),n={c1:"2",c2:t,c3:"",c4:""};if("undefined"!=typeof COMSCORE)COMSCORE.beacon(n);else{window._comscore=window._comscore||[],window._comscore.push(n);var r=document.createElement("script");r.async=!0,r.src=("https:"==document.location.protocol?"https://sb":"http://b")+".scorecardresearch.com/beacon.js",c.appendChild(r)}},5,"comscore")})});
define("Logging",[],function(){var e="undefined"!=typeof IS_DEBUG&&IS_DEBUG?4:1;"boolean"==typeof __SERVER__&&__SERVER__&&(e=4);for(var n={},o=["error","warn","dir","info","debug"],r=0;r<o.length;r++){var l=o[r];n[l]=function(n,o){return function(){e<o||"undefined"!=typeof console&&console[n]&&console[n].apply&&console[n].apply(console,Array.prototype.slice.call(arguments))}}(l,r)}return n.setLevel=function(n){e=n},n});
define("facebook/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Cookie","ta/util/Error","ta/registration/RegEvents"],function(e,t,n,o,i,s,a,r,u){"use strict";var c=6e5,d="fbAutoLoginTime",f=new i,l=function(e,t){var n=t||"v1.0";return FB.init({appId:e,version:n}),f.resolve()},p=function(e){f.promise().success(e)},g=function(){a.setOneTimeCookieOnFQDN("FacebookAuthCode2","ConflictedFBAccount"),window.location.reload()},h=function(){var e=new i;return b()?(FB.getLoginStatus(function(t){if("connected"===t.status&&t.authResponse){if(o.has("cached.facebookuid"))return void m(o.retrieve("cached.facebookuid"),t.authResponse.userID);var n=new XMLHttpRequest;n.open("POST","/FacebookConnectAjax",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send("a=autologin&signedRequest="+encodeURIComponent(t.authResponse.signedRequest)),n.onreadystatechange=function(){if(4==n.readyState){if(200!=n.status)return e.reject();e.resolve(),u.emit("success")}}}}),e.promise()):e.reject()},m=function(e,t){e!==""+t&&(r.record(null,"Mismatched Facebook uid between cached value and authResponse. cached: "+e+", response: "+t),g())},v=function(){b()&&FB.getLoginStatus(function(e){if("connected"===e.status&&e.authResponse){if(o.has("cached.facebookuid"))return void m(o.retrieve("cached.facebookuid"),e.authResponse.userID);var t=new XMLHttpRequest;t.open("POST","/FacebookConnectAjax",!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send("a=refresh&signedRequest="+encodeURIComponent(e.authResponse.signedRequest))}})},R=function(e,n,o){var i=t("form#"+e),s=i.find("."+n).val();return s&&s.match(/.+\@.+\..+/)?void i.submit():void i.find("."+o).removeClass("hidden")},b=function(){if(s.canUseSessionStore())try{var e=(new Date).getTime(),t=sessionStorage.getItem(d);return null==t?(sessionStorage.setItem(d,e),!0):(t=parseInt(t),e-t<c?(n.info("Skipping FB autologin, tried too recently"),!1):(sessionStorage.setItem(d,e),!0))}catch(e){r.record(null,"Error storing FB autologin attempt: "+e)}return!0};return{init:l,autoLogin:h,queueForInit:p,refreshToken:v,submitEmailRegistration:R}});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"facebook_autologin","handlers",["handlers"]);o(["placement","lib/jquery-amd","ta/Core/TA.Event","ta/util/Error","facebook/authutils"],function(e,o,t,n,a){"use strict";t.queueForAfterLoad(function(){var e=o("#fb_autologin_data");if(!e.length)return void n.record(null,"Could not find Facebook autologin data");var t=e.data("loadFbJs"),r=e.data("facebookJsUrl"),i=e.data("facebookConnectAppId"),c=e.data("facebookApiVersion"),u=e.data("fbAutoLogin"),d=e.data("fbFetchAccessToken");try{window.fbAsyncInit=function(){a.init(i,c)},t&&!function(e,o,t){var n,a=e.getElementsByTagName(o)[0];e.getElementById(t)||(n=e.createElement(o),n.id=t,n.src=r,a.parentNode.insertBefore(n,a))}(document,"script","facebook-jssdk"),u&&a.queueForInit(function(){a.autoLogin()}),d&&a.queueForInit(function(){a.refreshToken()})}catch(e){n.record(e,"Error setting up Facebook autologin JS")}},"placement: facebook_autologin")})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_footer_pickers","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/Core/TA.Record"],function(e,t,o){"use strict";function a(t,o,a,r){t&&t.stopPropagation(),o.onclick=null,e.require(["trjs!styleguide/overlays/Flyout","trjs!overlays/support/widgets","trjs!overlays/support/remoteWidget","trcss!src/build/styleguide/ui_overlays/flyouts"],function(n,s,i){n(t,o,s(e),i(a,{},r))})}return{showPos:function(r,n){var s=t(e.element).find(".point_of_sale_data");a(r,n,"POS_PICKER",{pageFeature:s.data("page-feature")||window.pageFeature||"",localeCodes:s.data("locale-codes")||window.localeCodes||"",relativeUrl:document.location.pathname+(document.location.search||"")+(document.location.hash||"")});var i=s.data("currentLocale");o.trackEventOnPage("POS_PICKER","Open",i)},showCurrency:function(e,t){a(e,t,"CURRENCY_PICKER")}}})});
define("ta/util/ActionRecord",["vanillajs","ta/util/Deferred","utils/ajax","ns-exporter","ta/Core/TA.Record"],function(r,t,e,o,n){function a(r,o,a,i){var c=new t;a||(a={});var u={url:a.url||r,method:a.method||"get",data:{action:o},success:function(r){a.onSuccess&&a.onSuccess(r),c.resolve(r)},error:function(r){a.onFailure&&a.onFailure(r),c.reject(r)}};for(var d in a)if(a.hasOwnProperty(d)&&!u.hasOwnProperty(d))u[d]=a[d];else if("data"==d)for(d in a.data)a.data.hasOwnProperty(d)&&(u.data[d]=a.data[d]);if(i){var s=n._toEvtParams(i);for(d in s)s.hasOwnProperty(d)&&(u.data[d]=s[d])}return e(u),i&&n._trackEventAfterAjax(i),c.promise()}var i={record:function(r,t,e){return a("/ActionRecord",r,t,e)},recordPlus:function(r,t,e){return a("/ActionRecordPlus",r,t,e)},recordPid:function(r){new e("/ActionRecord?pid="+r)}};return o.exportTo(i,"ta.util.action"),i});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_partner_footer_links","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,n,t){"use strict";n(e.element).on("click",".inlineLink",function(){var e=n(this).parent(".footerLink").data("trackAction");e&&t.record("Footer"+e)})})});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_social_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/util/ActionRecord"],function(e,t,i){"use strict";t(e.element).on("click",".footerLink",function(){var e=t(this).data("trackAction");e&&i.record("Footer_"+e)})})});
require(["ta/prwidgets"],function(t){var e=t.define.bind(t,"homepage_tripadvisor_footer_links","handlers",["handlers"]);e(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(t,e,r,i){"use strict";function n(t){var e=t?t.srcElement||t.target:null;e&&e.getAttribute("data-pid")&&r.setPIDCookie(e.getAttribute("data-pid"))}return e(t.element).on("click",'.js_click[data-id="help_center"]',function(){var r=this,i=e(r).data("url");t.require(["trjs!brand/HelpCenterOverlay","trcss!src/build/required/help_center_overlay"],function(t){t.open(r,i)})}),e(t.element).on("click",".footerLink",function(t){var r="Footer_",n=e(this),a=n.data("trackAction");if(a){var o="_blank"==n.attr("target");n.is("a")&&!o?(t.preventDefault(),i.record(r+a).always(function(){window.location=n.attr("href")})):i.record(r+a)}}),{checkForPid:n}})});
define("ta/util/openNewTab",["utils/browserutils","ta/Browser","ta/util/Cookie"],function(e,o,t){return function(n){var i;return o.isIE10Metro()||(i=e.ie&&!o.isIE9orHigher()?window.open(n,"_blank","location=yes,resizable=yes,menubar=yes,scrollbars=yes,toolbar=yes,width="+document.documentElement.clientWidth+",height="+document.documentElement.clientHeight):window.open(n,"_blank")),!i||i.closed||"undefined"==typeof i.closed?(t.setPIDCookie(38821),window.location=n,!1):i}});
define("ta/popups/CookieSettingsPanel",["ta/util/openNewTab","page-model"],function(e,n){return function(s){s&&s.stop();var o={en:451,en_UK:834,en_IE:835,en_ZA:2635,sv:720,no:721,da:1199,fr:1197,fr_BE:6409,fr_CH:6410,de:1201,de_AT:2719,de_CH:6431,el:1198,it:1202,it_CH:6432,es:1200,pl:1208,nl:1209,nl_BE:6411,fi:2968,hu:3049,cs:3128,sk:3233,pt_PT:13938,"default":451},i={en:8328,en_UK:8328,en_IE:8316,en_ZA:8324,sv:8322,no:8323,da:8310,fr:8312,fr_BE:8307,fr_CH:8326,de:8313,de_AT:8306,de_CH:8325,el:8314,it:8317,it_CH:8327,es:8321,pl:8319,nl:8318,nl_BE:8309,fi:8311,hu:8315,cs:8308,sk:8320,pt_PT:13939,"default":8328},t=n.isMobile?i:o,_=n.session&&n.session.posLocale&&t[n.session.posLocale]?t[n.session.posLocale]:t["default"],l="http://info.evidon.com/pub_info/"+_+"?v=1&nt=0";e(l)}});
require(["ta/prwidgets"],function(e){var t=e.define.bind(e,"homepage_tripadvisor_horizontal_footer_links","handlers",["handlers"]);t(["widget","lib/jquery-amd","ta/popups/CookieSettingsPanel","ta/util/ActionRecord"],function(e,t,i,o){"use strict";t(e.element).on("click",'.js_click[data-id="cookie-consent"]',function(){i()}),t(e.element).on("click",".footer_link",function(e){var i=t(this),n="Footer_",r=i.data("trackAction");r&&(i.is("a")&&(e.preventDefault(),o.record(n+r).always(function(){window.location=i[0].href})),o.record(n+r))})})});
require(["ta/prwidgets"],function(e){var n=e.define.bind(e,"homepage_pos_picker","handlers",["handlers"]);n(["widget","lib/jquery-amd","ta/util/Cookie","ta/util/ActionRecord"],function(e,n,i,t){"use strict";function o(i){var o=n(i).data("id"),r=n(e.element).find(".picker_dropdown").data("currentLocale");t.record("POS_PICKER_SELECT_POS_"+o+"_FROM_"+r).always(function(){window.location=i.href})}function r(){i.remove("TAPD","/",window.domain)}var a=n(".fixed_header",n(e.element));n(e.element).before(a);var d=n(e.element).find(".pos_item.selected")[0];d&&d.scrollIntoView(),n(e.element).on("click",".pos_link",function(e){e.preventDefault(),r(),o(this)})})});
define("ta/util/Currency",["vanillajs","ta/util/Cookie","common/trackingStreams","ns-exporter"],function(r,n,t,e){var o={},a="‏",i="؜",u=" ",c="‎";return o.formatCurrency=function(r,n,t,e){var a=n?n:"USD",i=window.currencySymbol[a],f=r;e||(f=o.formatThousands(Math.round(r)));var s=i[0],l=i[1],y=document.body.classList;return y.contains("lang_ar")?o.isCurrencyAbbreviation(s)?f+u+s+c:s+c+u+f:t?l?f+u+s:s+u+f:l?f+s:s+f},o.formatCurrencyRange=function(r,n,t,e){var c,f=document.body.classList;return c=f.contains("lang_ar")?u+"-"+i+u:ta.util.i18n.isRtl()?u+"-"+a+u:u+"-"+u,e?(r=o.formatCurrency(r,t,!0),n=o.formatCurrency(n,t,!0),r+c+n):(r=o.formatCurrency(r,t),n=o.formatCurrency(n,t),r+c+n)},o.isCurrencyAbbreviation=function(r){return/^[a-zA-Z]+[^a-zA-Z0-9]?$/i.test(r)},o.formatThousands=function(r){if("undefined"==typeof groupingSize||"undefined"==typeof groupingSeparator||groupingSize<1)return r;for(var n="",t=""+r,e=1;e<=t.length;e++)n=t.charAt(t.length-e)+n,e%groupingSize==0&&e<t.length&&(n=groupingSeparator+n);return n},o.setCurrencyAndReload=function(r,e){var o="SetCurrency";n.write(o,r,15e3),e=e?e+"|":"",t.trackEvent("CurrencyPicker","Select",e+r),location.reload(!0)},e.exportTo(o,"ta.util.currency"),o});
require(["ta/prwidgets"],function(e){var r=e.define.bind(e,"homepage_currency_picker","handlers",["handlers"]);r(["widget","lib/jquery-amd","ta/util/Currency"],function(e,r,n){"use strict";function t(t){var d=r(e.element).find(".picker_dropdown").data("currentCurrency");n.setCurrencyAndReload(t,d)}var d=r(".fixed_header",r(e.element));return r(e.element).before(d),{setCurrencyAndReload:t}})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_footer","handlers",["handlers"]);n(["placement","vanillajs","utils/ajax"],function(e,n,t){function a(){var n=window.location.pathname,t=n.indexOf("-"),a=n.length<=1?"Home":t>0?n.substring(1,t):n.substring(1);require(["trjs!ta/util/Element"],function(n){ta.util.element.trackWhenScrolledIntoView("#"+e.id,[a,"in_view","global_footer"])})}return a(),{getFullDisclaimerText:function(e){t({url:"/TAMGFooterAjax",success:function(n){e.parentElement&&(e.parentElement.innerHTML=n)},data:{"a":"SHOW_FULL_DISCLAIMER"},evalScripts:!0,method:"get"})}}})});
define("utils/throttle",[],function(){return function(t,n){var e,r;return function(){r&&(clearTimeout(r),r=0);var i=e?n-(Date.now()-e):null;if(null!==i&&i>0)return void(r=setTimeout(t.apply.bind(t,this,arguments),i));var u=t.apply(this,arguments);return e=Date.now(),u}}});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"global_nav","handlers",["deferred/lateHandlers","handlers"]);o(["placement","lib/jquery-amd","common/Radio","ta/registration/RegEvents","utils/throttle"],function(e,o,n,t,a){"use strict";function s(){var e=o(window).scrollTop();if(f.length&&h.is(":visible")){var n=l.height()-e;e<=0&&f.css({"position":"absolute","top":0}),n>0&&(e>0&&e<=50?f.css({"position":"absolute","top":e,"bottom":"auto"}):n<=50&&f.css({"position":"absolute","top":"auto","bottom":0}))}}function r(){var e=o(".second-view",l),n=o(window).scrollTop();f.length&&(y.css({"display":"block"}),e.length&&h.is(":visible")&&(n=u.height()-y.height(),window.scroll(0,n),f.css({"position":"absolute","top":"auto","bottom":0})))}function i(){var e=o(".global-nav-persistent",l);e.length&&e.toggleClass("fixed",o(window).scrollTop()>l.offset().top)}var l=o("#"+e.id),v=n("global-nav"),d=null,c=null,u=o(".persistent-icons",l),f=o(".global-nav-icons",u),y=o(".global-nav-logo",u),h=o('[data-placement-name="global_nav_geopill"]',l);v.on("run-my-trips-test-3",function(){m(!1,!0)});var p=function(e){window.userLoggedIn=!0;var n=o("<div>").append(l.find(".global-nav-no-refresh"));l.html(e),l.find(".global-nav-no-refresh").each(function(e,t){o(t).replaceWith(n.find("#"+t.getAttribute("id"))[0])}),d&&d.hide("replace-el")}.bind(l),g=function(){return{skipLocation:e.location_id<=0,returnTo:document.location.pathname+(document.location.search||"")+(document.location.hash||"")}};t.on("success",function(){e.requestAJAXPlacement(p,null,g())}),l.on("mouseenter",".global-nav-links-container [data-element]",function(e){var n=o(this),t=n.find("a").first();d&&d.hide("new-overlay");var a=l.find(n.data("element")).clone();if(a.length){var s=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(s,function(s,r,i,v,c){var u=new s(n[0],new r(a[0],"global-nav-flyout global-nav-menu"),i,v.bottomRight([0,1]),c);u.domParent=l.find(".global-nav-overlays-container")[0],u.show(),t.attr("data-active-menu-trigger",!0),o(e.currentTarget).find(".ui_tab").addClass("hovering"),u.on("hide",function(){t.removeAttr("data-active-menu-trigger"),o(e.currentTarget).find(".ui_tab").removeClass("hovering")}),d=u})}}),l.on("mouseenter",".subItem",function(e){o(this).siblings(".expandSubItem").removeClass("active")}),l.on("mouseenter",".expandSubItem",function(e){var n=o(this);if(!n.hasClass("active")){n.addClass("active"),n.siblings(".expandSubItem").removeClass("active");var t=n.find(".secondSubNav").clone(),a=n.parents(".ui_overlay"),s=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseOut","trjs!overlays/options/destroyOnHide"];require(s,function(e,o,s,r){var i=new e(n[0],new o(t[0]),s,r);i.domParent=a[0],t.css("display","block"),i.show()})}}),l.on("mouseenter",".global-nav-links-ellipsis",function(e){var n=o(this);d&&d.hide("new-overlay");var t=l.find(".global-nav-links-container li"),a=t.filter(":hidden"),s=t.filter(function(e,n){return o(n).offset().top>t.offset().top}),r=o().add(a).add(s).clone(),i=l.find(".global-nav-links-menu-more").clone();i.prepend(r);var v=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnMouseAway","trjs!overlays/position","trjs!overlays/options/destroyOnHide"];require(v,function(e,o,t,a,s){var r=new e(n[0],new o(i[0],"global-nav-flyout global-nav-menu"),t,a.bottomRight([0,1]),s);r.domParent=l.find(".global-nav-overlays-container")[0],r.show(),n.find(".ui_tab").addClass("hovering"),r.on("hide",function(){n.find(".ui_tab").removeClass("hovering")}),d=r})}),l.on("click","#global-nav-HelpDesk",function(e){e.preventDefault();var o=this,n=["trjs!overlays/Overlay","trjs!overlays/styles/modal","trjs!overlays/options/closeOnEscape","trjs!overlays/position","trjs!overlays/options/closeOnDocClick","trjs!overlays/options/ajax","trcss!src/build/required/help_center_overlay"];require(n,function(e,n,t,a,s,r,i){var l=new e(o,[n(null,"","help_center"),t,a.cssCentered(),s,r("/uvpages/helpCenterOverlay.html")]);l.show(),v.emit("overlay-show")})}),l.on("click",".masthead-saves",function(e){c?(d&&d.hide("new-overlay"),c&&c.destroy()&&(c=null),require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("TopNav","mytrips_dropdown_cancel")})):(m(!1,!1,e.currentTarget),o(e.currentTarget).find(".ui_icon").addClass("hovering"))});var m=function(e,n,t){d&&d.hide("new-overlay");var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","trjs!ta/Core/TA.Record"];require(a,function(a,s,r,i,v,u,f){var y=new a(o(".masthead-saves")[0],new s("","global-nav-flyout global-nav-utility trips-flyout-container"),r.withoutTouchEvents,i.bottomLeft([-20,-3]),v,u);y.domParent=l.find(".global-nav-overlays-container")[0],y.show(),l.find(".trips-flyout-container").addClass("hide-arrow"),d=y,require(["trdust!masthead-saves-dust","trdust!styleguide-dust","trjs!masthead-saves","trcss!masthead-saves"],function(a,s,r){setTimeout(function(){c=new window.MastheadSavesApp,c.start({inCreateTripFlow:e,runTest3:n}),y.on("hide",function(e){c&&c.destroy()&&(c=null),f.trackEventOnPage("TopNav","mytrips_dropdown_cancel"),t&&o(t).find(".ui_icon").removeClass("hovering")}),l.find(".trips-flyout-container").removeClass("hide-arrow")},0)})})}.bind(l);l.on("click",".global-nav-utility-activator",function(e){var n=o(this),t=l.find(n.data("element")).clone();if(t.length){if(d){if(d.sourceElement==this)return void(d.isOpen()?d.hide("close"):d.show());d.hide("new-overlay")}t=t.clone();var a=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/autoReposition"];require(a,function(a,s,r,i,v){var c=new a(n[0],new s(t[0],"global-nav-flyout global-nav-utility"),r,i.bottomLeft([-20,-3]),v);c.domParent=l.find(".global-nav-overlays-container")[0],c.show(),n.addClass("menu-open"),o(e.currentTarget).find(".ui_icon").addClass("hovering"),c.on("hide",function(){n.removeClass("menu-open"),o(e.currentTarget).find(".ui_icon").removeClass("hovering")}),d=c})}}),l.on("click",".global-nav-logo",function(){require(["trjs!ta/Core/TA.Record"],function(e){e.setEvtCookie("TopNav_"+window.pageServlet,"click","TAlogo",0,"/Home")})}),n("inbox").on("has_unread_conversations",function(e){l.find(".global-nav-hamburger .ui_jewel.unread").removeClass("hidden"),l.find(".nav-sub-link.inbox .icon-and-jewel").removeClass("hidden")}),n("inbox").on("no_unread_conversations",function(e){l.find(".global-nav-hamburger .ui_jewel.unread").addClass("hidden"),l.find(".nav-sub-link.inbox .icon-and-jewel").addClass("hidden")}),r();var b=a(i,100);return o(window).scroll(function(){s(),b()}),{checkForPersistentIcons:s,checkForPersistentGlobalNav:i}})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_action_cart","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var e=n("#"+a.id);e.on("click","a.shopping-cart-link",function(){var a=n(this).data("tracking-label");require(["trjs!ta/Core/TA.Record"],function(n){n.trackEventOnPage("TopNav_"+window.pageServlet,"click",a)})})})});
require(["ta/p13n/placements"],function(n){var o=n.define.bind(n,"global_nav_action_inbox","handlers",["handlers"]);o(["placement","vanillajs","lib/jquery-amd","common/Radio","ta/Core/TA.Record"],function(n,o,e,i,t){function a(){var o=["trjs!overlays/Overlay","trjs!overlays/styles/flyout","trjs!overlays/options/closeOnDocClick","trjs!overlays/position","trjs!overlays/options/destroyOnHide","trjs!overlays/options/autoReposition","ta/registration/RegOverlay","trjs!unifiedinbox/inbox-lander","trcss!unified_inbox_lander"];require(o,function(o,i,t,a,d,c,u,v,h){var b=e(".inbox-nav-contents",l).clone()[0];if(b.classList.remove("hidden"),e(".login-cta",b).length){var w=e(".login-cta span",b);w.click(function(){r.destroy(),u.show({type:"dummy"},null,{flow:"CORE_COMBINED",pid:40187,userRequestedForce:!0,onSuccess:function(){e(".login-cta",l).remove(),e(".inbox-nav-dropdown",l).removeClass("with-login-cta"),window.setTimeout(function(){l=e("#"+n.id),s()},500)}.bind(this)})})}else for(var _,f=e(".js-inbox-lander-thread-list-item.loading",b),p=e(".inbox-masthead-wrapper",b),x=0;x<10;++x)_=f.clone(),_.removeClass("hidden"),p.append(_);r=new o(l[0],new i(b,"inbox-flyout-container"),t.withoutTouchEvents,a.bottomLeft([-20,-3]),d,c),r.show(),e(".login-cta",l).length||v.loadMastheadDropdown()})}function s(){e(".masthead-inbox-icon, .ui_jewel",l).click(function(){e(".ui_jewel",l).length&&e(".ui_jewel",l).hasClass("hidden")?t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","no_unread",d):e(".ui_jewel",l).length&&t.trackEventOnPage("Inbox|Dropdown","icon_jewel_click","has_unread",d),e(".masthead-inbox-icon",l).attr("data-on-inbox")?window.location="/Inbox":e(".inbox-flyout-container").length&&r?r.destroy():a()}),i("inbox").on("thread_clicked",function(n){r&&r.destroy()}),i("inbox").on("has_unread_conversations",function(n){e(".ui_jewel",l).removeClass("hidden")}),i("inbox").on("no_unread_conversations",function(n){e(".ui_jewel",l).addClass("hidden")})}var r,l=e("#"+n.id),d=40186;return s(),{}})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_profile","handlers",["handlers"]);t(["placement","lib/jquery-amd","page-model"],function(e,t,a){"use strict";function n(){var e=t(".button_container").data("pageProperty1"),a=t(".button_container").data("pageProperty2"),n=t(".button_container").data("pageProperty3"),r=t(".button_container").data("pageProperty4");(e&&""!==e||a&&""!==a||n&&""!==n||r&&""!==r)&&require("ta/Core/TA.Record").trackEventOnPage(e,a,n,r)}var r=t("#"+e.id),o=null;r.on("click","a.login-button",function(e){o&&o.hide("replace-el");var a=t(".core-login-button").data("flowName"),r=t(".core-login-button").data("pid");require("ta/registration/RegOverlay").show(e,e.target,{flow:a,pid:r,userRequestedForce:"true",locationId:require("page-model").GEO_ID}),e.preventDefault(),n()});var i=function(e,a){var n=t(e).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(t){/\/#\s*$/.test(e.href)||"_blank"==e.target?t.trackEventOnPage(a,"click",n):t.setEvtCookie(a,"click",n,0,e.href)})};r.on("click",".global-nav-profile-menu a.subLink[data-tracking-label], .sidebar-nav-profile a.subLink[data-tracking-label]",function(){i(this,"UtilityNav")}),r.on("click","[data-track-profile-dropdown-open]",function(){var e=require("page-model").session.loggedIn?"Signed_in_profile_dropdown":"Signed_out_profile_dropdown";require(["trjs!ta/Core/TA.Record"],function(t){t.trackEventOnPage("UtilityNav","open",e)})})})});
define("ta/Core/TA.LocalStorage",["vanillajs","common/trackingStreams","ns-exporter"],function(e,t,n){"use strict";var r=!1,o="taLsTest",i="1",a="TALocalStorageCurrentSessionId",u=!1,s="session-",l=!1,c=[],f=[],v=function(){return!(!u&&!l)},g=function(e){return!!v()||(t.error(null,"Accessing localStorage session cookie before session logic intialized: "+e),!1)},m=function(e){return w(e,"value")},d=function(e){return w(e,"now")},w=function(e,t){if(!t)return null;try{var n,o=JSON.parse(r.getItem(e)||"0");return o?o.ttl&&o.ttl+o.now<(new Date).getTime()?(r.removeItem(e),null):o.hasOwnProperty(t)?(r.setItem("512",o[t]),n=r.getItem("512"),r.removeItem("512"),n):null:null}catch(e){}return null},y=function(e,t){try{var n=JSON.parse(e||"0");return n&&n.hasOwnProperty(t)?n[t]:null}catch(e){return null}},S=function(e){try{var t=JSON.parse(r.getItem(e)||"0");return t?t.ttl&&t.ttl+t.now<(new Date).getTime()?(r.removeItem(e),null):t.value:null}catch(e){}return null},h=function(e){try{r.removeItem(e)}catch(e){}},I=function(e,t){var n=d(e);if(t&&n&&n<(new Date).getTime()-t)try{r.removeItem(e)}catch(e){}},p=function(e){try{var t=r.getItem(e);if(null!==t&&void 0!==t)return!0}catch(e){}return!1},O=function(e,t,n){try{r.setItem(e,JSON.stringify({ttl:n||0,now:(new Date).getTime(),value:t}))}catch(e){}},T=function(e){if(l=!0,!e)return t.error(null,"Attempting to initialize localStorage with invalid sesion key: "+e),!1;if(!E())return!1;if(u=m(a),!u||u!=e){u=e,O(a,u);var n=m("latestPageServlet");n&&O("sessionEntryServlet",n),k(),p(a)&&require.defined("ta/Core/TA.Store")&&require("ta/Core/TA.Store").store("isFirstSessionPageView",!0)}},k=function(){try{var e=s+u,t=new RegExp("^"+s);if(r.length)for(var n=0;n<r.length;n++){var o=r.key(n);try{t.test(o)&&o!=e&&h(o)}catch(e){}}}catch(e){}},E=function(){try{if(r&&r.setItem){r.setItem(o,i);var e=r.getItem(o)!=i;return r.removeItem(o),e&&(r=!1),!!r}}catch(e){}return!1},V=function(e){try{r.setItem("session-"+u,JSON.stringify(e))}catch(e){}},N=function(){try{var e=r.getItem("session-"+u);if(e)return JSON.parse(e)}catch(e){}return{}},b=function(e){c.push(e)},A=function(e,t){f[e]||(f[e]=[]),f[e].push(t)},C={enabled:E(),get:m,getObject:S,set:O,remove:h,removeIfElapsed:I,has:p,getTimeStamp:d,updateSessionId:T,onSessionStorageChange:b,onValueChange:A,canUseSession:v,getSessionKey:function(e){if(!g(e))return null;var t=N();return t?t[e]:null},setSessionKey:function(e,t){if(g(e)){var n=N();n||(n={}),n[e]=t,V(n)}},removeSessionKey:function(e){if(g(e)){var t=N();t&&(delete t[e],V(t))}},hasSessionKey:function(e){if(!g(e))return!1;var t=N();if(t){var n=t[e];if(null!==n&&void 0!==n)return!0}return!1},setStorage:function(e){r=e,C.enabled=E()}};if("undefined"!=typeof window){var J=!1;try{J=window.localStorage}catch(e){}C.setStorage(J),function(){function e(e){if(e=e||window.event,!u||e.key&&e.key!=="session-"+u)e.key&&f[e.key]&&(e.oldValueObj=e.oldValue&&y(e.oldValue,"value"),e.newValueObj=e.newValue&&y(e.newValue,"value"),f[e.key].forEach(function(t){t(e)}));else for(var t=0,n=c.length;t<n;t++)c[t](e)}window.addEventListener?window.addEventListener("storage",e,!1):window.attachEvent&&window.attachEvent("onstorage",e)}()}return n.createNs(C,"ta","localStorage"),C});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"global_nav_action_trips","handlers",["handlers"]);t(["placement","lib/jquery-amd","api-mod","page-model","common/Radio","ta/Core/TA.Record","ta/Core/TA.LocalStorage"],function(e,t,n,o,a,i,l){"use strict";var r=t('[data-placement-name="global_nav_menus"]'),s=a("global-nav"),d=null,u={},c=t("#"+e.id),y=(c.find(".my-trips-dropdown-test"),c.find(".my-trips-dropdown-control"),c.find(".quick-save-test")),f="my-trips-dropdown-test-overlay",p="my_trips_educational_flyout",v=require("page-model").JS_SECURITY_TOKEN,m=require("page-model").session.pageServlet,g=function(e){t.ajax({type:"GET",url:"/data/1.0/trips/item",data:{limit:2},beforeSend:function(e){e.setRequestHeader("X-Requested-By",v)},success:e})},h=function(e){return(new Date).getTime()-e<2592e6},_=function(n){var o=["overlays/position","overlays/styles/flyout","overlays/options/destroyOnHide","overlays/options/autoReposition","overlays/options/fade"],a=function(e,t,o,a,i){return[new t(n[0],"global-nav-flyout global-nav-utility my-trips-dropdown-test-flyout"),e.bottomLeft([-20,-3]),o,a,i(i.SHORT,!0,!0)]};n.on("click",".ui_close_x",function(){s.trigger("hide-overlays",f)}),s.trigger("show-overlay",f,t("#"+e.id).find(".masthead-saves")[0],o,null,a)},w=function(){return t.find(".ui_notification_container").length||t.find(".ui_overlay").length||t.find("#qual_ol").length},b=function(){setTimeout(function(){!w()&&y.length>0&&l.has(p)&&!l.getObject(p)&&0==n.scrollTop()&&(_(y),l.set(p,!0),i.trackEventOnPage(p,"flyout_shown",m,0,!1))},1e3)};s.on("hide-overlays",function(e){e?u[e]&&u[e].hide("hide-overlay")&&(u[e]=null):d&&d.hide("replace-el")}),s.on("show-overlay",function(e,t,n,o,a){d&&d.hide("new-overlay");var i=["trjs!overlays/Overlay"].concat(n);require(i,function(n){var i=a.apply(null,[].slice.apply(arguments,1)),l=new n(t,i);l.domParent=r.find(".global-nav-overlays-container")[0],l.show(),o&&o(l),d=l,e&&(u[e]=l)})}),s.on("run-quick-save-test",function(){l.has(p)||g(function(e){e.data&&(e.data.length<=1||!h(e.data[1].date))&&(l.set(p,!1),b())})}),l.enabled&&("complete"===document.readyState?b():t(window).ready(b))})});
require(["ta/p13n/placements"],function(e){var n=e.define.bind(e,"global_nav_geopill","handlers",["deferred/GeoSearch","handlers"]);n([],function(){})});
require(["ta/p13n/placements"],function(a){var n=a.define.bind(a,"global_nav_links","handlers",["handlers"]);n(["placement","lib/jquery-amd"],function(a,n){"use strict";var t=n("#"+a.id),e=n('[data-placement-name="global_nav_links"]'),i=function(a,t){var e=n(a).data("trackingLabel");require(["trjs!ta/Core/TA.Record"],function(n){/\/#\s*$/.test(a.href)||"_blank"==a.target?n.trackEventOnPage(t,"click",e):n.setEvtCookie(t,"click",e,0,a.href)})};e.on("click","a.global-nav-link[data-tracking-label]",function(){i(this,"TopNav")}),e.on("click","a.subLink",function(){var a=n("[data-active-menu-trigger][data-tracking-label]",t);a.data("trackingLabel")+"_sublink";i(this,"TopNav")})})});
require(["ta/p13n/placements"],function(e){var t=e.define.bind(e,"masthead_search","handlers",["deferred/lateHandlers","handlers"]);t(["placement","ta/Core/TA.Store"],function(e,t){function r(){if(e.params&&"typeahead_to_store"in e.params){var r=e.params.typeahead_to_store;if(r)for(var n in r)r.hasOwnProperty(n)&&t.store(n,r[n])}}r();var n=t.retrieve("typeahead_dual_search_options");return document.activeElement===document.getElementById("GEO_SCOPED_SEARCH_INPUT")?e.require(["trjs!deferred/lateHandlers"],function(e){e.whereFocused({type:"dummy"},document.activeElement)}):document.activeElement===document.getElementById("mainSearch")&&e.require(["trjs!deferred/lateHandlers"],function(e){e.whatFocused({type:"dummy"},document.activeElement)}),{getOptions:function(){return n}}})});
define("overlays/styles/flyout",["vanillajs","api-mod"],function(t,e){"use strict";function n(t){this.container=e.createElement("div",{"class":"ui_overlay ui_flyout"+(t?" "+t:"")}),this.contentElement=this.container}var i=function(t,e){return function(){n.call(this,e||this.sourceElement.getAttribute("data-flyout")||""),this.updateContent(t)}};return i});
define("overlays/options/matchWidth",["vanillajs","api-mod"],function(t,i){"use strict";var n=function(t){function n(){this.container&&t&&(i.setStyle(this.container,"width",i.getSize(t).x+"px"),this.emit("positionDirty"))}return function(){this.on("show",i.bind(n,this))}};return n});
define("overlays/options/fade",["lib/jquery-amd"],function(t){"use strict";function i(i){t(this.container).addClass(i),t(this.shade).addClass(i)}function n(i){t(this.container).removeClass(i),t(this.shade).removeClass(i)}var l=function(){},s="fade_in",a="fade_out",o=[function(t){i.call(this,t.cl)},function(t){i.call(this,s)},l,function(t){n.call(this,s)},l],c=[l,function(t){i.call(this,t.cl),i.call(this,s)},function(t){n.call(this,t.cl),n.call(this,s)},l,l],e=[l,l,l,function(t){i.call(this,t.out),i.call(this,a)},function(t){n.call(this,t.out),n.call(this,a)}],h=function(t,i,n){return function(){if(t){i=i!==!1,n=n!==!1;var l=this.show,s=this.hide,a=i&&n?o:i?c:e;a[0].call(this,t),i&&(this.show=function(){var i=arguments;l&&l.apply(this,i),a[1].call(this,t),setTimeout(function(){a[2].call(this,t)}.bind(this),t.len)}.bind(this)),n&&(this.hide=function(){var i=arguments;a[3].call(this,t),setTimeout(function(){a[4].call(this,t),s&&s.apply(this,i)}.bind(this),t.len)}.bind(this))}}};return h.NONE={cl:"fade_none",out:"fade_out_none",len:0},h.SHORT={cl:"fade_short",out:"fade_out_short",len:250},h.NORMAL={cl:"fade_normal",out:"fade_out_normal",len:500},h.LONG={cl:"fade_long",out:"fade_out_long",len:1e3},h});
define("overlays/options/closeOnScroll",["vanillajs","api-mod"],function(n,o){"use strict";var i=function(){this.on("show",function(){o.addEvent(window,"scroll",this.hide)}).on("hide",function(){o.removeEvent(window,"scroll",this.hide)})};return i});
define("overlays/options/centerArrowOnSrcElement",["vanillajs","api-mod"],function(t,i){"use strict";var o=function(t){function o(){if(t=t||this.sourceElement,this.container&&t&&this.arrow){var o=i.getCoords(this.container),r=i.getCoords(t),n=i.hasClass(this.container,"arrow_top")||i.hasClass(this.container,"arrow_bottom");if(n){var s=r.left+r.width/2,e=i.getSize(this.arrow).x/2,a=Math.max(e,Math.min(o.width-e,s-o.left));i.setStyle(this.arrow,{"left":a+"px","right":"auto","margin":"0 0 0 -"+e+"px"})}else{var s=r.top+r.height/2,e=i.getSize(this.arrow).y/2,h=Math.max(e,Math.min(o.height-e,s-o.top));i.setStyle(this.arrow,{"top":h+"px","bottom":"auto","margin":"-"+e+"px 0 0 0"})}}}return function(){this.on("show",i.bind(o,this)),this.on("positionDirty",i.bind(o,this)),this.on("repositionArrow",i.bind(o,this))}};return o});
define("overlays/options/repositionOnTaEvent",["vanillajs","ta/Core/TA.Event"],function(n,i){"use strict";return function(n){return function(){var t=this.emit.bind(this,"positionDirty");this.on("show",function(){i.on(n,t)}).on("hide",function(){i.off(n,t)})}}});
require(["ta/p13n/placements"],function(e){var o=e.define.bind(e,"brand_login_callout","handlers",["handlers"]);o(["placement","lib/jquery-amd","ta/Core/TA.Record","ta/Core/TA.Event","ta/Core/TA.LocalStorage","overlays/Overlay","overlays/styles/flyout","overlays/position","overlays/options/matchWidth","overlays/options/closeOnDocClick","overlays/options/autoReposition","overlays/options/fade","overlays/options/closeOnScroll","overlays/options/centerArrowOnSrcElement","page-model","overlays/options/repositionOnTaEvent"],function(e,o,n,t,a,r,i,l,s,c,d,u,v,p,g,f){"use strict";var y,_=o(".core-login-button",".global-nav-profile"),m=o(".brand-login-test"),b=o(".brand-text",m),h=o("#brandLoginContainer"),w=g.session.pageServlet,O=g.GEO_ID,C=function(){return o(".ui_notification_container").length||o(".ui_overlay").length},k=function(){m.on("click",".ui_close_x",function(){y&&y.destroy()&&(y=null)}),y=new r(_.parent()[0],new i(m[0],"brand-callout ui_popover"),l.bottomLeft([-10,1]),d,p(_),c,s,v,f("showingCookieConsentBanner"),u(u.LONG,!1,!0)),y.show(),o("#brandLoginPopover").removeClass("hidden")},E=function(e,o){if(!require("page-model").session.loggedIn)return e&&k(),a.set(o,!0),void n.trackEventOnPage(o,"view","servletname_"+w)},S=function(){if(!C()){var e=h.attr("data-tracking-property")||"",o=m.length>0;a.has(e)||E(o,e)}},A=function(e){y&&y.destroy()&&(y=null),n.trackEventOnPage("pcb_campaign_callout_login","click","servletname_"+w,0,window.location.href),require("ta/registration/RegOverlay").show(e,e.target,{flow:"BRAND_SIGNUP_CORE_COMBINED",pid:40197,locationId:O}),e.preventDefault()};o(document).on("regUpdateMember",function(){h.length>0&&n.setEvtCookie("pcb_campaign_callout_Success","view","servletname_"+w,0,window.location.href)}),b.on("click",function(e){A(e)}),a.enabled&&("complete"===document.readyState?S():o(window).ready(S()))})});
require(["ta/rollupAmdShim"],function(a){a.install(["amdloaders","remoteModule"],[])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"core-amd",files:{"js-amd":{src:{amdloaders:1,remoteModule:1}}},_:{baseUrl:"/"}})};
define("remoteModule",["vanillajs"],function(){"use strict";function t(t,e){return null==t?null:t.getAttribute("data-"+e)}function e(t,e){for(;t&&t!==document.body;){if(t.getAttribute(e))return t;t=t.parentNode}return null}function r(e,r,n,i,u){var a=t(e,r);return a?a.replace(/\$plc:/g,"$prp/"+n+"/").replace(/\$prw:/g,"$prw/"+i+"/").split(",").filter(function(t){return!!t.length}).reduce(function(t,e){return t.concat(u.map(function(t){var r="trdust!"===t&&e.indexOf("/")<0;return t+e+(r?"-dust":"")}))},[]):[]}var n={};return function(i,u){var a=[].slice.call(arguments),l=(t(u,"load-init")||t(u,"load-js")).split("."),s=l.shift(),d=l.shift();if(!(n[s]&&n[s].indexOf(u)>=0)){if(require.defined(s)){var c=require(s);return void(d?c[d]:c).apply(c,a)}(n[s]||(n[s]=[])).push(u);var f=e(u,"data-placement-name"),p=e(u,"data-prwidget-name"),o=t(f,"placement-name"),h=t(p,"prwidget-name"),m=[].concat(r(u,"load-all",o,h,["trjs!","trcss!","trdust!"]),r(u,"load-js",o,h,["trjs!"]),r(u,"load-css",o,h,["trcss!"]),r(u,"load-dust",o,h,["trdust!"]));/^\$plc:/.test(s)?(a.unshift(m),a.unshift(s.substr(5)+"."+d),a.unshift(f.getAttribute("id")),a.unshift("evCall"),a.unshift("ta/p13n/placements"),requireCallLast.apply(window,a)):/^\$prw:/.test(s)?(a.unshift(s.substr(5)+"."+d),a.unshift("call"),a.unshift("ta/prwidgets"),requireCallLast.apply(window,a)):require(m,function(){n[s]=n[s].filter(function(t){return t!=u});var t=require(s);(d?t[d]:t).apply(t,a)})}}});
if("undefined"==typeof ta)var ta={};var api=function(){null==window.IS_DEBUG&&(window.IS_DEBUG=!1),null==window.VERSION_MAP&&(window.VERSION_MAP={}),null==window.CDNHOST&&(window.CDNHOST="");var t={overlays:window.ta.overlays||{},maps:window.ta.maps||{},bmaps:window.ta.bmaps||{},common:window.ta.common||{},phac:window.ta.phac||{},servlet:window.ta.servlet||{},support:window.ta.support||{},util:window.ta.util||{},widgets:window.ta.widgets||{},commerce:window.ta.commerce||{},mobfull:window.ta.mobfull||{},photos:window.ta.photos||{},media:window.ta.media||{},hac:{filters:{}},t4b:window.ta.t4b||{},api:{maps:{}},p13n:window.ta.p13n||{},registration:window.ta.registration||{},meta:window.ta.meta||{}};t.id=function(n){try{return document.id(n)}catch(n){t.util.error&&t.util.error.record(n,"ta.id failed")}},t.select=function(){var t=(Array.convert||Array.from)(arguments),n=t.length>1&&("string"==typeof t[0]?t.pop():t.shift())||document,e=t.shift();return Slick.search(n,e,new Elements)};var n=t;return n.extend=function(){var t,n,e,r,o,i,a=arguments[0]||{},u=1,l=arguments.length,s=!1;for("boolean"==typeof a&&(s=a,a=arguments[u]||{},u++),"object"==typeof a||isFunction(a)||(a={});u<l;u++)if(null!=(t=arguments[u]))for(n in t)e=a[n],r=t[n],a!==r&&(s&&r&&(isPlainObject(r)||(o=isArray(r)))?(o?(o=!1,i=e&&isArray(e)?e:[]):i=e&&isPlainObject(e)?e:{},a[n]=extend(s,i,r)):void 0!==r&&(a[n]=r));return a},n.fireEvent=function(t,n,e){return t&&$(t).fireEvent(n,e)},n.addEvent=function(t,n,e){return t&&$(t).addEvent(n,e)},n.removeEvent=function(t,n,e){return t&&$(t).removeEvent(n,e)},n.removeEvents=function(t,n){return t&&$(t).removeEvents(n)},n.createElement=function(t,n){return new Element(t,n)},n.getSize=function(t){return t&&$(t).getSize()},n.getPosition=function(t,n){return t&&$(t).getPosition(n)},n.addClass=function(t,n){return t&&$(t).addClass(n)},n.removeClass=function(t,n){return t&&$(t).removeClass(n)},n.toggleClass=function(t,n,e){return t&&$(t).toggleClass(n,e)},n.hasClass=function(t,n){return t&&$(t).hasClass(n)},n.find=function(t,n){return $(n||document).getElement(t)},n.findAll=n.select,n.parent=function(t,n){return t&&$(t).getParent(n)},n.setStyle=function(t,n,e){return t&&$(t).setStyle(n,e)},n.mixin=function(t){return Array.prototype.slice.call(arguments,1).forEach(function(t){for(var n in t)this[n]=t[n]},t),t},n.merge=function(t){for(var n=Array.prototype.slice.call(arguments,1),e=0,r=n.length;e<r;e++)for(var o in n[e])n[e].hasOwnProperty(o)&&(t[o]=n[e][o]);return t},n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.stopEvent=function(t){return t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1),!1},window.define&&define("ta",[],function(){return t}),n}();api.merge(ta,api);var ifdefNN=function(t){return"undefined"!=typeof t&&null!==t};
require(["ta/rollupAmdShim"],function(a){a.install([],["ta","ta","ta"])});
require(["ta/rollupAmdShim"],function(a){a.install(["ta/Core/TA.Store","utils/store","ta/Core/TA.Load","ta/Core/TA.FireEvent","ta/Core/TA.Event","ta/Core/TA.Record","ta/util/Error","ta/util/Selenium","ta/util/roybatty","ta/Core/TA.LocalStorage","ta/Core/TA.Prerender","ta/projects","ta/Browser","ta/util/ScreenSizeRecord","utils/BatchRequest","utils/ceUtils"],["ta","ta"])});if(window.requirejs&&requirejs.taConfig){requirejs.taConfig({deferred:{},name:"core-without-dust-or-mootools",files:{js3_secure:{ssl:{ta:{Core:{"TA.Record":1,"TA.Prerender":1}}}},"js-amd":{src:{utils:{BatchRequest:1,ceUtils:1,store:1}}},js3:{src:{ta:{projects:1,util:{ScreenSizeRecord:1,roybatty:1,Error:1,Selenium:1},Browser:1,Core:{"TA.FireEvent":1,"TA.Event":1,"TA.Load":1,"TA.LocalStorage":1,"TA.Store":1}}}}},_:{baseUrl:"/"}})};
define("utils/store",["vanillajs","ta/Core/TA.Store"],function(e,r){return{add:r.store,get:r.retrieve,has:r.has,getOrAdd:r.retrieveOrStore,remove:r.remove}});
define("ta/Core/TA.Load",["vanillajs","ns-exporter","ta/Core/TA.Store","utils/resourceLoader"],function(e,r,o,a){function t(e){if("string"==typeof e&&VERSION_MAP){var r=!1;if(VERSION_MAP[e])r=e;else if(VERSION_MAP[e+".js"])r=e+".js";else for(var o=e.split("."),a=0;o&&o.length>1&&a<10;){o=o.slice(0,-1);var t=o.join("-")+".js";if(t&&VERSION_MAP[t]){r=t;break}a++}return r}}var n={};return n.load=function(e,r,n){var i=!1,s=t(e);s&&(i=VERSION_MAP[s]);var l=function(){var e=o.remove(f);e&&e.forEach(function(e){e&&e()})};if(i){var f=s+"_callback";if(o.has(f)){var c=o.retrieve(f);c.push(r),o.store(f,c)}else o.store(f,[function(){delete VERSION_MAP[s],r&&r()}]),"object"==typeof i?a.load(i,{serial:!0,forceType:"js"},l):a.load(i,{forceType:"js"},l)}else n&&a.loaded(i)&&(l(),r&&r());return i},n.loadInOrder=function(e,r){a.load(e,{serial:!0},r)},r.exportTo(n,"ta"),n});
define("ta/util/Selenium",["vanillajs","ns-exporter","mixins/Events","ta/Core/TA.LocalStorage","ta/util/Error"],function(r,t,e,n,o){var a={},i=" :: ",l="lastError";return a.lastErrorOnPage=function(){return n.getObject(l)},o.on("error",function(r,t,e,o){"ERROR"===e&&n.set(l,e+i+t+i+r+i+"Stack -> "+o)}),t.exportTo(a,"ta.util.selenium"),a});
define("ta/util/roybatty",["vanillajs","utils/ajax","ta/Core/TA.Event","ta/util/Error","ta/util/Cookie"],function(e,t,r,o,a){var i=!1;return r.queueForLoad(function(){if(window.taSecureToken)try{if(!window.taEarlyRoyBattyStatus){var e=a.readRaw("roybatty");if(e){var r=e.split(",");if(2==r.length){var n=parseInt(r[1],10);a.write("roybatty",taSecureToken+","+n,null,"/",cookieDomain)}else 1==r.length?a.write("roybatty",taSecureToken):o.record(null,"royBatty -- Bad value in cookie: "+e)}else a.write("roybatty",taSecureToken+",1",null,"/",cookieDomain),t(require.defined("ta/Browser")&&require("ta/Browser").isIEMetro()?"/CookiePingback?metroBrowser=true":"/CookiePingback")}i=!0}catch(e){o.record(e,"javascript exection bot detection error")}},"RoyBatty"),{isDone:function(){return i}}});
window.ta||(window.ta={}),define("ta/util/RecordInterruption",["vanillajs","ta/Core/TA.Record","ta/util/Error"],function(t,r,n){"use strict";var e="interruption_record",o=["popup","popunder","gate","other"],i=function(t,r){n.record(r,t,null,null)},u=function(t){for(var r=0;r<o.length;r++)if(t===o[r])return!0;return!1};return{record:function(t,n){try{u(t)?n?r.trackEventOnPage(e,t,n.replace(",",""),0,!0):i("ta/util/RecordInterruption: Name cannot be null or blank"):i("ta/util/RecordInterruption: Invalid type")}catch(t){i("ta/util/RecordInterruption: exception tracking event",t)}}}});
define("ta/Core/TA.Prerender",["vanillajs","api-mod","ta/Core/TA.Record","ta/util/Error"],function(t,e,i,r,n){"use strict";var a={states:{PREFETCH_SENT:"prefetchSent",CLEAR:"clear"}},s=function(t,e,i,n,a){if(r._validatedTrackEventArray&&r._GARecordRequest){var s=r._validatedTrackEventArray(t,e,i,n,a);return r._GARecordRequest(s).get(),!0}return!1},d=function(){if("visibilityState"in document)return a._visibilityState="visibilityState",void(a._visibilitystatechanged="visibilitychange");for(var t=["webkit","moz","ms","o"],e=0;e<t.length;e++)t[e]+"VisibilityState"in document&&(a._visibilityState=t[e]+"VisibilityState",a._visibilitystatechanged=t[e]+"visibilitychange")},c=function(){try{a._state===a.states.PREFETCH_SENT&&"prerender"!==document[a._visibilityState]&&(s("Prerender","shown","",0,!0),a._state=a.states.CLEAR)}catch(t){n.record(t)}};return a._init=function(t){try{if(a._enabled=t,a._state=a.states.CLEAR,d(),!a.isSupported()||!a.isEnabled())return;"prerender"===document[a._visibilityState]&&s("Prerender","prefetch","",0,!0)&&(a._state=a.states.PREFETCH_SENT,document.addEventListener(a._visibilitystatechanged,c,!1))}catch(t){n.record(t)}},a.isEnabled=function(){return a._enabled},a.isSupported=function(){return void 0!==a._visibilityState},a});
define("ta/projects",["vanillajs","ns-exporter","ta/Core/TA.Store"],function(t,e,n){function s(t,e){return!!(t&&e&&t.className.match(new RegExp("\\b"+e+"\\b")))}function r(t,e,n){return i.has(t)||i.setIfClass(t,e,n),i.get(t)}var i={vals:{},set:function(t,e){i.vals[t]=e},setIfClass:function(t,e,n){"string"==typeof e&&(e=document.getElementById(e)),i.vals[t]=s(e,n)},get:function(t){return i.vals[t]},has:function(t){return t in i.vals}},a={};return a.isHotelsRedesign2011=function(){var t="isHotelsRedesign2011";return i.has(t)||("LastMinute"==window.pageServlet?i.set(t,!0):i.setIfClass(t,"HAC_SMRY","hotels_re_2011")),i.get(t)},a.isSmartDealsFilters=function(){return r("smartDealsFilters","DEALS","sdfilters")},a.isAttractionsRedesign2012=function(){return r("isAttractionsRedesign2012","ATTRACTIONS_2012","gridA")},a.isMetaHomepageIntegration2013=function(){return r("isMetaHomepageIntegration2013","PPT","ppt_container")},a.isMetaHotels2013=function(){return r("isMetaHotels2013","PAGE","meta_hotels")},a.isMetaHotelsRequest=function(){return n.has("isMetaHotelsRequest")},a.isSmartDealsHSXSortEnabled=function(){return n.has("isSmartDealsHSXSortEnabled")},a.isHRTabs2014=function(){return n.has("hr_tabs_2014")},a.isTabletAlbumViewer=function(){return n.retrieve("tabletAlbumPhotoLightbox.enabled")},a.isAirport=function(){return"Airport"==window.pageServlet},e.exportTo(a,"ta"),a});
define("ta/util/ScreenSizeRecord",["vanillajs","ta/Core/TA.LocalStorage","ta/Core/TA.Record","ta/Core/TA.Event"],function(e,n,t,i){function o(){var e=document.documentElement,n=document.body,t=window.innerWidth||e.clientWidth||n.clientWidth,i=window.innerHeight||e.clientHeight||n.clientHeight,o=screen.width,r=screen.height;return"s"+o+"x"+r+"b"+t+"x"+i}function r(e){var i=o(),r=n.getSessionKey(d);i!==r&&(n.setSessionKey(d,i),t.trackEventOnPage("screenSizeRecord",e,i))}function c(){function e(){t&&clearTimeout(t),t=setTimeout(function(){r("resize")},250)}if(ta.retrieve("screenSizeRecord")&&n.enabled){r("load");var t;window.addEventListener?window.addEventListener("resize",e,!1):window.attachEvent&&window.attachEvent("onresize",e)}}var d="screenSizeRecord";i.queueForLoad(c,"ScreenSizeRecord.onLoad")});
define("utils/BatchRequest",["ajax-request"],function(e){"use strict";function n(e,n){r[e]=r[e]||[],r[e].push(n),i&&clearTimeout(i),i=setTimeout(t,a)}function t(n){for(var t in r)if(r.hasOwnProperty(t)){for(var a={batched:!0},i=r[t],u=0;u<i.length;u++)for(var o in i[u])i[u].hasOwnProperty(o)&&(a["data["+u+"]["+o+"]"]=i[u][o]);e({method:"POST",url:t,data:a,synchronous:n})}r={}}var a=1500,r={},i=null;return window.addEventListener("onpagehide"in window?"pagehide":"unload",t.bind(null,!0)),{queue:n}});
define("overlays/uiOverlay",["vanillajs","api-mod","utils/responsive"],function(t,e,a){"use strict";function o(t){var e=a[t.getAttribute("data-breakpoint")];return!("function"==typeof e&&!e())}var r={"tooltip":{defaultPosition:"above",defaultFade:"fade_short"},"popover":{defaultPosition:"below",defaultFade:"fade_short"},"modal":{defaultPosition:"center",defaultFixed:!0,defaultFade:"fade_short"},"dropdown":{defaultPosition:"below"},"notification":{}},i={},s=function(t,a){if(t=t||window.event,a=a||t.target||t.srcElement,o(a)){var s=t&&t.type;s&&e.removePropertyEvent(a,s,"uiOverlay"),t&&e.stopEvent(t);var n,l=(a.getAttribute("data-position")||"").split(" ").filter(function(t){return!!t.length}),u=l.shift(),d=["overlays/Overlay","overlays/position"];for(var v in r)if(a.hasAttribute("data-"+v)){u=u||r[v].defaultPosition,d.push("overlays/styles/"+v),n=!0;break}var c=a.getAttribute("data-options")||"";if(!n&&require.defined("ta/util/Error")){var p="uiOverlay: no style. class="+a.className+", id="+a.id;return[].forEach.call(a.attributes,function(t){/^data-/.test(t.name)&&(p+=", "+t.name+"="+t.value)}),void require("ta/util/Error").record(null,p)}d.push(a.hasAttribute("data-windowshade")?"overlays/styles/windowshade":null);var h=!1;a.hasAttribute("data-defer")&&(h=parseInt(a.getAttribute("data-defer"))),d.push(h?"overlays/options/hoverDelay":null),d.push(a.hasAttribute("data-fade")?"overlays/options/fadeInOut":null),d.push(a.getAttribute("data-url")?"overlays/options/ajax":null),d.push(a.hasAttribute("data-close-event")?"overlays/options/closeOnEvent":null),d.push(a.hasAttribute("data-close-ta-event")?"overlays/options/closeOnTaEvent":null),d.push(a.hasAttribute("data-maxWidth")?"overlays/options/maxWidth":null),d.push(a.hasAttribute("data-close-child")?"overlays/options/closeOnTargetChildClick":null);var f=a.hasAttribute("data-move-padding")||a.hasAttribute("data-move-source");d.push(f?"overlays/options/moveIntoView":null),d.push(a.hasAttribute("data-keep-in-dom")?"overlays/options/keepInDom":null),d.push("overlays/options/storeOverlayOnElement"),c&&(d=d.concat(c.split(" ").map(function(t){return"overlays/options/"+t}))),a.hasAttribute("data-tooltip")?"click"===s?d.push("overlays/options/closeOnDocClick"):"mouseover"===s&&c.indexOf("closeOnMouseAway")<0&&d.push("overlays/options/closeOnMouseOut"):a.hasAttribute("data-dropdown")&&("click"===s?(d.push("overlays/options/closeOnDocClick"),d.push("overlays/options/closeOnSourceClick")):"mouseover"===s&&d.push("overlays/options/closeOnMouseAway")),d.push(a.hasAttribute("data-zIndex")?"overlays/options/zIndex":null);var y;if(!(a.hasAttribute("data-unique")&&(y=a.getAttribute("data-unique"),y&&y in i))){var b;return a.hasAttribute("data-group")&&(b=a.getAttribute("data-group")),require(d,function(t,n,d,c,p,f,A,g,m,w,O,E){var k=[d(a,u),u&&n[u](l,r[v].defaultFixed),c&&c(a.getAttribute("data-windowshade")),p&&p(h,!0),f&&f(r[v].defaultFade),A&&A(),g&&g(a.getAttribute("data-close-event")),m&&m(a.getAttribute("data-close-ta-event")),w&&w(a.getAttribute("data-maxWidth")),O&&O(a.getAttribute("data-close-child")),E&&E(a.getAttribute("data-move-source"),parseInt(a.getAttribute("data-move-padding"),10))],x=Array.prototype.slice.call(arguments,11),I=new t(a,k.concat(x)),q=function(){e.select(".ui_tooltip").forEach(function(t){t.overlay&&t.overlay!=I&&t.overlay.hide()}),b&&(i[b]||[]).forEach(function(t){t!=I&&t.hide()}),I.show()};if(b){var C=i[b]||[];C.push(I),i[b]=C}if(s&&!h){var F=function(t){o(a)&&(q(),e.stopEvent(t))};e.addEvent(a,s,F),I.on("destroy",function(){e.removeEvent(a,s,F)})}if(y&&(i[y]=I,I.on("destroy",function(){delete i[y]})),!h&&q(),a.hasAttribute("data-callback")){var P=e.fn(a.getAttribute("data-callback"));P&&P(I)}}),!1}var A=i[y];if(A.sourceElement=a,A.updateContent(),!h&&A.show(),a.hasAttribute("data-callback")){var g=e.fn(a.getAttribute("data-callback"));g&&g(A)}}};return s}),window.uiOverlay=function(){var t=arguments;require(["overlays/uiOverlay"],function(e){e.apply(null,t)})};
define("mixins/page-dates/DateEvents",["mixins/Events","vanillajs"],function(e){"use strict";return new e("dateSelected","calendarOpened")});
define("common/pixels-loader",["vanillajs","mixins/page-dates/DateEvents","ta/Core/TA.FireEvent"],function(n,o,e){"use strict";var i,t=2e3,a=function(){require(["trjs!ta/common/behavior/Ads-pagemoniker"],function(n){n.loadMonikers(),o.on("dateSelected",function(o,e){"STAYDATES"==e&&window.setTimeout(n.loadMonikerForEnterDates,2e3)})}),i&&i.shouldInitFlightsEvents&&r(),a=function(){}},r=function(){var n=new Promise(require.bind(null,["trjs!ta/common/behavior/Ads-pagemoniker"]));e.on("lcbPop",function(){n.then(function(n){n.loadMonikerForLCBPop()})}),e.on("packageClick",function(){n.then(function(n){n.loadVacationPackageMetaMonikers()})}),e.on("metaLinkClickPixelLoad",function(o){n.then(function(n){n.loadFlightsMetaMonikers(o)})}),e.on("metaLightboxLoad",function(o){n.then(function(n){n.loadLightboxMonikers(o)})}),e.on("flightSearchPixelLoad",function(){n.then(function(n){n.loadMonikerForFlightSearch()})})};return{init:function(n){i=n,n&&n.pixelsEnabled&&setTimeout(a,t)},remarketingOptions:function(){return i}}});
define("ta/common/behavior/Ads-pagemoniker",["vanillajs","ns-exporter","common/trackingStreams","ta/Core/TA.Store","common/pixels-loader"],function(e,t,r,o,n){var i={};i.remarketingOptions=n.remarketingOptions()||{};var l=function(e){return void 0===i.remarketingOptions.pixelsEnabled&&(i.remarketingOptions=n.remarketingOptions()||{}),i.remarketingOptions[e]},a="dates.enter.moniker.fired",u=!1;return i.loadMonikers=function(e){try{if(!l("pixelsEnabled"))return null;e=e||{},e.pixelType="PAGEVIEW",!l("pixelContext")||"HotelBookingRoomSelectionHtml"!=l("pixelContext").servlet&&"MobileHotelBookingRoomSelection"!=l("pixelContext").servlet||(e.pixelType="IB_CLICK",i._addIBPageViewContext(e)),l("pixelContext")&&"ShoppingCart"==l("pixelContext").servlet&&(e.attractionShoppingCartTotalPriceUSD=ta.retrieve("shoppingCartEstimatedTotalPriceUSD"));var t=i._loadMonikers(e);return l("cacheMobileClickoutResponse")&&(e.pixelType="CLICKOUT",i._cacheClickoutMonikers(e)),t}catch(t){r.error(t,"ads.loadMonikers",null,{context:e})}return null},i.loadMonikerForEnterDates=function(e){try{if(!l("pixelsEnabled"))return null;o.retrieve(a)||(o.store(a,!0),e=e||{},e.pixelType="ENTER_DATES",setTimeout(i._loadMonikers.bind(null,e),2e3))}catch(e){}},i.loadClickoutMonikers=function(e){try{return l("pixelsEnabled")&&l("clickoutPixelsEnabled")?i._cachedClickoutMonikerText?i._appendMonikersIFrameText(i._cachedClickoutMonikerText):(e=e||{},e.pixelType="CLICKOUT",i._loadMonikers(e)):null}catch(t){r.error(t,"ads.loadClickoutMonikers",null,{context:e})}return null},i.loadLightboxMonikers=function(e,t){try{if(!l("pixelsEnabled"))return null;e=e||{},e.pixelType="LIGHTBOX_CLICK";var o=i._mergeContexts(e,t),n=i._loadMonikers(o);return n}catch(t){r.error(t,"ads.loadLightboxMonikers",null,{context:e})}return null},i.loadLightboxClickoutMonikers=function(e){try{return l("pixelsEnabled")&&l("clickoutPixelsEnabled")?(e=e||{},e.pixelType="LIGHTBOX_CLICKOUT",i._loadMonikers(e)):null}catch(t){r.error(t,"ads.loadLightboxClickoutMonikers",null,{context:e})}return null},i.loadIBClickMonikers=function(e){if(u)return null;var t=i._loadMonikersForPixelType(e,"IB_CLICK");return u=!0,t},i.loadIBRoomSelectMonikers=function(e){return i._loadMonikersForPixelType(e,"IB_ROOM_SELECT")},i.loadIBConfirmMonikers=function(e){return i._loadMonikersForPixelType(e,"IB_CONFIRM")},i.loadVRConfirmMonikers=function(e){return i._loadMonikersForPixelType(e,"VR_CONFIRM")},i.loadFlightsMetaMonikers=function(e){return null!=i._loadMonikersForPixelType(e,"FLIGHTS_META")?i._loadMonikersForPixelType(e,"LIGHTBOX_CLICKOUT"):null},i.loadVacationPackageMetaMonikers=function(e){return i._loadMonikersForPixelType(e,"PACKAGE_META")},i.loadMonikerForLCBPop=function(e){return i._loadMonikersForPixelType(e,"LCB_POP")},i.loadMonikerForFlightsMetaLightbox=function(e){return i._loadMonikersForPixelType(e,"LIGHTBOX_CLICK")},i.loadMonikerForFlightSearch=function(e){return i._loadMonikersForPixelType(e,"SEARCH")},i._loadMonikersForPixelType=function(e,t){try{return l("pixelsEnabled")&&l("ibPixelsEnabled")?(e=e||{},e.pixelType=t,i._loadMonikers(e)):null}catch(t){r.error(t,"loadMonikers for pixelType, ",null,{context:e})}return null},i._cacheClickoutMonikers=function(e){var t=l("pixelContext"),r=i._mergeContexts(t,e),o=i._buildPixelUrl(r);if(o){o+="&reportOnly=true";var n=new XMLHttpRequest;n.open("GET",o,!0),n.onreadystatechange=function(){4==this.readyState&&(i._cachedClickoutMonikerText=this.response)},n.send()}},i._addIBPageViewContext=function(e){document.getElementById("roomList")&&(e.lowestPrice=document.getElementById("roomList").dataset.lowestPrice),document.getElementById("roomInfoContainer")&&(e.lowestPrice=document.getElementById("roomInfoContainer").dataset.lowestPrice)},i._buildPixelUrl=function(e){if(!l("pixelServlet"))return r.error(null,"ads._buildPixelUrl: remarketing.pixelServlet not set"),null;var t=l("pixelList");if(!t)return null;var o="/"+l("pixelServlet")+"?pixelList="+t;for(var n in e)e.hasOwnProperty(n)&&(o+="&"+n+"="+e[n]);return ta.uid&&(o+="&puid="+ta.uid),o},i._appendMonikersIFrame=function(e){var t=document.createElement("iframe");return t.setAttribute("id","Monikers"),t.setAttribute("style","border:none; position:absolute; bottom:0; right:0"),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("src",e),document.body.appendChild(t),t},i._appendMonikersIFrameText=function(e){var t=document.createElement("iframe");t.setAttribute("id","Monikers"),t.setAttribute("style","border:none; position:absolute; bottom:0; right:0"),t.setAttribute("width","1"),t.setAttribute("height","1"),document.body.appendChild(t);var r=t.contentDocument||t.contentWindow.document;return r.open().write(e),r.close(),t},i._mergeContexts=function(e,t){if(!e)return t;if(!t)return e;var r,o={};for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);for(r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);return o},i._loadMonikers=function(e){var t,o;try{t=l("pixelContext"),o=i._mergeContexts(t,e);var n=i._buildPixelUrl(o);return n?i._appendMonikersIFrame(n):null}catch(o){r.error(o,"ads._loadMonikers",null,{pixelContext:t,extraContext:e})}return null},t.exportTo(i,"ta.common.ads"),i});
define("mobile/lite/image-loader",["utils/throttle","vanillajs"],function(e){"use strict";function t(t,n){n=n||document,l=t||0;var i=Array.prototype.filter.call(n.querySelectorAll("["+o+"]"),r());if(0!=i.length){var a=e(function(e){i=i.filter(r()),0==i.length&&(window.removeEventListener("scroll",a),window.removeEventListener("resize",a))},200);window.addEventListener("scroll",a),window.addEventListener("resize",a)}}function r(){return function(e){if(!document.body.contains(e))return!1;try{if(!i(e))return!0}catch(e){return!1}var t=e.getAttribute(o);return!t||("IMG"===e.tagName?e.src=t:e.style.backgroundImage="url("+t+")",e.removeAttribute(o),!1)}}function n(e){e=e||document;var t=e.querySelectorAll("["+o+"]");Array.prototype.filter.call(t,r())}function i(e){var t=e.getBoundingClientRect();return t.width>0&&t.height>0&&t.top+l>=0&&t.top-l<=window.innerHeight}var o="data-lazyurl",l=0;return{init:t,demandLoadImages:n}});
define("ta/util/LocalStorage",["vanillajs","ns-exporter","ta/Core/TA.LocalStorage","ta/util/SessionStorage"],function(e,t,o,a){"use strict";var n={canUseLocalStore:function(){return o.enabled},canUseSessionStore:function(){return a.canUseSessionStore()}};return t.exportTo(n,"ta.util.localstorage"),n});
define("post_rollup_globals_shim",["page-model","ns-exporter","common/trackingStreams","ta/registration/RegEvents"],function(e,t,r,n){var o=e.session;n.on("success",function(){e.session.loggedIn=!0});var s={uid:o.uid,userLoggedIn:o.loggedIn,userSecurelyLoggedIn:o.securelyLoggedIn};t.exportTo(s,"ta");try{var i=XMLHttpRequest.prototype,a=i.send;i.send=function(e){try{var t=new RegExp("^(/[^/]|(http(s)?:)?//"+window.location.hostname+")");this._url&&t.test(this._url)&&this.setRequestHeader("X-Puid",o.uid)}catch(e){}a.call(this,e)};var u=i.open;i.open=function(e,t){return this._url=t,u.apply(this,arguments)}}catch(e){r.error(e,"Error intercepting AJAX for tracking")}});
define("ta/Core/TA.PageVisibility",["vanillajs"],function(e){"use strict";function n(){a=!1;for(var e in s)s.hasOwnProperty(e)&&s[e]()}function t(){a=!0;for(var e in f)f.hasOwnProperty(e)&&f[e]()}function d(){var e=document[c]?f:s;for(var n in e)e.hasOwnProperty(n)&&e[n]()}function i(){"undefined"==typeof document[c]?document.addEventListener?(document.addEventListener("focus",n,!1),document.addEventListener("blur",t,!1)):(document.attachEvent("onfocus",n),document.attachEvent("onblur",t)):document.addEventListener(r,d),m=!0}function o(){"undefined"==typeof document[c]?document.removeEventListener?(document.removeEventListener("focus",n,!1),document.removeEventListener("blur",t,!1)):(document.detachEvent("onfocus",n),document.detachEvent("onblur",t)):document.removeEventListener(r,d),a=!1,m=!1}function u(e,n){var t=e.indexOf(n);return t>=0?e.splice(t,1):null}var c,r,f=[],s=[],m=!1,a=!1;return"undefined"!=typeof document.hidden?(c="hidden",r="visibilitychange"):"undefined"!=typeof document.mozHidden?(c="mozHidden",r="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(c="msHidden",r="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(c="webkitHidden",r="webkitvisibilitychange"),{addFocusListener:function(e){s.push(e),m||i()},addBlurListener:function(e){f.push(e),m||i()},removeFocusListener:function(e){e?u(s,e):s.length=0,0===s.length&&0===f.length&&o()},removeBlurListener:function(e){e?u(f,e):f.length=0,0===s.length&&0===f.length&&o()},hidden:function(){return"undefined"!=typeof document.hidden?document.hidden:a}}});
define("utils/bounceRateUtils",["ta/Core/TA.LocalStorage","ta/Core/TA.PageVisibility","common/trackingStreams"],function(e,t,i){function n(i){if(e.canUseSession()){var n=o+i,r=a+i,c=e.hasSessionKey(n);if(t.addFocusListener(function(){s(i)}),c){var u=e.getSessionKey(n);u||setTimeout(function(){s(i)},1e3*i-(Date.now()-e.getSessionKey(r)))}else e.setSessionKey(n,!1),e.setSessionKey(r,Date.now()),setTimeout(function(){s(i)},1e3*i)}}function s(n){if(!t.hidden()){var s=o+n,r=a+n,c=e.getSessionKey(s);if(!c){var u=(Date.now()-e.getSessionKey(r))/1e3;u>=n&&(i.trackEvent("timerecord",n+"s","actualTime : "+u+"s"),e.setSessionKey(s,!0))}}}var o="bounceRate",a="brTimeStamp";return{init:n}});
define("siteops/distil",[],function(){function t(t){var e=document.createElement("script"),n="https://cdn.distiltag.com/api/v1/defense/script/SMXQIXqAfX8m29tJb8E1tB2BHsWt3C6qnvqiQb4K?AYAH_P1="+t;e.type="text/javascript",e.src=n,e.async=!0,document.getElementsByTagName("head")[0].appendChild(e)}return t});
define("servlets/standardTemplateSupport",["page-model","mobile/lite/image-loader","ta/Core/TA.Event","ta/Core/TA.LocalStorage","ta/util/LocalStorage","ta/util/Currency","ta/util/SessionStorage","post_rollup_globals_shim","utils/bounceRateUtils","siteops/distil"],function(s,e,i,t,o,n,a,l,u,r){function d(){i.queueForLoad(function(){e.init(200)},"lazy load images"),s&&s.session&&s.session.sessionId&&t.updateSessionId(s.session.sessionId),u.init(15),u.init(30),s&&s.session&&s.session.distilTag&&r(s.session.ta_uuid)}return{footerInit:d}});
define("google/authutils",["api-mod","lib/jquery-amd","Logging","ta/Core/TA.Store","ta/util/Deferred","ta/util/SessionStorage","ta/util/Error"],function(e,o,t,r,n,i,a){"use strict";var s=6e5,c="googleOneTapTime",u="hideGoogleOneTap",l=new n,g=function(){return l.resolve()},d=function(e){l.promise().success(e)},p=function(e,o,t,r){var i=new n;if(!f())return i.reject();if(r)return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_control","control")}),i.reject();var s=e.hint({supportedAuthMethods:[o],supportedIdTokenProviders:[{uri:o,clientId:t}],context:"signIn"});return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_requested","requested")}),null==s?i.reject():(s.then(function(e){require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_selected","selected")});var o=window.location.pathname;window.location="/RegistrationController?flow=GOOGLE_ONETAP&pid=40185&requireSecure=true&forceDesktop=false&fullscreen=true&google_id_token="+e.idToken+"&returnTo="+o,i.resolve()})["catch"](function(e){switch(e.type){case"userCanceled":return document.cookie=u+"=1;domain="+cookieDomain,void require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_closed","closed")});case"noCredentialsAvailable":return;case"requestFailed":case"operationCanceled":case"illegalConcurrentRequest":case"initializationError":case"configurationError":default:return require(["trjs!ta/Core/TA.Record"],function(e){e.trackEventOnPage("google_onetap","google_onetap_unknown_error","unknown_error")}),void a.record(null,"Unknown error processing Google onetap hint request - type, message: "+e.type+", "+e.message,null,{},"WARN")}}),i.promise())},f=function(){if(i.canUseSessionStore())try{var e=(new Date).getTime(),o=sessionStorage.getItem(c);return null==o?(sessionStorage.setItem(c,e),!0):(o=parseInt(o),e-o<s?(t.info("Skipping Google onetap, tried too recently"),!1):(sessionStorage.setItem(c,e),!0))}catch(e){a.record(null,"Error storing Google onetap attempt: "+e)}return!0};return{init:g,sendHintRequest:p,queueForInit:d}});
