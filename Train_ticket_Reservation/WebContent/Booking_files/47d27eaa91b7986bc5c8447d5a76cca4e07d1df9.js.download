var _i_ = this._i_ || function() {}, _r_ = this._r_ || function(t) {
return t;
};

B.define("caret", function() {
_i_("4ab:1");
var t = function(t) {
_i_("4ab:94");
var e;
if (!t) return _r_();
if (document.selection) return t.focus(), e = document.selection.createRange(), e.moveStart("character", -t.value.length), _r_(e.text.length);
if (t.selectionStart || 0 === t.selectionStart) return _r_(t.selectionStart);
return _r_(0);
}, e = function(t, e) {
_i_("4ab:95");
var i;
if (!t) return _r_();
document.selection ? (t.focus(), i = document.selection.createRange(), i.moveStart("character", -t.value.length), i.moveStart("character", e), i.moveEnd("character", 0), i.select()) :(t.selectionStart || 0 === t.selectionStart) && (t.selectionStart = e, t.selectionEnd = e, t.focus()), _r_();
}, i = function(t, e, i) {
_i_("4ab:96");
var n;
if (!t) return _r_();
document.selection ? (t.focus(), n = document.selection.createRange(), n.moveStart("character", -t.value.length), n.moveStart("character", e), n.moveEnd("character", i - e), n.select()) :(t.selectionStart || 0 === t.selectionStart) && (t.selectionStart = e, t.selectionEnd = i, t.focus()), _r_();
}, n = function(t) {
_i_("4ab:97");
var e;
if (!t) return _r_();
if (document.selection) return t.focus(), e = document.selection.createRange(), _r_(e.text.length || 0);
if (t.selectionStart || 0 === t.selectionStart) return _r_(t.selectionEnd - t.selectionStart);
return _r_(0);
};
return _r_({
getPosition:t,
setPosition:e,
setSelection:i,
getSelectionLength:n
});
}), B.define("click-out", function(t, e, i) {
"use strict";
_i_("4ab:2");
var n = {}, a = !1;
function s() {
_i_("4ab:49"), a || (a = !0, document.documentElement.addEventListener ? document.documentElement.addEventListener("click", o) :document.documentElement.attachEvent && document.documentElement.attachEvent("onclick", o)), _r_();
}
function o(t) {
_i_("4ab:50");
var e, i = Object.keys(n), a = {}, s = !1;
if (i.length) for (e = t.target || t.srcElement; e && (i.forEach(function(t) {
_i_("4ab:507"), n[t].element === e && (a[t] = !0, 1 == i.length && (s = !0)), _r_();
}), !s); ) e = e.parentNode;
i.forEach(function(t) {
_i_("4ab:140"), !a[t] && n[t] && (n[t].callback.call(!1), r(t)), _r_();
}), _r_();
}
function r(t) {
_i_("4ab:51"), n[t] && delete n[t], _r_();
}
function _() {
_i_("4ab:52");
var t = Object.keys(n);
t.forEach(function(t) {
_i_("4ab:141"), n[t].callback.call(!1), r(t), _r_();
}), _r_();
}
e.addMonitor = function(t, e) {
_i_("4ab:98"), s();
var i = Math.random();
return "string" == typeof t.jquery && (t = t[0]), setTimeout(function() {
_i_("4ab:491"), n[i] = {
element:t,
callback:e
}, _r_();
}, 4), _r_(i);
}, e.removeMonitor = r, e.forceClickOut = _, _r_();
}), B.define("deny-focus", function(t, e, i) {
"use strict";
return _i_("4ab:3"), _r_({
_focusAttributes:{
tabindex:-1,
"aria-hidden":!0
},
_denyFocusOn:[],
_get:function(t) {
return _i_("4ab:127"), _r_(this._denyFocusOn.filter(function(e) {
if (_i_("4ab:508"), e.el === t) return _r_(!0);
return _r_(!1);
})[0]);
},
_add:function(t) {
_i_("4ab:128");
var e = this._getFocusableElements(t), i = {
el:t,
focusable:e,
focusableOriginalAttributes:this._buildAttributesObject(e)
};
return this._denyFocusOn.push(i), _r_(i);
},
_update:function(t) {
_i_("4ab:129");
var e = this._getFocusableElements(t.el);
t.focusable = e, t.focusableOriginalAttributes = this._buildAttributesObject(e), _r_();
},
_buildAttributesObject:function(t) {
return _i_("4ab:130"), _r_(t.map(function(t) {
_i_("4ab:535");
var e = {};
return Object.keys(this._focusAttributes).forEach(function(i) {
_i_("4ab:603"), e[i] = t.getAttribute(i), _r_();
}), _r_(e);
}.bind(this)));
},
_getFocusableElements:function(t) {
_i_("4ab:131");
var e = t.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]");
return _r_(Array.prototype.slice.call(e));
},
deny:function(t) {
if (_i_("4ab:132"), !t || !t instanceof Node) return console.log("Please provide a valid DOMElement to deny focus for"), _r_(!1);
var e = this._get(t);
e ? this._update(e) :e = this._add(t), e.focusable.forEach(function(t) {
_i_("4ab:536"), Object.keys(this._focusAttributes).forEach(function(e) {
_i_("4ab:624"), t.setAttribute(e, this._focusAttributes[e]), _r_();
}.bind(this)), _r_();
}.bind(this)), _r_();
},
allow:function(t) {
if (_i_("4ab:133"), !t || !t instanceof Node) return console.log("Please provide a valid DOMElement to deny focus for"), _r_(!1);
var e = this._get(t);
return e ? (e.focusable.forEach(function(t, i) {
_i_("4ab:537");
var n = e.focusableOriginalAttributes[i];
Object.keys(n).forEach(function(e) {
_i_("4ab:604");
var i = n[e], a = null === i || void 0 === i;
a ? t.removeAttribute(e) :t.setAttribute(e, n[e]), _r_();
}), _r_();
}), _r_(!0)) :_r_(!1);
}
});
}), B.define("keycodes", [], function() {
"use strict";
_i_("4ab:4");
var t = {
backspace:8,
tab:9,
enter:13,
shift:16,
control:17,
alt:18,
escape:27,
space:32,
pageUp:33,
pageDown:34,
end:35,
home:36,
leftArrow:37,
upArrow:38,
rightArrow:39,
downArrow:40,
"delete":46,
navigation:[ 9 ].concat(i(33, 40)),
deletion:[ 8, 46 ],
arrow:i(37, 40),
number:i(48, 57).concat(i(96, 105)),
alphabetic:i(65, 90),
modifier:i(16, 18)
};
t = n(t);
function e(t) {
return _i_("4ab:53"), _r_(t.slice(0, 1).toUpperCase() + t.slice(1));
}
function i(t, e) {
_i_("4ab:54");
for (var i = [], n = 0; e - t >= n; n++) i.push(t + n);
return _r_(i);
}
function n(t) {
_i_("4ab:55");
var e = 65;
return _r_("abcdefghijklmnopqrstuvwxyz".split("").reduce(function(t, i) {
return _i_("4ab:142"), t[i] = e++, _r_(t);
}, t));
}
function a(e, i) {
if (_i_("4ab:56"), Array.isArray(t[e]) && -1 !== t[e].indexOf(i)) return _r_(!0);
if (t[e] === i) return _r_(!0);
return _r_(!1);
}
function s(t, e) {
return _i_("4ab:57"), _r_(a(e, t));
}
function o(e) {
_i_("4ab:58");
var i = [];
return Object.keys(t).forEach(function(t) {
_i_("4ab:143"), a(t, e) && i.push(t), _r_();
}), _r_(i);
}
var r = {
getTypes:o,
isKeycodeType:s
};
return Object.keys(t).forEach(function(t) {
_i_("4ab:99"), r["is" + e(t)] = function(e) {
return _i_("4ab:492"), _r_(s(e, t));
}, _r_();
}), _r_(r);
}), B.define("read-data-options", function(t, e, i) {
_i_("4ab:5"), i.exports = function(t, e) {
_i_("4ab:100");
var i = {};
return t.jquery && (t = t[0]), Object.keys(e).forEach(function(n) {
_i_("4ab:493");
var a = e[n], s = "data-" + n, o = null;
if ("function" == typeof a && (a = {
type:a
}), "string" == typeof a.name && (s = "data-" + a.name), !t.attributes[s]) {
if (a.hasOwnProperty("defaultValue")) i[n] = a.defaultValue; else if (a.hasOwnProperty("required")) throw new Error("read-data-options: missing required " + s + " attribute");
return _r_();
}
var o = t.getAttribute(s);
if (a.type === Boolean) o = !/^0|false|no|off$/.test(o); else if (a.type === String) o = o || a.defaultValue; else {
if (a.type !== Number) throw new Error("data-options: Invalid option type for " + n);
o = parseFloat(o, 10), isNaN(o) && (o = a.defaultValue);
}
i[n] = o, _r_();
}), _r_(i);
}, _r_();
}), B.define("calendar-base", function(t, e, i) {
_i_("4ab:6");
function n(t) {
_i_("4ab:59"), t = t || {}, this.startDate = t.startDate, this.endDate = t.endDate, this.siblingMonths = t.siblingMonths, this.weekNumbers = t.weekNumbers, this.weekStart = t.weekStart, void 0 === this.weekStart && (this.weekStart = 0), _r_();
}
n.prototype.getCalendar = function(t, e) {
_i_("4ab:101");
var i = new Date(Date.UTC(t, e, 1, 0, 0, 0, 0));
t = i.getUTCFullYear(), e = i.getUTCMonth();
for (var a, s, o, r, _, l = [], h = i.getUTCDay(), d = -((7 - this.weekStart + h) % 7), u = n.daysInMonth(t, e), c = (u - d) % 7, p = n.daysInMonth(t, e - 1), f = d, b = u - f + (0 != c ? 7 - c :0) + d, g = null; b > f; ) s = f + 1, a = ((1 > f ? 7 + f :f) + h) % 7, 1 > s || s > u ? this.siblingMonths ? (1 > s ? (r = e - 1, _ = t, 0 > r && (r = 11, _--), s = p + s) :s > u && (r = e + 1, _ = t, r > 11 && (r = 0, _++), s = f - u + 1), o = {
day:s,
weekDay:a,
month:r,
year:_,
siblingMonth:!0
}) :o = !1 :o = {
day:s,
weekDay:a,
month:e,
year:t
}, o && this.weekNumbers && (null === g ? g = n.calculateWeekNumber(o) :1 == a && 52 == g ? g = 1 :1 == a && g++, o.weekNumber = g), o && this.startDate && (o.selected = this.isDateSelected(o)), l.push(o), f++;
return _r_(l);
}, n.prototype.isDateSelected = function(t) {
if (_i_("4ab:102"), t.year == this.startDate.year && t.month == this.startDate.month && t.day == this.startDate.day) return _r_(!0);
if (this.endDate) {
if (t.year == this.startDate.year && t.month == this.startDate.month && t.day < this.startDate.day) return _r_(!1);
if (t.year == this.endDate.year && t.month == this.endDate.month && t.day > this.endDate.day) return _r_(!1);
if (t.year == this.startDate.year && t.month < this.startDate.month) return _r_(!1);
if (t.year == this.endDate.year && t.month > this.endDate.month) return _r_(!1);
if (t.year < this.startDate.year) return _r_(!1);
if (t.year > this.endDate.year) return _r_(!1);
return _r_(!0);
}
return _r_(!1);
}, n.prototype.setStartDate = function(t) {
_i_("4ab:103"), this.startDate = t, _r_();
}, n.prototype.setEndDate = function(t) {
_i_("4ab:104"), this.endDate = t, _r_();
}, n.prototype.setDate = n.prototype.setStartDate, n.diff = function(t, e) {
return _i_("4ab:105"), t = new Date(Date.UTC(t.year, t.month, t.day, 0, 0, 0, 0)), e = new Date(Date.UTC(e.year, e.month, e.day, 0, 0, 0, 0)), _r_(Math.ceil((t.getTime() - e.getTime()) / 864e5));
}, n.interval = function(t, e) {
return _i_("4ab:106"), _r_(Math.abs(n.diff(t, e)) + 1);
}, n.compare = function(t, e) {
if (_i_("4ab:107"), "object" != typeof t || "object" != typeof e || null === t || null === e) throw new TypeError("dates must be objects");
if (t.year < e.year) return _r_(-1);
if (t.year > e.year) return _r_(1);
if (t.month < e.month) return _r_(-1);
if (t.month > e.month) return _r_(1);
if (t.day < e.day) return _r_(-1);
if (t.day > e.day) return _r_(1);
return _r_(0);
}, n.daysInMonth = function(t, e) {
return _i_("4ab:108"), _r_(new Date(t, e + 1, 0).getDate());
}, n.isLeapYear = function(t) {
return _i_("4ab:109"), _r_(t % 4 == 0 && t % 100 != 0 || t % 400 == 0);
}, n.calculateWeekNumber = function(t) {
_i_("4ab:110");
var e = new Date(Date.UTC(t.year, t.month, t.day, 0, 0, 0, 0)), i = new Date(e.valueOf()), n = (e.getUTCDay() + 6) % 7;
i.setUTCDate(i.getUTCDate() - n + 3);
var a = i.valueOf();
return i.setUTCMonth(0, 1), 4 != i.getUTCDay() && i.setUTCMonth(0, 1 + (4 - i.getUTCDay() + 7) % 7), _r_(1 + Math.ceil((a - i) / 6048e5));
}, i.exports = {
Calendar:n
}, _r_();
}), B.define("morphdom", function(t, e, i) {
_i_("4ab:7"), function(t) {
if (_i_("4ab:112"), "object" == typeof e && "undefined" != typeof i) i.exports = t(); else if ("function" == typeof define && define.amd) define([], t); else {
var n;
n = "undefined" != typeof window ? window :"undefined" != typeof global ? global :"undefined" != typeof self ? self :this, n.morphdom = t();
}
_r_();
}(function() {
_i_("4ab:111");
var t, e;
t = {
exports:e = {}
};
var i, n, a = "undefined" != typeof document ? document.body || document.createElement("div") :{}, s = "http://www.w3.org/1999/xhtml", o = 1, r = 3, _ = 8;
n = a.hasAttributeNS ? function(t, e, i) {
return _i_("4ab:509"), _r_(t.hasAttributeNS(e, i));
} :a.hasAttribute ? function(t, e, i) {
return _i_("4ab:538"), _r_(t.hasAttribute(i));
} :function(t, e, i) {
return _i_("4ab:539"), _r_(!!t.getAttributeNode(i));
};
function l(t) {
_i_("4ab:144");
for (var e in t) if (t.hasOwnProperty(e)) return _r_(!1);
return _r_(!0);
}
function h(t) {
_i_("4ab:145"), !i && document.createRange && (i = document.createRange(), i.selectNode(document.body));
var e;
return i && i.createContextualFragment ? e = i.createContextualFragment(t) :(e = document.createElement("body"), e.innerHTML = t), _r_(e.childNodes[0]);
}
var d = {
OPTION:function(t, e) {
_i_("4ab:510"), t.selected = e.selected, t.selected ? t.setAttribute("selected", "") :t.removeAttribute("selected", ""), _r_();
},
INPUT:function(t, e) {
_i_("4ab:511"), t.checked = e.checked, t.checked ? t.setAttribute("checked", "") :t.removeAttribute("checked"), t.value !== e.value && (t.value = e.value), n(e, null, "value") || t.removeAttribute("value"), t.disabled = e.disabled, t.disabled ? t.setAttribute("disabled", "") :t.removeAttribute("disabled"), _r_();
},
TEXTAREA:function(t, e) {
_i_("4ab:512");
var i = e.value;
t.value !== i && (t.value = i), t.firstChild && t.firstChild.nodeValue !== i && (t.firstChild.nodeValue = i), _r_();
}
};
function u() {}
var c = function(t, e) {
return _i_("4ab:494"), _r_(t.nodeName === e.nodeName && t.namespaceURI === e.namespaceURI);
};
function p(t, e) {
return _i_("4ab:147"), _r_(e && e !== s ? document.createElementNS(e, t) :document.createElement(t));
}
function f(t, e) {
_i_("4ab:148");
var i, a, s, o, r, _, l = e.attributes;
for (i = l.length - 1; i >= 0; i--) a = l[i], s = a.name, r = a.value, o = a.namespaceURI, o ? (s = a.localName || s, _ = t.getAttributeNS(o, s)) :_ = t.getAttribute(s), _ !== r && (o ? t.setAttributeNS(o, s, r) :t.setAttribute(s, r));
for (l = t.attributes, i = l.length - 1; i >= 0; i--) a = l[i], a.specified !== !1 && (s = a.name, o = a.namespaceURI, n(e, o, o ? s = a.localName || s :s) || t.removeAttributeNode(a));
_r_();
}
function b(t, e) {
_i_("4ab:149");
for (var i = t.firstChild; i; ) {
var n = i.nextSibling;
e.appendChild(i), i = n;
}
return _r_(e);
}
function g(t) {
return _i_("4ab:150"), _r_(t.id);
}
function m(t, e, i) {
if (_i_("4ab:151"), i || (i = {}), "string" == typeof e) if ("#document" === t.nodeName || "HTML" === t.nodeName) {
var n = e;
e = document.createElement("html"), e.innerHTML = n;
} else e = h(e);
var a = {}, s = {}, m = i.getNodeKey || g, v = i.onBeforeNodeAdded || u, M = i.onNodeAdded || u, y = i.onBeforeElUpdated || i.onBeforeMorphEl || u, B = i.onElUpdated || u, k = i.onBeforeNodeDiscarded || u, w = i.onNodeDiscarded || u, C = i.onBeforeElChildrenUpdated || i.onBeforeMorphElChildren || u, x = i.childrenOnly === !0, D = [];
function $(t, e) {
_i_("4ab:495");
var i = m(t);
if (i ? a[i] = t :e || w(t), t.nodeType === o) for (var n = t.firstChild; n; ) $(n, e || i), n = n.nextSibling;
_r_();
}
function E(t) {
if (_i_("4ab:496"), t.nodeType === o) for (var e = t.firstChild; e; ) m(e) || (w(e), E(e)), e = e.nextSibling;
_r_();
}
function S(t, e, i) {
if (_i_("4ab:497"), k(t) === !1) return _r_();
e.removeChild(t), i ? m(t) || (w(t), E(t)) :$(t), _r_();
}
function N(t, e, i, n) {
_i_("4ab:498");
var l = m(e);
if (l && delete a[l], !n) {
if (y(t, e) === !1) return _r_();
if (f(t, e), B(t), C(t, e) === !1) return _r_();
}
if ("TEXTAREA" !== t.nodeName) {
var h, u, p, b, g, k = e.firstChild, w = t.firstChild;
t:for (;k; ) {
for (p = k.nextSibling, h = m(k); w; ) {
var x = m(w);
if (u = w.nextSibling, !i && x && (g = s[x])) {
g.parentNode.replaceChild(w, g), N(w, g, i), w = u;
continue;
}
var $ = w.nodeType;
if ($ === k.nodeType) {
var E = !1;
if ($ === o ? (c(w, k) && (x || h ? h === x && (E = !0) :E = !0), E && N(w, k, i)) :($ === r || $ == _) && (E = !0, w.nodeValue = k.nodeValue), E) {
k = p, w = u;
continue t;
}
}
S(w, t, i), w = u;
}
h && ((b = a[h]) ? (N(b, k, !0), k = b) :s[h] = k), v(k) !== !1 && (t.appendChild(k), M(k)), k.nodeType === o && (h || k.firstChild) && D.push(k), k = p, w = u;
}
for (;w; ) u = w.nextSibling, S(w, t, i), w = u;
}
var T = d[t.nodeName];
T && T(t, e), _r_();
}
var T = t, F = T.nodeType, j = e.nodeType;
if (!x) if (F === o) j === o ? c(t, e) || (w(t), T = b(t, p(e.nodeName, e.namespaceURI))) :T = e; else if (F === r || F === _) {
if (j === F) return T.nodeValue = e.nodeValue, _r_(T);
T = e;
}
if (T === e) w(t); else {
N(T, e, !1, x);
var A = function(t) {
_i_("4ab:556");
for (var e = t.firstChild; e; ) {
var i = e.nextSibling, n = m(e);
if (n) {
var s = a[n];
if (s && c(e, s)) {
if (e.parentNode.replaceChild(s, e), N(s, e, !0), e = i, l(a)) return _r_(!1);
continue;
}
}
e.nodeType === o && A(e), e = i;
}
_r_();
};
if (!l(a)) t:for (;D.length; ) {
var I = D;
D = [];
for (var O = 0; O < I.length; O++) if (A(I[O]) === !1) break t;
}
for (var J in a) if (a.hasOwnProperty(J)) {
var L = a[J];
w(L), E(L);
}
}
return !x && T !== t && t.parentNode && t.parentNode.replaceChild(T, t), _r_(T);
}
return t.exports = m, _r_(t.exports);
}), _r_();
}), booking.browserStorageHandler = function(t, e, i, n) {
_i_("4ab:45");
var a = !1;
try {
a = t.localStorage && t.sessionStorage ? !0 :!1, a && t.localStorage.setItem("btest", "1");
} catch (s) {
a = !1;
}
var o = {
_readCookie:function(t) {
_i_("4ab:257");
var e = {};
try {
"undefined" != typeof JSON && (e = JSON.parse(n.cookie(t)) || {});
} catch (i) {}
return _r_(e);
},
_modifySingleValue:function(e, s, o, r, _) {
if (_i_("4ab:258"), !s || !o) return _r_(!1);
if (a && !_) {
var l = "session" === e ? t.sessionStorage :t.localStorage;
if ("delete" === s) l.removeItem(o); else try {
l.setItem(o, r);
} catch (h) {}
} else {
var d, u, c, p;
"session" === e ? d = "bs" :(d = "b", p = 30), u = this._readCookie(d), "delete" === s ? delete u[o] :u[o] = r, c = n.isEmptyObject(u) ? null :JSON.stringify(u), n.cookie(d, c, {
expires:p,
path:"/",
domain:i.b_domain_end
});
}
_r_();
},
_getValue:function(e, i, n) {
if (_i_("4ab:259"), !i) return _r_(void 0);
if (a && !n) {
var s = "session" === e ? t.sessionStorage :t.localStorage;
return _r_(s.getItem(i));
}
var o, r;
return o = "session" === e ? "bs" :"b", r = this._readCookie(o), _r_(r[i]);
}
};
return _r_({
addSessionValue:function(t, e, i) {
return _i_("4ab:152"), _r_(o._modifySingleValue("session", "add", t, e, i));
},
deleteSessionValue:function(t, e) {
return _i_("4ab:153"), _r_(o._modifySingleValue("session", "delete", t, void 0, e));
},
getSessionValue:function(t, e) {
return _i_("4ab:154"), _r_(o._getValue("session", t, e));
},
addPermanentValue:function(t, e, i) {
return _i_("4ab:155"), _r_(o._modifySingleValue("permanent", "add", t, e, i));
},
deletePermanentValue:function(t, e) {
return _i_("4ab:156"), _r_(o._modifySingleValue("permanent", "delete", t, void 0, e));
},
getPermanentValue:function(t, e) {
return _i_("4ab:157"), _r_(o._getValue("permanent", t, e));
},
isLocalStorageSupported:function() {
return _i_("4ab:158"), _r_(a);
}
});
}(window, document, booking.env, window.jQuery), booking.define && booking.define("browser-storage-handler", booking.browserStorageHandler), B.define("search/modules/flags", function(t, e, i) {
_i_("4ab:8");
function n(t) {
_i_("4ab:60");
var e = {};
if ("string" != typeof t) throw new TypeError("First argument must be a string");
if (t = t.trim(), "" === t) return _r_(e);
return t.split(/\s+/).forEach(function(t) {
_i_("4ab:159");
var i = t, n = !0, s = t.indexOf(":");
-1 !== s && (i = t.substr(0, s), n = t.substr(s + 1), n || (n = 0), a(n) && (n = parseInt(n, 10))), e[i] = n, _r_();
}), _r_(e);
}
function a(t) {
return _i_("4ab:61"), _r_(!isNaN(parseFloat(t)) && isFinite(t));
}
i.exports = {
parse:n
}, _r_();
}), B.define("search/modules/search-date", function(t, e, i) {
_i_("4ab:9");
var n = t("calendar-base").Calendar;
function a(t) {
_i_("4ab:62"), this.year = null, this.month = null, this.day = null, this.complete = !1, "number" == typeof t.year && (this.year = t.year), "number" == typeof t.month && (this.month = t.month), "number" == typeof t.day && (this.day = t.day), null !== this.month && (this.month < 0 ? this.month = 0 :this.month > 11 && (this.month = 11)), null !== this.day && (this.day < 0 ? this.day = 0 :this.day > s(this.year, this.month) && (this.day = s(this.year, this.month))), this.complete = null !== this.year && null !== this.month && null !== this.day, _r_();
}
a.prototype = {
toString:function() {
if (_i_("4ab:160"), !this.complete) return _r_("");
var t = this.month + 1;
return _r_(this.year + "-" + (10 > t ? "0" :"") + t + "-" + (this.day < 10 ? "0" :"") + this.day);
},
toNative:function() {
if (_i_("4ab:161"), !this.complete) return _r_(new Date(NaN));
return _r_(new Date(Date.UTC(this.year, this.month, this.day, 0, 0, 0, 0)));
},
valueOf:function() {
return _i_("4ab:162"), _r_(this.toNative().valueOf());
}
}, a.create = function(t) {
_i_("4ab:113");
var e;
if ("string" == typeof t && (e = t.split("-"), 3 == e.length && (t = {
year:parseInt(e[0], 10),
month:parseInt(e[1], 10) - 1,
day:parseInt(e[2], 10)
})), "object" != typeof t || null === t) throw new TypeError("date must be an object");
return _r_(new a(t));
}, a.createFromString = function(t) {
if (_i_("4ab:114"), "string" != typeof t) throw new TypeError("dateString must be a string");
var e = t.split(/-/g), i = {
year:parseInt(e[0], 10),
month:parseInt(e[1], 10) - 1,
day:parseInt(e[2], 10)
};
return _r_(a.create(i));
}, a.createFlexible = function(t) {
if (_i_("4ab:115"), "object" != typeof t || null === t) throw new TypeError("date must be an object");
if ("number" != typeof t.year || "number" != typeof t.month || "number" != typeof t.day) throw new TypeError("invalid date");
var e = new Date(Date.UTC(t.year, t.month, t.day, 0, 0, 0, 0));
return t = {
year:e.getUTCFullYear(),
month:e.getUTCMonth(),
day:e.getUTCDate()
}, _r_(a.create(t));
}, a.isStrictlyValid = function(t) {
_i_("4ab:116");
var e = a.create(t);
return _r_(t.year === e.year && t.month === e.month && t.day === e.day);
}, a.compare = function(t, e) {
if (_i_("4ab:117"), !(t instanceof a && e instanceof a)) throw new TypeError("dates must be an instance of SearchDate");
if (t.year < e.year) return _r_(-1);
if (t.year > e.year) return _r_(1);
if (t.month < e.month) return _r_(-1);
if (t.month > e.month) return _r_(1);
if (t.day < e.day) return _r_(-1);
if (t.day > e.day) return _r_(1);
return _r_(0);
};
function s(t, e) {
return _i_("4ab:63"), _r_("number" == typeof t && "number" == typeof e ? n.daysInMonth(t, e) :3 == e || 5 == e || 8 == e || 10 == e ? 30 :1 == e ? 29 :31);
}
i.exports = {
SearchDate:a
}, _r_();
}), B.define("component/autocomplete-core", function(t, e, i) {
_i_("4ab:10");
var n = t("jquery"), a = t("component"), s = t("read-data-options");
i.exports = a.extend({
init:function() {
_i_("4ab:260"), this.highlightedIndex = -1, this.isDeletion = !1, this.items = [], this.keyDownCount = 0, this.keysDown = {}, this.listHeight = 0, this.listVisible = !1, this.preventBlurClose = !1, this.selectedIndex = -1, this.selectedValue = null, this.valueBuffer = null, this.clickOutController = t("click-out"), this.clickOutMonitorId = null, this.$input = this.$el.find('[data-input=""]'), this.input = this.$input[0], this.$list = this.$el.find('[data-list=""]'), this.$items = this.$list.children(), this.optionsSpec = this.optionsSpec || {}, this.optionsSpec = n.extend(this.optionsSpec, {
openFocus:{
name:"open-focus",
type:Boolean
},
highlightFirst:{
name:"highlight-first",
type:Boolean
},
forceHighlight:{
name:"highlight-force",
type:Boolean
},
focusOnItemSelect:{
name:"focus-on-item-select",
type:Boolean
}
}), this.options = s(this.$el, this.optionsSpec), this.supportsInputEvent = this.input && "oninput" in this.input, this.addInputEventListeners(), this.addListEventListeners(), this.addItemsEventListeners(), this.calculateListHeight(), this.$input.attr("autocomplete", "off"), _r_();
},
addInputEventListeners:function() {
_i_("4ab:261");
var t = this.$input.component("keyboard");
t.on("keydown:Escape", this.inputEscape.bind(this)), t.on("keydown:ArrowUp", this.inputArrowUp.bind(this)), t.on("keydown:ArrowDown", this.inputArrowDown.bind(this)), t.on("keydown:Enter", this.inputEnter.bind(this)), t.on("keydown:Tab", this.inputTab.bind(this)), this.$input.on("click", this.inputClick.bind(this)), this.$input.focus(this.inputFocus.bind(this)), this.$input.blur(this.inputBlur.bind(this)), this.$input.keydown(this.inputKeyDown.bind(this)), this.$input.bind("input", this.inputInput.bind(this)), this.$input.keyup(this.inputKeyUp.bind(this)), _r_();
},
addListEventListeners:function() {
_i_("4ab:262"), this.$list.mousedown(this.listMouseDown.bind(this)), this.$list.mouseup(this.listMouseUp.bind(this)), this.$list.on("click", '[data-list-item=""]', this.listItemClick.bind(this)), _r_();
},
addItemsEventListeners:function() {
_i_("4ab:263"), this.$items.click(this.listItemClick.bind(this)), _r_();
},
addClickOutEventListener:function() {
_i_("4ab:264"), this.clickOutMonitorId = this.clickOutController.addMonitor(this.el, this.clickOut.bind(this)), _r_();
},
removeClickOutEventListener:function() {
_i_("4ab:265"), this.clickOutController.removeMonitor(this.clickOutMonitorId), _r_();
},
calculateListHeight:function() {
_i_("4ab:266"), this.listHeight = this.$list.outerHeight(), _r_();
},
inputClick:function(t) {},
inputFocus:function(t) {
_i_("4ab:268"), this.options.openFocus && (this.listShow(), this.autocomplete({
fromFocus:!0
})), _r_();
},
inputBlur:function(t) {
_i_("4ab:269"), setTimeout(this.inputBlurSync.bind(this), 4), _r_();
},
inputBlurSync:function() {
_i_("4ab:270"), !this.preventBlurClose && this.listVisible && (this.highlightReset(), this.reset()), _r_();
},
inputKeyDown:function(t) {
_i_("4ab:271");
var e = t.ctrlKey || t.metaKey || t.shiftKey || t.altKey, i = 8 == t.which || 46 == t.which;
this.isDeletion = i, this.taintedKeyDown = e, _r_();
},
inputInput:function(t) {
_i_("4ab:272"), this.autocomplete(), _r_();
},
inputKeyUp:function(t) {
_i_("4ab:273");
var e = this.taintedKeyDown || t.ctrlKey || t.metaKey || t.shiftKey || t.altKey || t.which >= 16 && t.which <= 18 || 91 == t.which, i = 32 == t.which || t.which >= 48, n = t.which >= 37 && t.which <= 40;
e || ((n || i) && this.listShow(), !this.isDeletion && !i || this.supportsInputEvent || this.autocomplete(), i && this.keyDownCount++), _r_();
},
inputEscape:function(t) {
_i_("4ab:274"), this.listVisible && (t.originalEvent.preventDefault(), this.highlightReset(), this.reset()), _r_();
},
inputArrowUp:function(t) {
_i_("4ab:275"), t.originalEvent.preventDefault(), this.listVisible ? this.highlightPrevious() :this.listShow(), _r_();
},
inputArrowDown:function(t) {
_i_("4ab:276"), t.originalEvent.preventDefault(), this.listVisible ? this.highlightNext() :this.listShow(), _r_();
},
inputEnter:function(t) {
_i_("4ab:277"), this.listVisible && -1 != this.highlightedIndex && (t.originalEvent.preventDefault(), this.choose(this.highlightedIndex)), _r_();
},
inputTab:function(t) {
_i_("4ab:278"), this.inputEnter.apply(this, arguments), _r_();
},
listItemClick:function(t) {
_i_("4ab:279");
var e = n(t.currentTarget);
this.options.focusOnItemSelect && this.input.focus(), this.choose(e.data("i")), _r_();
},
listMouseDown:function(t) {
_i_("4ab:280"), this.preventBlurClose = !0, _r_();
},
listMouseUp:function(t) {
_i_("4ab:281"), this.preventBlurClose = !1, _r_();
},
clickOut:function() {
_i_("4ab:282"), this.listVisible && (this.highlightReset(), this.reset()), _r_();
},
setValue:function(t) {
_i_("4ab:283"), this.input.value = t, _r_();
},
listShow:function() {
_i_("4ab:284"), this.listVisible || this._loading || (this.$list.addClass("-visible"), this.listVisible = !0, this.addClickOutEventListener(), this.$list[0].scrollTop = 1, setTimeout(function() {
_i_("4ab:605"), this.$list[0].scrollTop = 0, _r_();
}.bind(this), 10)), _r_();
},
listHide:function() {
_i_("4ab:285"), this.listVisible && (this.$list.removeClass("-visible"), this.resetFlags(), this.removeClickOutEventListener()), _r_();
},
highlightPrevious:function() {
_i_("4ab:286");
var t = this.highlightedIndex;
do -1 == t ? t = this.items.length - 1 :t--; while (-1 != t && this.items[t].hidden);
this.highlightFromNavigation(t), _r_();
},
highlightNext:function() {
_i_("4ab:287");
var t = this.highlightedIndex;
do t == this.items.length - 1 ? t = -1 :t++; while (-1 != t && this.items[t].hidden);
this.highlightFromNavigation(t), _r_();
},
highlightFromNavigation:function(t, e, i) {
if (_i_("4ab:288"), (-1 == this.highlightedIndex || e) && (this.valueBuffer = this.input.value), -1 == t) this.highlightReset({
preserveFocus:!0
}); else if (this.supportsInputEvent) if (this.valueBuffer && 0 == this.items[t].valueLowerCase.indexOf(this.valueBuffer.toLowerCase())) {
var n = this.valueBuffer.length, a = this.items[t].value.length, s = this.valueBuffer + this.items[t].value.substring(n);
if (this.input.value == s || i || this.setValue(s), this.input.setSelectionRange) this.input.setSelectionRange(a, a); else if (this.input.createTextRange) {
var o = this.input.createTextRange();
o.collapse(!0), o.moveStart("character", n), o.moveEnd("character", a), o.select();
} else void 0 !== this.input.selectionStart && (this.input.selectionStart = n, this.input.selectionEnd = a);
} else i || (this.setValue(this.items[t].value), this.fixIEFocusLoss());
this.highlight(t), _r_();
},
highlightFromAutocomplete:function() {
_i_("4ab:289");
var t = this.input.value, e = this.getListFirstIndex();
-1 !== e && this.options.highlightFirst && !this.isDeletion && t && 0 === this.items[e].valueLowerCase.indexOf(t.toLowerCase()) || this.options.forceHighlight ? this.highlightFromNavigation(e, !0) :this.highlight(-1), _r_();
},
highlight:function(t) {
_i_("4ab:290"), this.listShow(), -1 != this.highlightedIndex && this.$items.eq(this.highlightedIndex).removeClass("-highlighted"), -1 != t && this.$items.eq(t).addClass("-highlighted"), this.highlightedIndex = t, this.highlightScroll(), _r_();
},
highlightReset:function(t) {
_i_("4ab:291"), t = t || {}, null === this.valueBuffer || t.preserveInputValue || (this.setValue(this.valueBuffer), t.preserveFocus && this.fixIEFocusLoss()), -1 != this.highlightedIndex && this.$items.eq(this.highlightedIndex).removeClass("-highlighted"), this.highlightedIndex = -1, _r_();
},
highlightScroll:function() {
_i_("4ab:292");
var t = !1, e = this.$list[0].scrollTop;
if (-1 != this.highlightedIndex) {
var i = this.$items.eq(this.highlightedIndex), n = (1 == i.length && i.position().top) + e, a = i.outerHeight();
n + a > this.listHeight + e ? t = n + a - this.listHeight :e > n && (t = n);
} else t = 0;
t !== !1 && t != e && (this.$list[0].scrollTop = t), _r_();
},
getListLength:function() {
return _i_("4ab:293"), _r_(this.items.length);
},
getListFirstIndex:function() {
return _i_("4ab:294"), _r_(0 === this.items.length ? -1 :0);
},
autocomplete:function() {
_i_("4ab:295"), this.postAutocomplete(), _r_();
},
postAutocomplete:function() {
_i_("4ab:296"), this.listShow(), this.calculateListHeight(), this.highlightFromAutocomplete(), _r_();
},
choose:function(t) {
_i_("4ab:297"), this.selectedIndex = t, this.selectedValue = this.items[t].value, this.setValue(this.selectedValue), this.reset(), _r_();
},
reset:function(t) {
_i_("4ab:298"), t = t || {}, -1 != this.highlightedIndex && this.$items.eq(this.highlightedIndex).removeClass("-highlighted"), this.listHide(), t.hard && (this.resetFlags(), this.selectedIndex = -1, this.selectedValue = null, this.setValue("")), _r_();
},
resetFlags:function() {
_i_("4ab:299"), this.highlightedIndex = -1, this.isDeletion = !1, this.keyDownCount = 0, this.keysDown = {}, this.listVisible = !1, this.preventBlurClose = !1, this.valueBuffer = null, _r_();
},
fixIEFocusLoss:function() {
if (_i_("4ab:300"), this.input.createTextRange) {
var t = this.input.createTextRange();
t.moveStart("character", this.input.value.length), t.collapse(), t.select();
}
_r_();
}
}), _r_();
}), B.define("component/core/input-placeholder", function(t, e, i) {
"use strict";
_i_("4ab:11");
var n = t("component"), a = t("read-data-options");
return _r_(n.extend({
init:function() {
if (_i_("4ab:163"), this.browserSupported()) return _r_();
this.options = a(this.$el, {
placeholderClass:{
name:"placeholder-class",
type:String
},
placeholderColor:{
name:"placeholder-color",
type:String,
defaultValue:"#7C90A6"
}
});
var t = "input, textarea", e = this.$el.find(t);
this.$el.is(t) && (e = e.add(this.$el)), e.filter(function(t, e) {
return _i_("4ab:558"), _r_(!!$(e).attr("placeholder"));
}).each(function(t, e) {
_i_("4ab:557"), this.setupPlaceholder($(e)), _r_();
}.bind(this)), _r_();
},
browserSupported:function() {
_i_("4ab:164");
var t = $('input[type="text"]')[0] || $('<input type="text">')[0];
return _r_(!!("placeholder" in t));
},
setupPlaceholder:function(t) {
_i_("4ab:165");
var e = $("<label />").text(t.attr("placeholder")).css({
width:t.width() + "px",
height:t.height() + "px",
paddingTop:t.css("padding-top"),
paddingLeft:t.css("padding-left"),
paddingRight:t.css("padding-right"),
fontFamily:t.css("font-family"),
fontSize:t.css("font-size"),
color:this.options.placeholderColor,
overflow:"hidden",
cursor:"text",
position:"absolute"
});
this.options.placeholderClass && e.addClass(this.options.placeholderClass), e.insertBefore(t), e.click(function() {
_i_("4ab:513"), t.focus(), _r_();
}), t.focus(function() {
_i_("4ab:559"), e.hide(), _r_();
}).blur(function() {
_i_("4ab:514"), e[t.val().length ? "hide" :"show"](), _r_();
}), t.get(0) === document.activeElement ? t.triggerHandler("focus") :t.triggerHandler("blur"), _r_();
}
}));
}), B.define("component/keyboard", function(t, e, i) {
_i_("4ab:12");
var n = t("component"), a = t("event-emitter"), s = {
8:"Backspace",
46:"Delete",
9:"Tab",
13:"Enter",
32:"Space",
27:"Escape",
33:"PageUp",
34:"PageDown",
35:"End",
36:"Home",
37:"ArrowLeft",
38:"ArrowUp",
39:"ArrowRight",
40:"ArrowDown",
48:"0",
49:"1",
50:"2",
51:"3",
52:"4",
53:"5",
54:"6",
55:"7",
56:"8",
57:"9",
65:"A",
66:"B",
67:"C",
68:"D",
69:"E",
70:"F",
71:"G",
72:"H",
73:"I",
74:"J",
75:"K",
76:"L",
77:"M",
78:"N",
79:"O",
80:"P",
81:"Q",
82:"R",
83:"S",
84:"T",
85:"U",
86:"V",
87:"W",
88:"X",
89:"Y",
90:"Z"
};
function o(t, e) {
return _i_("4ab:64"), _r_(function(i) {
_i_("4ab:134");
var n = "";
i.which && void 0 !== s[i.which.toString()] && (i.originalEvent.altKey && (n += ":alt"), i.originalEvent.ctrlKey && (n += ":ctrl"), i.originalEvent.metaKey && (n += ":meta"), i.originalEvent.shiftKey && (n += ":shift"), n += ":" + s[i.which], t.trigger(e + n, {
keys:e + n,
originalEvent:i
})), _r_();
});
}
i.exports = n.extend({
init:function() {
_i_("4ab:301"), a.extend(this), this.$el.bind("keydown", o(this, "keydown")).bind("keyup", o(this, "keyup")), _r_();
}
}), _r_();
}), B.define("component/tooltip-loc", function(t, e, i) {
"use strict";
_i_("4ab:13");
var n = t("component"), a = t("jquery");
i.exports = n.extend({
DEFAULTS:{
template:'<div class="component-tooltip off" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
placement:"top",
alignment:"center",
trigger:"hover focus",
animation:"true"
},
init:function() {
_i_("4ab:302"), this._buildOptions(), this._createTooltip(), this._attachEvents(), this.$el.trigger("ready.B.tooltip", [ this.$tip ]), _r_();
},
_buildOptions:function() {
_i_("4ab:303"), this.options = a.extend({}, this.DEFAULTS, this.$el.data()), this.options.intangible = "intangible" in this.options, this.options.target && (this.options.target = a(this.options.target).first()), this.options.content || (this.options.content = this.options.title || this.el.title), _r_();
},
_createTooltip:function() {
_i_("4ab:304");
var t = "tooltip-" + this.options.placement + " tooltip-align-" + this.options.alignment;
this.options.extraClass && (t = t + " " + this.options.extraClass), "true" === this.options.animation && (t += " tooltip-animate"), this.$tip = a(this.options.template), this.$tip.addClass(t), this._attachContent(), this.$tip.appendTo(a("body")), this.$el.trigger("inserted.B.tooltip", [ this.$tip ]), _r_();
},
_attachContent:function() {
_i_("4ab:305");
var t = this.$tip.find(".tooltip-inner");
this.options.target ? t.append(this.options.target.clone()) :(this.options.target = [], t.text(this.options.content)), _r_();
},
_positionTooltip:function() {
_i_("4ab:306"), this._defineAlignmentVars(), this._placeTooltip(), this._alignTooltip(), this.$tip.css({
left:this.left,
top:this.top
}), _r_();
},
_defineAlignmentVars:function() {
_i_("4ab:307"), this.elOffset = this.$el.offset(), this.position = "left", this.dimension = "outerWidth", this.options.placement.match(/top|bottom/) && (this.position = "top", this.dimension = "outerHeight"), _r_();
},
_accountForRTL:function(t) {
if (_i_("4ab:308"), !B.env.rtl) return _r_(t);
if ("left" === t) return _r_("right");
if ("right" === t) return _r_("left");
return _r_(t);
},
_placeTooltip:function() {
_i_("4ab:309");
var t = this._accountForRTL(this.position), e = this.dimension;
this._accountForRTL(this.options.placement) === t ? this[t] = this.elOffset[t] - this.$tip[e]() :this[t] = this.elOffset[t] + this.$el[e](), _r_();
},
_alignTooltip:function() {
_i_("4ab:310");
var t, e;
switch ("left" === this.position ? (t = "top", e = "outerHeight") :(t = "left", e = "outerWidth"), this._accountForRTL(this.options.alignment)) {
case t:
this[t] = this.elOffset[t];
break;

case "center":
this[t] = this.$el[e]() / 2 + this.elOffset[t] - this.$tip[e]() / 2;
break;

default:
this[t] = this.elOffset[t] + this.$el[e]() - this.$tip[e]();
}
_r_();
},
_attachEvents:function() {
if (_i_("4ab:311"), this.options.trigger.match(/manual/)) return _r_();
var t, e, i, n = this.options.trigger.split(" "), s = n.length, o = this.$el.add(this.$tip);
for (this.options.intangible && (o = this.$el), s; s--; ) t = n[s], "click" === t ? this.$el.on("click", a.proxy(this.toggle, this)) :(e = "hover" == t ? "mouseenter" :"focusin", i = "hover" == t ? "mouseleave" :"focusout", o.on(e, a.proxy(this.show, this)), o.on(i, a.proxy(this.hide, this)));
_r_();
},
_trackTransitionEnd:function(t) {
_i_("4ab:312");
var e = this.$el;
this.$tip.one("transitionend", function(i) {
_i_("4ab:540"), e.trigger(t, [ this ]), _r_();
}), _r_();
},
show:function() {
_i_("4ab:313"), this.$el.trigger("show.B.tooltip", [ this.$tip ]), this._trackTransitionEnd("shown.B.tooltip"), this.$el.attr("aria-describedby", this.el.id), this._positionTooltip(), this.$tip.addClass("on").removeClass("off"), _r_();
},
hide:function() {
_i_("4ab:314"), this.$el.trigger("hide.B.tooltip", [ this.$tip ]), this._trackTransitionEnd("hidden.B.tooltip"), this.$el.removeAttr("aria-describedby"), this.$tip.removeClass("on").addClass("off"), _r_();
},
toggle:function() {
_i_("4ab:315"), this.$tip.is(".on") ? this.hide() :this.show(), _r_();
}
}), _r_();
}), B.define("component/search/destination/input-placeholder", function(t, e, i) {
_i_("4ab:14");
var n = B.require("component/core/input-placeholder"), a = t("search/searchbox/model");
return _r_(n.extend({
init:function() {
_i_("4ab:166"), this.model = a.getInstance(this.$el.data("sb-id")), n.prototype.init.apply(this, arguments), _r_();
}
}));
}), B.define("component/search/destination/input", function(t, e, i) {
"use strict";
_i_("4ab:15"), booking.jstmpl("search_destination_autocomplete_results", function() {
_i_("4ab:135");
var t, e = [ "\n		", "\n\n	", "\n	", "\n\n		\n\n		", '\n            <li class="sb-autocomplete__item sb-autocomplete__item--header">', "/private/mlt_recommend_search_dropdown/name", "</li>\n        ", "\n        \n        ", '\n			<li\n				class="', "c-autocomplete__item sb-autocomplete__item ", "sb-autocomplete__item--cjk ", '"\n				>\n				<div class="sb-autocomplete__section-title-wrapper">\n					<div class="sb-autocomplete__section-title">\n						', '\n							<i class="bicon bicon-', '"></i>\n						', "\n						<span>", "</span>\n					</div>\n				</div>\n			</li>\n		", '\n		<li\n			class="', "c-autocomplete__item sb-autocomplete__item sb-autocomplete__item-with_photo ", "sb-autocomplete__item--airport ", "sb-autocomplete__item--city ", "sb-autocomplete__item--country ", "sb-autocomplete__item--district ", "sb-autocomplete__item--hotel ", "sb-autocomplete__item--landmark ", "sb-autocomplete__item--region ", "sb-autocomplete__item--theme ", "sb-autocomplete__item__item--elipsis ", "sb-autocomplete__item--with-title ", "sb-autocomplete__item--with-two-lines ", "sb-autocomplete__item--regioncity ", "sb-autocomplete__item--two-lines ", "sb-autocomplete__item--theme-expanded ", "first_theme ", "1", "smaller_theme_wrapper ", "sb-autocomplete__item--sub-item ", "sb-autocomplete__item--tabbed ", '"\n			role="option"\n			data-list-item\n			data-i="', '"\n			data-value="', '"\n			', '\n				data-label="', "\n			>", "", '<img alt="', '" src="', '" class="sb-autocomplete--photo">', '<span alt="', '" class="sb-autocomplete--stock">', "iconset/geo_pin", "larger", "</span>", '<div class="', "sb_passion_highlight_wrapper smaller_theme ", '">\n						<p class="sb_passion_highlight_inner">', "</strong>\n						</p>\n					</div>", '<span class="airport-code">', '<span class="sb-autocomplete__item__highlight">', '<span class="sb-autocomplete__item__extra">', '<span class="sb-autocomplete__item__second__line">', '<span class="searchbox__region__subcity__item">', ",", '<span class="sb-autocomplete__badge sb-autocomplete__badge--deals" data-et-view="customGoal:', ':1">', "/private/em_sbox_autocomplete_deals/name", '<span class="sb-autocomplete__badge sb-autocomplete__badge--popular">', "/private/search_top_50_badge/name", "</li>\n		\n	", '\n		<li class="sb-autocomplete__google"></li>\n	', "\n" ], i = [ "total_index", "results", "mlt_recommendation", "lc", "section_title_icon", "section_title", "dest_type", "search_config", "group_config", "flags", "render_two_lines", "is_first_theme", "em_accommodation_type", "checkin", "checkout", "index", "value", "label", "photo_uri", "is_google_result", "b_aid", "iata", "label_multiline", "label_blocks", "highlighted", "text", "label_highlighted", "additional_label", "is_rtl", "b_region_city_endorsements", "is_powered_by_google" ];
return _r_(function(n) {
_i_("4ab:499");
var a = "", s = this.fn;
function o(a) {
if (_i_("4ab:515"), s.MD(i[1])) {
a += e[1], s.MN("index", 0), a += e[2], s.MN(i[0], s.MI(s.array_length(s.MB(i[1]))) - s.MI(1)), a += e[2];
var o = s.MC(i[1]) || [];
n.unshift(null);
for (var r = 1, _ = o.length; _ >= r; r++) {
if (n[0] = o[r - 1], a += e[3], s.MJ(1 == r) && s.MJ(s.MB(i[2])) && (a += [ e[4], s.ME(e[5], s.MB, s.MN, null), e[6] ].join("")), a += e[7], s.MJ(s.MB(i[5])) && (a += e[8], a += e[9], s.MJ(/zh|xt|ja|ko/.test(s.MB(i[3]))) && (a += e[10]), a += e[11], s.MD(i[4]) && (a += [ e[12], s.MC(i[4]), e[13] ].join("")), a += [ e[14], s.MC(i[5]), e[15] ].join("")), a += e[16], a += e[17], s.MJ(/zh|xt|ja|ko/.test(s.MB(i[3]))) && (a += e[10]), a += s.MJ(s.MB(i[6]) + "" == "airport") ? e[18] :s.MJ(s.MB(i[6]) + "" == "city") ? e[19] :s.MJ(s.MB(i[6]) + "" == "country") ? e[20] :s.MJ(s.MB(i[6]) + "" == "district") ? e[21] :s.MJ(s.MB(i[6]) + "" == "hotel") ? e[22] :s.MJ(s.MB(i[6]) + "" == "landmark") ? e[23] :s.MJ(s.MB(i[6]) + "" == "region") ? e[24] :s.MJ(s.MB(i[6]) + "" == "theme") ? e[25] :e[20], a += e[26], s.MD(i[5]) && (a += e[27]), s.MJ(s.MB(i[7])) && s.MJ(s.MB(i[8])) && (a += e[28]), s.MJ(s.MB(i[9])) && s.MJ(s.MC(i[9]).is_region_city) && (a += e[29]), s.MJ(s.MB(i[10])) && (a += e[30]), s.MJ(s.MB(i[6]) + "" == "theme") && (a += e[31], s.MD(i[11]) || (a += e[32], s.MN(i[11], e[33])), a += e[34]), (s.MJ(s.MB(i[12]) + "" == "ryokan") || s.MJ(s.MB(i[12]) + "" == "apartment")) && s.MJ(s.track_experiment("TYALOLOLOODAKRJIKIJLT")) && (a += e[35]), s.MJ(s.MB(i[9])) && s.MJ(s.MC(i[9]).tabbed) && (a += e[36]), s.MJ(s.MB(i[2])) && s.MJ(s.MB(i[13])) && s.MJ(s.MB(i[14])) && (a += e[28]), a += [ e[37], s.MC(i[15]), e[38], s.F.entities(s.MC(i[16])), e[39] ].join(""), s.MD(i[17]) && (a += [ e[40], s.F.html(s.MC(i[17])), e[39] ].join("")), a += e[41], a += e[42], s.MJ(s.MB(i[18])) ? a += [ e[43], s.F.html(s.MC(i[17])), e[44], s.STATIC_HOSTNAME(s.MB(i[18]), 0, 0, 0), e[45] ].join("") :s.MJ(s.MB(i[19])) && s.MJ(s.track_experiment("bLEGPBDDPJRPAFBaTfLXT")) && s.MK(s.MJ(1508776 == s.MC(i[20])) || s.MK(s.MJ(1508780 == s.MC(i[20]))) && s.track_experiment("AEJPVZMYCTeVHeBQbKAFLIUaRfYKdBHT")) && (a += [ e[46], s.F.html(s.MC(i[17])), e[47], (n.unshift({
color:"#003580",
name:e[48],
size:e[49]
}), t = s.HELPER("icon", n[0]), n.shift(), t), e[50] ].join("")), a += e[42], s.MJ(s.MB(i[19])) && s.MJ(s.track_experiment_stage("sss_carrier_google_places", 1)), a += e[42], s.MJ(s.MB(i[6]) + "" == "theme")) a += e[51], a += e[52], a += [ e[53], s.F.entities(s.MC(i[17])), e[54] ].join(""); else {
if (a += e[42], s.MD(i[21]) && (a += [ e[55], s.MC(i[21]), e[50] ].join("")), a += e[42], s.MJ(s.MB(i[10]))) a += [ e[42], s.MC(i[22]), e[42] ].join(""); else if (s.MD(i[23])) {
a += e[42];
var l = r, h = o, d = _, o = s.MC(i[23]) || [];
n.unshift(null);
for (var r = 1, _ = o.length; _ >= r; r++) n[0] = o[r - 1], a += e[42], s.MD(i[24]) && (a += e[56]), a += [ e[42], s.F.entities(s.MC(i[25])), e[42] ].join(""), s.MD(i[24]) && (a += e[50]), a += e[42];
n.shift(), r = l, o = h, _ = d, a += e[42];
} else s.MD(i[26]) ? a += [ e[42], s.MC(i[26]), e[42] ].join("") :s.MD(i[17]) && (a += [ e[42], s.F.entities(s.MC(i[17])), e[42] ].join(""));
if (a += e[42], s.MD(i[27]) && (a += [ e[57], s.MC(i[27]), e[50] ].join("")), a += e[42], s.MJ(s.MB(i[2])) && s.MJ(s.MB(i[13])) && s.MJ(s.MB(i[14])) && (a += e[58], a += s.MD(i[28]) ? [ e[42], s.DATE(s.MB(i[13]), "numeric_date_range", "", "", s.MB(i[14])), e[42] ].join("") :[ e[42], s.DATE(s.MB(i[13]), "short_date_without_year_range", "", "", s.MB(i[14])), e[42] ].join(""), a += e[50]), a += e[42], s.MD(i[29])) {
a += e[42];
var l = r, h = o, d = _, u = c, o = s.MC(i[29]) || [];
n.unshift({
endorsement:null
});
for (var c, r = 1, _ = o.length; _ >= r; r++) n[0].endorsement = c = o[r - 1], a += [ e[59], c ].join(""), s.MJ(r != o.length) && (a += e[60]), a += e[50];
n.shift(), r = l, o = h, _ = d, c = u, a += e[42];
}
a += e[42], s.MJ(s.MC(i[9]).deals) ? a += [ e[61], "TYVGHcAPJNVBUKcKe", e[62], s.ME(e[63], s.MB, s.MN, null), e[50] ].join("") :s.MJ(s.MC(i[9]).popular) && (a += [ e[64], s.F.entities(s.ME(e[65], s.MB, s.MN, null)), e[50] ].join("")), a += e[42];
}
a += e[42], s.MN("index", s.MI(s.MB(i[15])) + s.MI(1)), a += e[42], a += e[66];
}
n.shift(), a += e[1], s.MD(i[30]) && (a += e[67]), a += e[68];
}
return a += e[68], _r_(a);
}
return a += e[0], a = o(a), a += e[2], _r_(a);
});
}()), booking.jstmpl("search_destination_autocomplete_loading", function() {
_i_("4ab:136");
var t = [ "\n		", '\n\n<ul class="c-autocomplete__list sb-autocomplete__list sb-autocomplete__list--loading">\n	', '\n		<li class="c-autocomplete__item sb-autocomplete__item sb-autocomplete__item--city">\n			', '\n				<span class="sb-autocomplete__item-placeholder-text js-placeholder-text"></span>\n			', "\n		</li>\n	", "\n</ul>\n", "\n	" ], e = [ "fe_sb_autocomplete_loading_items" ];
return _r_(function(i) {
_i_("4ab:500");
var n = "", a = this.fn;
function s(n) {
_i_("4ab:516"), a.MN("fe_sb_autocomplete_loading_items", 5), n += t[1];
var s = a.seq(1, a.MB(e[0])) || [];
i.unshift(null);
for (var o = 1, r = s.length; r >= o; o++) {
i[0] = s[o - 1], n += t[2];
var _ = o, l = s, h = r, s = a.seq(1, 3) || [];
i.unshift(null);
for (var o = 1, r = s.length; r >= o; o++) i[0] = s[o - 1], n += t[3];
i.shift(), o = _, s = l, r = h, n += t[4];
}
return i.shift(), n += t[5], _r_(n);
}
return n += t[0], n = s(n), n += t[6], _r_(n);
});
}());
var n = t("component/autocomplete-core"), a = t("search/searchbox/model"), s = t("search/searchbox/analytics"), o = t("et");
i.exports = n.extend({
init:function() {
_i_("4ab:316"), this.optionsSpec = {
delay:{
name:"delay",
type:Number,
defaultValue:300
},
modelId:{
name:"sb-id",
type:String,
required:!0
},
filterDestType:{
name:"filter-dest-type",
type:String
},
gpf:{
name:"gpf",
type:Boolean
},
gpOnly:{
name:"gp-only",
type:Boolean
},
minLength:{
name:"minlength",
type:Number,
defaultValue:2
},
focusOnLoad:{
name:"focus-on-load",
type:Boolean
},
focusOnTyping:{
name:"focus-on-typing",
type:Boolean
},
isSticky:{
name:"is-sticky",
type:Boolean
},
required:{
name:"required",
type:Boolean
},
isOrigin:{
name:"origin",
type:Boolean
},
flags:{
name:"flags",
type:String,
defaultValue:""
}
}, $.extend(this.optionsSpec, this.extendOptions()), this.$errors = this.$el.find("[data-error-id]"), this.$clear = this.$el.find('[data-clear=""]'), this.$searchbox = this.$el.closest(".sb-searchbox__outer"), n.prototype.init.apply(this, arguments), this.model = a.getInstance(this.options.modelId), this.groupName = this.options.isOrigin ? "origin" :"destination", this.model.use(this.groupName), this.model.use("dates"), this.model.updateFlags(this.options.flags), this.inputUntouched = !0, this.model.on("change", this.modelChange.bind(this)), this.model.on("validation", this.modelValidation.bind(this)), this.destinationModel = this.options.isOrigin ? this.model.origin :this.model.destination, this.options.isOrigin && this.destinationModel.configure({
groupName:"origin"
}), this.options.required && this.destinationModel.configure({
validate:!0
}), this.options.gpOnly && this.destinationModel.configurePredictions({
gpo:1
}), this.options.gpf && this.destinationModel.configure({
gpf:1
}), this.options.filterDestType && this.destinationModel.configurePredictions({
dest_type:this.options.filterDestType
}), this.options.focusOnLoad && this.focusOnLoad(), this.options.focusOnTyping && this.options.isSticky && (this.stickyController = t("search/searchbox/searchbox-sticky-controller").getController()), this.model.getFlag("track_focus_on_typing_stages") && this.enableFocusOnTyping(), this.$errors.filter(".-visible").length && (this.destinationModel.valid = !1), this.templateResults = B.jstmpl("search_destination_autocomplete_results"), this.model.getFlag("NAFLaBYGPAJbLZRdQFDYZBOEZNaZVGLT") && (this.gaTracker = t("ga-tracker"), this.bhawDictionary = [ B.jstmpl.translations("bh_index_search_terms_apartment"), B.jstmpl.translations("bh_index_search_terms_house"), B.jstmpl.translations("bh_index_search_terms_flat"), B.jstmpl.translations("bh_indiex_search_terms_home"), B.jstmpl.translations("bh_index_search_terms_villa") ].map(function(t) {
return _i_("4ab:590"), _r_(t.toLowerCase());
})), this.toggleClear(), this.modelInit(), this.renderLoadingElement(), _r_();
},
addInputEventListeners:function() {
_i_("4ab:317"), n.prototype.addInputEventListeners.apply(this, arguments), this.$clear.length && this.$clear.on("click", this.clearClick.bind(this)), _r_();
},
renderLoadingElement:function() {
_i_("4ab:318"), this.shouldShowLoadingState = !0;
var t = {};
this.$loading = $(B.jstmpl("search_destination_autocomplete_loading").render(t)), this.$loading.find(".js-placeholder-text").each(function() {
_i_("4ab:541"), $(this).width(65 + parseInt(65 * Math.random(), 10)), _r_();
}), this.$loading.insertAfter(this.$list), _r_();
},
showLoading:function() {
_i_("4ab:319"), this.shouldShowLoadingState && (n.prototype.listHide.apply(this), this.$loading.addClass("-visible")), _r_();
},
hideLoading:function() {
_i_("4ab:320"), this.shouldShowLoadingState && this.$loading.removeClass("-visible"), _r_();
},
modelInit:function() {
_i_("4ab:321");
var t = {
ss:this.input.value
};
this.destinationModel.init(t), _r_();
},
modelChange:function(t) {
if (_i_("4ab:322"), t && t.group && t.group == this.groupName) {
var e = this.destinationModel.get();
e.ss == this.input.value || this.isDeletion || this.setValue(e.ss), t.onlyCurrentCountry && (this.$input.focus(), this.autocomplete()), this.inputUntouched = !1;
}
_r_();
},
modelValidation:function(t) {
_i_("4ab:323"), t && t.group == this.groupName && (this.$errors.filter(".-visible").removeClass("-visible"), this.destinationModel.valid || (this.$el.find("#destination__error").addClass("-visible"), this.$errors.filter('[data-error-id="' + this.destinationModel.validationError + '"]').addClass("-visible"), s.send("[error] destination: " + this.destinationModel.validationError))), _r_();
},
inputClick:function() {
_i_("4ab:324"), ("" === this.input.value || this.inputUntouched) && this.model.getFlag("on_click_suggestions") && this.showSuggestions(), B.env.b_mlt_sb_recommendations_run && (this.model.getFlag("on_click_suggestions_track") && B.et.stage(this.model.getFlag("on_click_suggestions_track"), 1), this.model.getFlag("clear_input_on_click") && (this.$input.data("cached-value", this.input.value), this.input.value = ""), this.model.getFlag("on_click_suggestions_anywhere") && this.destinationModel && (this.suggestionsLocked = !1, this.destinationModel.suggestionsCache.results = this.destinationModel.parseMltRecommendations(B.env.b_mlt_sb_autocomplete_recommendations), this.destinationModel.suggestionsCache.on_click_suggestion = 1, this.showSuggestions(), this.listShow())), this.input.value.length > 0 && (B.et.stage("AEJPOAJeKZBeNfRJVYaGDTC", 1), "index" === B.env.b_action && B.et.stage("AEJPOAJeKZBeNfRJVYaGDTC", 2), "searchresults" === B.env.b_action && B.et.stage("AEJPOAJeKZBeNfRJVYaGDTC", 3), this.model.getFlag("clear_input_on_click") && (this.$input.data("cached-value", this.input.value), this.input.value = "")), n.prototype.inputClick.apply(this, arguments), _r_();
},
inputInput:function() {
_i_("4ab:325"), this.isVisibleCalendar() && this.hideCalendar(), this.destinationModel.setSearchString(this.input.value), this.inputUntouched = !1, "index" !== B.env.b_action && B.et.stage("bLYGbAHYeTCaC", 1), n.prototype.inputInput.apply(this, arguments), _r_();
},
inputKeyUp:function(t) {
if (_i_("4ab:326"), 2 === B.et.track("YQecfBfIHSHFTVZMYIO")) {
var e = t.which >= 37 && t.which <= 40, i = this.input.value.toLowerCase(), a = this.items.some(function(t) {
return _i_("4ab:591"), _r_(t.valueLowerCase.indexOf(i) >= 0);
});
(e && !a || !i) && (this.results = [], this.items = [], this.$items = $({}), this.listHide());
}
n.prototype.inputKeyUp.apply(this, arguments), _r_();
},
inputFocus:function(t) {
_i_("4ab:327"), n.prototype.inputFocus.apply(this, arguments), _r_();
},
inputBlur:function() {
_i_("4ab:328"), clearTimeout(this.timer), this.destinationModel.abortPredictions(), this.hideLoading();
var t = this.destinationModel.get().ss_raw;
if (t) {
var e = t.split(/\s+/).length;
s.sendOnce("[interaction] autocomplete tokens typed [" + e + "]");
}
0 === this.input.value.length && this.model.getFlag("clear_input_on_click") && this.input.value !== this.$input.data("cached-value") && (this.input.value = this.$input.data("cached-value") || ""), n.prototype.inputBlur.apply(this, arguments), this.suggestionsLocked = !1, _r_();
},
inputEnter:function(t) {
_i_("4ab:329"), s.send("[interaction] search input pressed enter"), n.prototype.inputEnter.apply(this, arguments), _r_();
},
onAutocompleteSearchStart:function() {
if (_i_("4ab:330"), this.model.getFlag("NAFLaBYGPAJbLZRdQFDYZBOEZNaZVGLT")) try {
var t, e, i = this.query(), n = "string" == typeof i ? i.split(" ") :[];
for (var a in n) "string" == typeof n[a] && (t = $.trim(n[a].toLowerCase()), e = this.bhawDictionary.indexOf(t), -1 !== e && (B.et.customGoal("NAFLaBYGPAJbLZRdQFDYZBOEZNaZVGLT", e + 1), this.gaTracker.trackEvent("[BH.SAD] sbx typing: " + B.env.b_action, B.env.b_lang_for_url, t, 1)));
} catch (s) {
booking.reportError(s, "bhsad");
}
_r_();
},
clearClick:function(t) {
_i_("4ab:331"), t.preventDefault(), this.reset({
hard:!0
}), this.input.focus(), _r_();
},
setValue:function(t) {
_i_("4ab:332"), n.prototype.setValue.apply(this, arguments), this.toggleClear(), _r_();
},
toggleClear:function() {
_i_("4ab:333"), this.$clear.length && this.$clear.toggleClass("-visible", "" !== this.input.value), _r_();
},
listShow:function() {
_i_("4ab:334"), this.results && this.results.filter(function(t) {
return _i_("4ab:563"), _r_(t.photo_uri);
}).length ? this.$list.addClass("sb-autocomplete__list-with_photos") :this.$list.removeClass("sb-autocomplete__list-with_photos"), this.items.length > 0 && this.input.value.length >= this.options.minLength ? n.prototype.listShow.apply(this, arguments) :this.items.length > 0 && this.model.getFlag("on_click_suggestions") ? n.prototype.listShow.apply(this, arguments) :B.env.b_mlt_sb_recommendations_run && this.items && this.items.length && this.on_click_suggestion && n.prototype.listShow.apply(this, arguments), _r_();
},
autocomplete:function(t) {
_i_("4ab:335"), t = t || {}, this.highlightReset({
preserveInputValue:!0
}), clearTimeout(this.timer), this.destinationModel.abortPredictions(), this.hideLoading(), this.toggleClear(), t.fromFocus || (this.isDeletion ? this.destinationModel.reset() :this.postAutocomplete(), this.input.value.length >= this.options.minLength && (this._loading = !0), this.model.getFlag("BbVIDQOJHZWSdKWdPOAcOcMWVceVbYANZMTAdTdHO") && B.et.stage("BbVIDQOJHZWSdKWdPOAcOcMWVceVbYANZMTAdTdHO", 6), this.timer = setTimeout(function() {
_i_("4ab:615"), this.input.value.length >= this.options.minLength && (this.destinationModel.getPredictions(this.query(), this.render.bind(this)), this.showLoading(), this.onAutocompleteSearchStart()), _r_();
}.bind(this), this.options.delay)), _r_();
},
query:function() {
return _i_("4ab:336"), _r_(this.input.value);
},
extendOptions:function() {
return _i_("4ab:337"), _r_({});
},
render:function(t, e) {
_i_("4ab:338"), this.results = [], this.items = [], this.$items = $({}), this.on_click_suggestion = !1, this.hideLoading(), !t && this.model.getFlag("on_click_suggestions_track") && e.on_click_suggestion && (this.on_click_suggestion = !0), this._loading = !1, !t || "service-booking-no-results" != t.toString() && -1 === t.toString().indexOf("ZERO_RESULTS") || s.send("[context] autocomplete zero results search"), !t && Array.isArray(e.results) ? (s.send("[context] autocomplete suggestions [" + e.results.length + "]"), B.et.stage("bLEGPBDDPJRPAFBaTfLXT", 1), e.is_powered_by_google && (B.et.stage("bLEGPBDDPJRPAFBaTfLXT", 2), s.send("[context] autocomplete google place search")), B.et.stage("TMGCAFRe", 1), this.results = e.results, B.env.rtl && (e.is_rtl = !0), e.is_powered_by_google || 1 != this.model.getFlag("UBKeJbLYUELMHWNJWdORe") || e.results.forEach(function(t) {
_i_("4ab:606"), t && t.label_multiline && (t.render_two_lines = 1), _r_();
}), 2 == e.results.length && "city" === e.results[0].dest_type && "airport" === e.results[1].dest_type && e.results[1].flags && e.results[1].flags.tabbed && "flights_searchresults" === B.env.b_action && B.et.track("eWabVacDNCHT") && (e.results[1].flags.tabbed = 0, e.results.shift()), this.items = e.results.filter(function(t) {
return _i_("4ab:616"), t.label || B.reportError(e.results, "[ignore this]autocomplete item lacks label property"), _r_(!!t.label);
}).map(function(t) {
return _i_("4ab:592"), _r_({
value:t.label,
valueLowerCase:t.label.toLowerCase()
});
}), this.$list.html(this.templateResults.render(e)), this.$items = this.$list.find('[data-list-item=""]'), this.model.getFlag("a11yinput") && this.a11yAnnounceResults(e), e.is_powered_by_google || void 0 === this.model.getFlag("UBKeJbLYUELMHWNJWdORe") || o.stage("UBKeJbLYUELMHWNJWdORe", 1)) :t || (this.$list.html(this.templateResults.render(e)), this.model.getFlag("a11yinput") && this.a11yAnnounceResults(e)), this.postAutocomplete(), setTimeout(function() {
_i_("4ab:564"), this.$items.each(function() {
_i_("4ab:625"), this.scrollWidth > this.offsetWidth && this.setAttribute("data-title", this.getAttribute("data-label")), _r_();
}), _r_();
}.bind(this), 500), _r_();
},
a11yAnnounceResults:function(t) {
_i_("4ab:339"), Array.isArray(t.results) && t.results.length > 0 && setTimeout(function() {
_i_("4ab:607"), this.$el.find(".sb-a11y-announcement").show(), this.$el.find(".sb-a11y-announcement").html("<p>" + B.jstmpl.translations("a11y_index_autocomplete_suggested_destinations") + "</p>"), setTimeout(function() {
_i_("4ab:631"), this.$el.find(".sb-a11y-announcement").html(""), this.$el.find(".sb-a11y-announcement").hide(), _r_();
}.bind(this), 500), _r_();
}.bind(this), 900), _r_();
},
choose:function(t) {
_i_("4ab:340"), s.send("[interaction] autocomplete click position [" + t + "]"), s.send("[interaction] autocomplete click [" + this.results[t].dest_type + "]"), clearTimeout(this.timer), this.destinationModel.abortPredictions(), this.destinationModel.set(this.results[t]), n.prototype.choose.apply(this, arguments);
var e = this.results[t];
"ryokan" === e.em_accommodation_type ? (B.et.stage("TYALOLOLOODAKRJIKIJLT", 2), B.env.b_lang_is_cjk && B.et.stage("TYALOLOLOODAKRJIKIJLT", 5)) :"apartment" === e.em_accommodation_type && B.et.stage("TYALOLOLOODAKRJIKIJLT", 3), e.flags && e.flags.deals && $("#bookForm").append("<input type='hidden' name='em_ac_deal_option_clicked' value='1'>"), B.et.goal("autocomplete_option_selected"), "theme" == this.results[t].dest_type ? B.et.goal("autocomplete_option_selected_theme") :"hotel" == this.results[t].dest_type ? B.et.goal("autocomplete_option_selected_hotel") :this.results[t].place_id ? B.et.goal("autocomplete_option_selected_google_places") :"query_finder" == this.results[t].result_type || B.et.goal("autocomplete_option_selected_destination"), "anywhere" == this.results[t].dest_type ? (this.model.setFields("drec_traffic", [ {
name:"dr_source",
value:"sb_anywhere"
} ]), this.model.emit("change", {
group:""
})) :(this.model.setFields("drec_traffic", []), this.model.emit("change", {
group:""
}));
var i = [ "landmark", "airport", "district", "region" ];
if (this.destinationModel.setTrackingFields("map_autoopen", []), -1 !== i.indexOf(e.dest_type)) {
this.locationSelected = !0;
var a = [];
(this.model.getFlag("open_location_in_map") || this.model.getFlag("open_location_in_map_checkbox")) && (this.model.getFlag("open_location_in_map") && a.push({
name:"map",
value:1
}), this.model.getFlag("open_location_in_map_checkbox") && $(".sb-searchbox__map_trigger input").prop("checked", "checked"), B.et.track("ebccCcCcCWNAURAfPMTOdcRe") || $(".sb-searchbox__map_trigger").removeClass("g-hidden")), this.destinationModel.setTrackingFields("map_trigger", a);
} else (this.model.getFlag("open_location_in_map") || this.model.getFlag("open_location_in_map_checkbox")) && ($(".sb-searchbox__map_trigger").addClass("g-hidden"), this.model.getFlag("open_location_in_map_checkbox") && $(".sb-searchbox__map_trigger input").prop("checked", null), this.destinationModel.setTrackingFields("map_trigger", []));
("theme" == this.results[t].dest_type || "theme_dest" == this.results[t].result_type) && this.model.submit(), this.results[t].mlt_recommendation && this.results[t].checkin && this.results[t].checkout && (this.model.dates.setDate("checkin", this.results[t].checkin), this.model.dates.setDate("checkout", this.results[t].checkout), B.et.customGoal("OAZEUcCcCcCJNOODAKFGEVUC", 1)), this.showCalendarOnDesinationChange(), _r_();
},
showCalendarOnDesinationChange:function() {
if (_i_("4ab:341"), !this.model.getFlag("calendar_on_destination_change") || this.model.dates.get().checkin) return _r_();
this.showCalendar(), _r_();
},
showCalendar:function() {
_i_("4ab:342"), setTimeout(function() {
_i_("4ab:565"), this.$searchbox.find(".c2-wrapper-s-checkin").trigger("show"), _r_();
}.bind(this)), _r_();
},
hideCalendar:function() {
_i_("4ab:343"), setTimeout(function() {
_i_("4ab:566"), this.$searchbox.find(".c2-wrapper-s-checkin").trigger("hide"), this.$searchbox.find(".c2-wrapper-s-checkout").trigger("hide"), _r_();
}.bind(this)), _r_();
},
isVisibleCalendar:function() {
return _i_("4ab:344"), _r_(this.$searchbox.find(".c2-calendar").is(":visible"));
},
showSuggestions:function() {
if (_i_("4ab:345"), this.suggestionsLocked) return _r_();
this.destinationModel.getSuggestions(this.render.bind(this)), this.suggestionsLocked = !0, _r_();
},
focusOnLoad:function() {
_i_("4ab:346");
var t = $(document);
t.ready(function() {
_i_("4ab:567"), this.input.focus(), _r_();
}.bind(this)), _r_();
},
enableFocusOnTyping:function() {
_i_("4ab:347");
var t = $(document);
t.on("keydown.autofocus", this.onKeyDown.bind(this)), this.$input.on("blur", function() {
_i_("4ab:608"), t.on("keydown.autofocus", this.onKeyDown.bind(this)), _r_();
}.bind(this)).on("focus", function() {
_i_("4ab:568"), t.off("keydown.autofocus", this.onKeyDown.bind(this)), _r_();
}.bind(this)), _r_();
},
onKeyDown:function(t) {
_i_("4ab:348");
var e = this.$input.offset().top, i = t.keyCode, n = t.metaKey || t.ctrlKey, a = i > 47 && 58 > i || i > 64 && 91 > i || i > 95 && 112 > i;
!a || n || !document.activeElement || /INPUT|TEXTAREA|SELECT/.test(document.activeElement.nodeName) || $(".modal-mask").length || this.options.focusOnTyping && (this.options.isSticky && this.stickyController ? this.stickyController.show() :window.scrollY > e && $("html, body").animate({
scrollTop:e - 5
}), this.input.value && this.setValue(""), this.$input.focus()), _r_();
},
reset:function() {
_i_("4ab:349"), this.selectedValue || this.destinationModel.reset(), n.prototype.reset.apply(this, arguments), _r_();
},
inputBlurSync:function() {
if (_i_("4ab:350"), "cross_product_index" === B.env.b_action && B.et.track("YQecfBfIHSHFTVZMYIO")) return _r_();
n.prototype.inputBlurSync.apply(this, arguments), _r_();
},
clickOut:function() {
if (_i_("4ab:351"), "cross_product_index" === B.env.b_action && B.et.track("YQecfBfIHSHFTVZMYIO")) return this.listHide(), _r_();
n.prototype.clickOut.apply(this, arguments), _r_();
}
}), _r_();
}), B.define("search/destination/model", function(t, e, i) {
"use strict";
_i_("4ab:16");
var n = t("search/destination/service"), a = t("browser-storage-handler"), s = t("env");
function o(t) {
_i_("4ab:65"), this.model = t, this.data = {
ss:""
}, this.valid = !0, this.validationError = "", this.options = {
groupName:"destination"
}, this.predicitonParameters = {}, this.searchInstance = null, this.suggestionsCache = {
results:[]
}, this.ac = {
selected:!1,
dataset:[]
}, _r_();
}
$.extend(o.prototype, {
init:function(t) {
_i_("4ab:167"), this.data = t;
var e = {};
this.model && this.model.getFlag && (this.model.getFlag("on_click_suggestions") || this.model.getFlag("on_click_suggestions_anywhere")) && (this.model.getFlag("on_click_suggestions_anywhere") && (e.anywhere = !0), s.b_ac_search_history && this.model.getFlag("on_click_suggestions") && (e.searchHistory = !0), this.model.use("group"), this.model.on("init", function(t) {
_i_("4ab:593"), "group" === t.group && this.fetchSuggestions(e), _r_();
}.bind(this))), this.emit("init"), _r_();
},
configure:function(t, e) {
_i_("4ab:168"), void 0 !== e ? this.options[t] = e :"object" == typeof t && $.extend(this.options, t), _r_();
},
getOption:function(t) {
return _i_("4ab:169"), _r_(this.options[t]);
},
get:function() {
return _i_("4ab:170"), _r_(this.data);
},
set:function(t) {
if (_i_("4ab:171"), a.isLocalStorageSupported() && t.dest_id && t.dest_id !== a.getSessionValue("prev_destination_id")) {
var e = JSON.stringify(t);
a.addSessionValue("prev_destination_id", t.dest_id, !1), a.addSessionValue("prev_destination_data", e, !1);
}
if (this.ac.selected = !0, this.searchInstance && this.searchInstance.getResultDetails && !t._details) return this.searchInstance.getResultDetails(t, function(e, i) {
_i_("4ab:594"), i = i || {}, i._details = !0, this.set(i), window.ga && window.ga("send", "event", "ac_google_places", [ t.place_types || "unknown", t.name ].join("|"), this.data.ss_raw, t.position), _r_();
}.bind(this)), _r_();
this.data.ss = t.ss, this.data.dest_id = t.dest_id, this.data.dest_type = t.dest_type, this.data.iata = t.iata, t.nr_hotels && (this.data.nr_hotels = t.nr_hotels), this.data.acc_type_id = t.acc_type_id, t.place_id && t.latitude && t.longitude ? (this.data.place_id = t.place_id, this.data.latitude = t.latitude, this.data.longitude = t.longitude, this.data.place_types = t.place_types) :t.dest_id && t.latitude && t.longitude ? (this.data.place_id = "", this.data.latitude = t.latitude, this.data.longitude = t.longitude, this.data.place_types = null) :(this.data.place_id = "", this.data.latitude = "", this.data.longitude = "", this.data.place_types = null), t._fa && this.model.setFormAction(t._fa), t._ef = t._ef || [], this.data.dest_id && t._ef.push({
name:"dest_id",
value:this.data.dest_id
}), this.data.dest_type && t._ef.push({
name:"dest_type",
value:this.data.dest_type
}), this.data.iata && t._ef.push({
name:"iata",
value:this.data.iata
}), this.data.place_id && t._ef.push({
name:"place_id",
value:this.data.place_id
}), this.data.latitude && t._ef.push({
name:"place_id_lat",
value:this.data.latitude
}), this.data.longitude && t._ef.push({
name:"place_id_lon",
value:this.data.longitude
}), this.data.place_types && Array.isArray(this.data.place_types) && t._ef.push({
name:"place_types",
value:this.data.place_types.join(",")
}), t._ef.push({
name:"search_pageview_id",
value:s.pageview_id
}), t._ef.push({
name:"search_selected",
value:"true"
}), this.model.setFields("destinationNotSelected", []), this.model.setFields("destinationSelected", t._ef), this.emit("change"), _r_();
},
setSearchString:function(t) {
_i_("4ab:172"), this.data.ss = t, this.data.ss_raw = t, this.valid || this.validate(), _r_();
},
reset:function() {
_i_("4ab:173"), this.data.dest_id = null, this.data.dest_type = null, this.data.iata = null, this.data.place_id = null, this.data.latitude = null, this.data.longitude = null, this.model.setFormAction(null), this.model.setFields(this.options.groupName, []), this.model.setFields("destinationNotSelected", []), this.model.setFields("destinationSelected", [ {
name:"dest_id",
value:""
}, {
name:"dest_type",
value:""
}, {
name:"search_pageview_id",
value:s.pageview_id
}, {
name:"search_selected",
value:"false"
} ]), this.emit("change"), _r_();
},
setTrackingFields:function(t, e) {
_i_("4ab:174"), this.model.setFields(t, e), this.emit("change"), _r_();
},
validate:function() {
_i_("4ab:175");
var t = !0, e = "";
if (!this.options.validate) return this.valid = t, this.validationError = e, _r_(t);
return "" === this.data.ss && (t = !1, e = "search-string-empty"), this.valid != t && (this.valid = t, this.validationError = e, this.emit("validation")), _r_(t);
},
initPredictions:function() {
if (_i_("4ab:176"), this.options.gpf) {
var t = B.require("search/destination/service-atlas");
t.init();
}
_r_();
},
configurePredictions:function(t) {
_i_("4ab:177"), $.extend(this.predicitonParameters, t), _r_();
},
getPredictions:function(t, e) {
_i_("4ab:178");
var i = $.extend({}, s.search_autocomplete_params, this.predicitonParameters);
this.searchInstance && this.searchInstance.abort(), this.ac = {
selected:!1,
dataset:[]
};
function a(t, i) {
_i_("4ab:501");
var n = arguments;
if (i) {
if (this.model.setFields(this.options.groupName, i._ef), this.model.setFields("destinationNotSelected", i._efd), this.model.getFlag("SB_PRELOAD_FIRST_GPLACES_RESULT") && this.searchInstance && this.searchInstance.getResultDetails && i.results && i.results[0] && !i.results[0]._details) return this.searchInstance.getResultDetails(i.results[0], function(t, a) {
_i_("4ab:627"), t || (this.ac.dataset = i.results, this.ac.dataset[0] = a, this.ac.dataset[0]._details = !0), e.apply(null, n), _r_();
}.bind(this)), _r_();
this.ac.dataset = i.results;
}
e.apply(null, n), _r_();
}
i.ss = t, i.gpf = this.options.gpf, this.options.onlyCurrentCountry && (i.e_acf_i = s.b_country_id, i.e_acf_t = "country"), this.searchInstance = n.search(i, a.bind(this)), this.model.setFields("destinationOriginal", [ {
name:"ss_raw",
value:i.ss
} ]), this.model.setFields("destinationSelected", [ {
name:"search_pageview_id",
value:s.pageview_id
} ]), _r_();
},
abortPredictions:function() {
_i_("4ab:179"), this.searchInstance && this.searchInstance.abort(), _r_();
},
getSuggestions:function(t, e) {
if (_i_("4ab:180"), this.suggestionsCache.results.length) return setTimeout(function() {
_i_("4ab:595"), t(null, this.suggestionsCache), _r_();
}.bind(this), 0), _r_();
this.model.one("destination:suggestions", function() {
_i_("4ab:560"), this.suggestionsCache.results.length && t(null, this.suggestionsCache), _r_();
}.bind(this)), _r_();
},
fetchSuggestions:function(t) {
if (_i_("4ab:181"), this.suggestionsLoading) return _r_();
var e = function(t, e) {
if (_i_("4ab:517"), !t && e && e.results) {
e.on_click_suggestion = e.results.length > 0;
for (var i = 0; i < e.results.length; i++) !e.results[i].ss && e.results[i].label && (e.results[i].ss = e.results[i].label);
this.suggestionsCache = e;
}
this.suggestionsLoading = !1, this.emit("destination:suggestions"), _r_();
}, i = B.require("search/destination/service-booking");
this.suggestionsInstance = i.getSuggestions(e.bind(this), t), this.suggestionsLoading = !0, _r_();
},
initOnlyCurrentCountry:function(t) {
_i_("4ab:182"), this.options.onlyCurrentCountry = !!t, _r_();
},
getOnlyCurrentCountry:function() {
return _i_("4ab:183"), _r_(!!this.options.onlyCurrentCountry);
},
setOnlyCurrentCountry:function(t) {
_i_("4ab:184"), this.options.onlyCurrentCountry = !!t, this.emit("change", {
onlyCurrentCountry:!0
}), _r_();
},
emit:function(t, e) {
_i_("4ab:185"), e = e || {}, this.model.emit(t, $.extend(e, {
group:this.options.groupName
})), _r_();
},
parseMltRecommendations:function(t) {
_i_("4ab:186");
var e;
return t && t.length && $.each(t, function(e) {
_i_("4ab:561"), t[e].ss = t[e].label, t[e].dest_id = t[e].b_ufi, t[e].dest_type = "city", t[e].photo_uri = t[e].b_image_url, t[e].mlt_recommendation = 1, _r_();
}), e = t, _r_(e);
}
}), i.exports = o, _r_();
}), B.define("search/destination/service", function(t, e, i) {
"use strict";
_i_("4ab:17");
var n = t("search/destination/service-booking"), a = t("search/destination/service-carrier"), s = t("search/destination/service-atlas");
function o(t, e, i) {
_i_("4ab:66");
var n, a, s, o = [], _ = [], l = [], h = 0, d = function(t, e, n) {
if (_i_("4ab:187"), h++, o.length && (e ? _.push(e) :l[t] = n, h == o.length)) if (_.length == o.length) i.call(null, _[0], null); else {
var a = r(l);
i.call(null, null, a);
}
_r_();
}, u = function() {
for (_i_("4ab:188"), n = 0; n < o.length; n++) o[n].abort();
_r_();
};
for (n = 0; n < t.length; n++) a = t[n].search.call(t[n], $.extend({}, e), d.bind(null, n)), a.getResultDetails && (s = a.getResultDetails), o.push(a);
return _r_({
abort:u,
getResultDetails:s
});
}
function r(t) {
_i_("4ab:67");
var e = 6, i = 3, n = {
results:[],
_ef:[],
_efd:[]
};
return t.forEach(function(t) {
if (_i_("4ab:189"), !t) return _r_();
if (t.results) if (n.results.length) {
t.results = t.results.filter(h), t.results.splice(i);
var a = e - t.results.length;
n.results.splice(a), n.results = t.results.concat(n.results);
} else n.results = t.results;
[ "_ef", "_efd" ].forEach(function(e) {
_i_("4ab:518"), t[e] && (n[e] = n[e].concat(t[e].filter(_(n[e])))), _r_();
}), n.is_powered_by_google = n.is_powered_by_google || t.results.length && t.is_powered_by_google, _r_();
}), n.results.forEach(function(t, e) {
_i_("4ab:190"), t._ef = l(t._ef, "ac_position", e), _r_();
}), n.city = n.results, n.__js_upa__ = n.is_powered_by_google, _r_(n);
}
function _(t) {
_i_("4ab:68");
var e = {};
return t.forEach(function(t) {
_i_("4ab:191"), e[t.name] = !0, _r_();
}), _r_(function(t) {
return _i_("4ab:137"), _r_(!e[t.name]);
});
}
function l(t, e, i) {
return _i_("4ab:69"), t = t.filter(function(t) {
return _i_("4ab:352"), _r_(t.name !== e);
}), t.push({
name:e,
value:i
}), _r_(t);
}
function h(t) {
return _i_("4ab:70"), _r_(-1 != [ "route", "postal_code", "street_address" ].indexOf(t.place_type));
}
function d(t, e, i) {
_i_("4ab:71");
var n, a = [], s = [], o = function(t, e) {
if (_i_("4ab:192"), a.length) if (t) s.push(t), s.length == a.length && i.call(null, t, e); else for (i.call(null, t, e), n = 0; n < a.length; n++) a[n].abort();
_r_();
}, r = function() {
for (_i_("4ab:193"), n = 0; n < a.length; n++) a[n].abort();
_r_();
};
for (n = 0; n < t.length; n++) a.push(t[n].search.call(t[n], $.extend({}, e), o));
return _r_({
abort:r
});
}
function u(t, e, i) {
_i_("4ab:72");
var n, a, s = {}, o = function(e, n) {
_i_("4ab:194"), setTimeout(function() {
_i_("4ab:519"), e && t.length ? a() :i.call(null, e, n), _r_();
}, 0), _r_();
};
a = function() {
_i_("4ab:195");
var i = t.shift();
n = i.search.call(i, $.extend({}, e), o), s.getResultDetails = n.getResultDetails, _r_();
};
var r = function() {
_i_("4ab:196"), n && n.abort(), _r_();
};
return a(), s.abort = r, _r_(s);
}
i.exports = {
search:function(t, e) {
if (_i_("4ab:197"), !t || !t.ss || "function" != typeof e) throw new Error("Invalid arguments");
var i = s;
return "www" === B.env.b_site_type && B.et.track("bLTLbFNJNfAFBaTKe") && (i = a), _r_(t.gpo ? s.search(t, e) :t.fesp_acf_i || t.fesp_acf_i_regions || t.fesp_acf_i_cities ? n.search(t, e) :t.gpf && t.ss.match(/[0-9]/) ? o([ n, i ], t, e) :t.gpr ? d([ n, i ], t, e) :t.gpf ? u([ n, s ], t, e) :n.search(t, e));
}
}, _r_();
}), B.define("search/destination/service-atlas", function(t, e, i) {
"use strict";
_i_("4ab:18");
var n = t("event-emitter"), a = t("env"), s = a.b_map_center_latitude || a.b_latitude || void 0, o = a.b_map_center_longitude || a.b_longitude || void 0, r = 3e4, _ = 2, l = [ "ChIJNy0jzGPMUQ4RWpboPw0ztMY", "ChIJ2xJC2SwmsUcRBqiHnUEubtY", "ChIJT-IyeGHurw0Rx89nUEaYTPM", "ChIJk_Swujrurw0R7yS_X2BSuD4", "ChIJv02k1k9oWQ0RWvhKDOLvTWA" ], h = {
administrative_area_level_1:"region",
administrative_area_level_2:"region",
administrative_area_level_3:"region",
administrative_area_level_4:"region",
administrative_area_level_5:"region",
region:"region",
airport:"airport",
country:"country",
locality:"city",
point_of_interest:"landmark",
poi:"landmark",
route:"region",
street_address:"region",
postal_code:"region",
sublocality:"district"
}, d = "zh" === a.b_lang || "xt" === a.b_lang || "ja" === a.b_lang || "ko" === a.b_lang, u = "cn" === a.b_guest_country, c = a.b_enable_mapbox_fallback ? !u :!0;
function p() {
return _i_("4ab:73"), _r_(!!B.atlas);
}
function f(t, e, i) {
_i_("4ab:74");
var n = {
city:[]
};
n.__upa__ = e.filter(b).slice(0, 5).map(function(e, i) {
_i_("4ab:353"), e = e.get("data");
var n = {
upa:!0,
nr_hotels:0,
nr_hotels_25:0,
ss_raw:t.ss,
dest_id:e.id,
place_id:e.id,
dest_type:h[e.types && e.types[0]] || "landmark",
place_type:e.types && e.types[0],
place_types:e.types,
ss:e.description,
label:e.description,
label_blocks:M(e.description, e.matched_substrings),
label_highlighted:v(e.description, e.matched_substrings, {
encode:t.gpf_encode
}),
label_multiline:"<span><b>" + e.description + "</b></span>",
hotels:0,
lc:a.b_lang,
position:i,
is_google_result:c,
_ef:[],
cjk:d
};
return u && (n.is_mapbox_result = !0, n.longitude = e.longitude, n.latitude = e.latitude, n._details = !0), n._ef.push({
name:"ac_position",
value:i
}), _r_(n);
}), n.results = n.__upa__, n._ef = [], n._ef.push({
name:"search_pageview_id",
value:a.pageview_id
}), window.google && (n.is_powered_by_google = n.results.length > 0, n.__js_upa__ = n.is_powered_by_google), i(null, n), _r_();
}
function b(t) {
_i_("4ab:75");
var e = t.get("data");
return _r_(-1 === l.indexOf(e.id));
}
function g(t, e, i) {
_i_("4ab:76"), t = t || {}, t.id = e.id || e.place_id, t.place_id = t.id, t.name = e.name || e.formatted_address, t.latitude = e.geometry.location.lat(), t.longitude = e.geometry.location.lng(), t.place_types = e.types, t.dest_type = h[e.types && e.types[0]] || "landmark", t._ef = t._ef || [], t._ef.push({
name:"ss_short",
value:e.name
}), i(null, t), _r_();
}
function m(t, e) {
if (_i_("4ab:77"), !t.place_id) return e(null, t), _r_();
this.atlas.getGeocodeDetails({
placeId:t.place_id
}, function(i) {
_i_("4ab:198"), g(t, i, e), _r_();
}), _r_();
}
function v(t, e, i) {
_i_("4ab:78");
var n = "";
if (i = i || {}, !e || 0 === e.length) return _r_(t);
for (var a = e.map(function(t) {
return _i_("4ab:354"), _r_(t.offset);
}), s = e.map(function(t) {
return _i_("4ab:355"), _r_(t.offset + t.length - 1);
}), o = 0; o < t.length; o++) -1 != a.indexOf(o) && (n += "<b>"), n += t.charAt(o), -1 != s.indexOf(o) && (n += "</b>");
return i.encode && (n = B.jstmpl.fn.FILTERS.entities(n), n = n.replace(/&lt;b&gt;/g, "<b>"), n = n.replace(/&lt;&#47;b&gt;/g, "</b>")), _r_(n);
}
function M(t, e) {
_i_("4ab:79");
var i = [];
if (!e || 0 === e.length) return _r_([ {
text:t
} ]);
return e[0].offset && i.push({
text:t.substr(0, e[0].offset)
}), e.forEach(function(n, a) {
_i_("4ab:199");
var s = n.offset + n.length, o = (e[a + 1] && e[a + 1].offset || t.length) - s;
i.push({
highlighted:!0,
text:t.substr(n.offset, n.length)
}), o && i.push({
text:t.substr(s, o)
}), _r_();
}), _r_(i);
}
i.exports = n.extend({
init:function(t, e) {
_i_("4ab:356"), t = t || {};
var i = this, n = "booking-places";
if (!p()) return _r_();
if (this.initialized) return e && this.atlas && this.atlas.done(e), _r_();
this.initialized = !0;
var s = function(t) {
_i_("4ab:542");
var s = document.createElement("div"), o = "provider-google-places";
a.b_enable_mapbox_fallback && (o = u ? "provider-mapbox-places" :"provider-google-places"), i.atlas = new t({
provider:o,
modules:[ "autocomplete", "places" ],
options:{
domNode:s,
channel:n
}
}), e && i.atlas.done(e), _r_();
};
B.atlas.isAtlasAsync ? B.require([ "async-loader" ], function(t) {
_i_("4ab:569"), t.load({
js:"async_atlas_places_js"
}).then(function() {
_i_("4ab:626"), s(B.atlas.require("atlas-places")), _r_();
}), _r_();
}) :s(B.atlas.require("atlas-places")), _r_();
},
search:function(t, e) {
if (_i_("4ab:357"), !t || !t.ss || "function" != typeof e) throw new Error("service-atlas-invalid-arguments");
if (t.ss.length < _) return setTimeout(function() {
_i_("4ab:570"), e(new Error("service-atlas-too-short-search-string"), {}), _r_();
}, 4), _r_({
getDetails:$.noop,
abort:$.noop
});
if (!p()) return setTimeout(function() {
_i_("4ab:571"), e(new Error("service-atlas-no-atlas"), null), _r_();
}, 4), _r_({
getDetails:$.noop,
abort:$.noop
});
var i = !1, n = {
query:t.ss
};
s && o && r && (n.lat = s, n.lon = o, n.radius = r);
var a = function(n) {
_i_("4ab:543"), i || (n && Array.isArray(n) ? f(t, n, e) :e(new Error("service-atlas-invalid-results"), null)), _r_();
}, l = function(t) {
_i_("4ab:544"), i || e(new Error("service-atlas-error " + t), null), _r_();
};
this.init(t, function() {
_i_("4ab:572"), this.atlas.autocomplete(n, a, l), _r_();
}.bind(this));
var h = function() {
_i_("4ab:545"), i = !0, _r_();
};
return _r_({
getResultDetails:m.bind(this),
abort:h
});
}
}), _r_();
}), B.define("search/destination/service-booking", function(t, e, i) {
"use strict";
_i_("4ab:19");
var n = t("event-emitter"), a = B.env.b_sb_autocomplete_predictions_url, s = B.env.b_sb_autocomplete_predictions_method || "GET";
function o(t) {
return _i_("4ab:80"), t.term = t.ss, delete t.ss, _r_(t);
}
function r(t, e, i) {
_i_("4ab:81"), t && t.city ? t.__upa__ || 0 !== t.city.length || t.bbtoollocations && 0 !== t.bbtoollocations.length || t.theme && 0 !== t.theme.length || t.searches && 0 !== t.searches.length ? (t.city = t.city.map(function(e, i) {
return _i_("4ab:546"), !e.label && e.labels && (e.label = _(e.labels)), !e.labels || "zh" !== e.lc && "xt" !== e.lc && "ja" !== e.lc && "ko" !== e.lc || (e.label_blocks = l(e.labels)), e.ss = e.label, e.label_highlighted = e.label_highlighted || e.label, e.position = i, e._ef = e._ef || [], e._ef.push({
name:"ac_position",
value:i
}), e._ef.push({
name:"ac_langcode",
value:e.lc
}), t.__did_you_mean__ && (e._ef.push({
name:"suggested_term",
value:t.__did_you_mean__.suggestion
}), e._ef.push({
name:"suggestion_clicked",
value:1
})), _r_(e);
}), t.results = t.city, t.bbtoollocations && (t.results = t.bbtoollocations.map(function(t, e) {
return _i_("4ab:609"), delete t.label_highlighted, t.label_blocks = [ {
highlighted:1,
text:t.name
}, {
text:", "
}, {
text:t.address
} ], t.ss = t.name, t.latitude = t.place_id_lat, t.longitude = t.place_id_lon, t.position = e, t._ef = t._ef || [], t._ef.push({
name:"bbtoollocation",
value:"1"
}), _r_(t);
}).concat(t.results)), t.theme && (t.theme = t.theme.map(function(e, i) {
return _i_("4ab:573"), e.ss = e.label, e._ef = e._ef || [], e._ef.push({
name:"ac_position",
value:i + t.city.length
}), _r_(e);
}), t.theme.length && e.limitOneTheme && (t.theme = [ t.theme[0] ]), t.results = t.results.concat(t.theme)), t._ef = t._ef || [], t._ef.push({
name:"search_pageview_id",
value:B.env.pageview_id
}), t._ef.push({
name:"ac_suggestion_list_length",
value:t.city.length
}), t._ef.push({
name:"ac_suggestion_theme_list_length",
value:t.theme ? t.theme.length :0
}), t._efd = t._efd || [], i(null, t)) :i(new Error("service-booking-no-results"), t) :i(new Error("service-booking-data-invalid"), null), _r_();
}
function _(t) {
return _i_("4ab:82"), _r_(t.map(function(t) {
return _i_("4ab:502"), _r_(t.text);
}).join(", "));
}
function l(t) {
_i_("4ab:83");
var e = [];
return t.forEach(function(t, i) {
_i_("4ab:200"), i > 0 && e.push({
text:", "
}), e.push({
highlighted:!!t.hl,
text:t.text
}), _r_();
}), _r_(e);
}
i.exports = n.extend({
search:function(t, e) {
if (_i_("4ab:358"), !t || !t.ss || "function" != typeof e) throw new Error("Invalid arguments");
var i = o(t);
this.emit("beforeajax", t, i);
var n = $.ajax({
type:s,
url:a,
data:i,
success:function(i, n, a) {
_i_("4ab:617"), r(i, t, e), _r_();
}.bind(this),
error:function(t, i, n) {
if (_i_("4ab:618"), "error" === i && 405 === t.status) {
var a = window.location.href;
if (("www" === B.env.b_site_type && B.et.stage("bLEGPBDDPJRZYfFcVWcUXSEHT", 1) && B.et.track("bLEGPBDDPJRZYfFcVWcUXSEHT") || "mdot" === B.env.b_site_type && B.et.stage("bLEBESfPYPadUVZdIaNTXbFEO", 1) && B.et.track("bLEBESfPYPadUVZdIaNTXbFEO")) && a.indexOf("page_reload") < 0) {
var s = 2e3;
"mdot" === B.env.b_site_type && (s = 1e3), a += a.indexOf("?") > -1 ? "&page_reload=1" :"?page_reload=1";
var o = B.jstmpl.translations("search_sbox_abandoned_search_open_tab_message"), r = B.jstmpl.translations("search_sbox_abandoned_search_open_tab_message_refresh_cta");
$("body").append($("<div class='sb-lightbox-brick-error'><p>" + o + "<br><br><a class='btn btn-primary' href='" + a + "'>" + r + "</a></p></div>")), setTimeout(function() {
_i_("4ab:633"), window.location.href = a, _r_();
}, s);
}
}
"abort" !== i && e(new Error("service-booking-error " + n), null), _r_();
}.bind(this)
}), _ = function() {
_i_("4ab:547"), n && n.abort && n.abort(), _r_();
};
return _r_({
abort:_
});
},
getSuggestions:function(t, e) {
_i_("4ab:359");
var i = B.env.search_autocomplete_params, n = 0, a = "";
if (e && e.searchHistory && B.env.b_ac_search_history) return t(!1, {
results:B.env.b_ac_search_history
}), _r_();
"searchresults" === B.env.b_action && (a = B.search.dates("checkin"), a = "valid" === a.type ? a.toString() :""), i = Object.assign({}, i, {
ttype:n,
checkin:a
});
var s = $.ajax({
type:"get",
url:"/search_history_and_suggestions",
data:i,
success:function(e, i, n) {
_i_("4ab:596"), t(null, e), _r_();
},
error:function(e, i, n) {
if (_i_("4ab:597"), "abort" === i) return _r_();
t(new Error("service-booking-error " + n), null), _r_();
}
}), o = function() {
_i_("4ab:548"), s && s.abort && s.abort(), _r_();
};
return _r_({
abort:o
});
}
}), _r_();
}), B.define("search/destination/service-carrier", function(t, e, i) {
"use strict";
_i_("4ab:20");
var n = t("event-emitter"), a = B.env.b_sb_googleplaces_carrier_url, s = B.env.b_sb_googleplaces_carrier_method || "POST";
function o(t) {
return _i_("4ab:84"), _r_({
ss:t.ss,
languagecode:t.lang
});
}
function r(t, e, i) {
if (_i_("4ab:85"), t && t.length) {
t = t.filter(function(t) {
if (_i_("4ab:506"), !t) return _r_(!1);
return t.place_type - t.place_type || "", t._ef = [], _r_(t);
});
var n = {
results:t,
is_powered_by_google:1
};
i(null, n);
} else i(new Error("service-booking-data-invalid"), null);
_r_();
}
i.exports = n.extend({
search:function(t, e) {
if (_i_("4ab:360"), !t || !t.ss || "function" != typeof e) throw new Error("Invalid arguments");
var i = o(t);
this.emit("beforeajax", t, i);
var n = $.ajax({
type:s,
url:a,
data:JSON.stringify(i),
xhrFields:{
withCredentials:!0
},
crossDomain:!0,
success:function(i, n, a) {
_i_("4ab:619"), r(i, t, e), _r_();
}.bind(this),
error:function(t, i, n) {
_i_("4ab:620"), "abort" !== i && e(new Error("service-booking-error " + n), null), _r_();
}.bind(this)
}), _ = function() {
_i_("4ab:549"), n && n.abort && n.abort(), _r_();
};
return _r_({
abort:_
});
},
getSuggestions:function(t, e) {
_i_("4ab:361");
var i = B.env.search_autocomplete_params, n = 0, a = "";
if (e && e.searchHistory && B.env.b_ac_search_history) return t(!1, {
results:B.env.b_ac_search_history
}), _r_();
"searchresults" === B.env.b_action && (a = B.search.dates("checkin"), a = "valid" === a.type ? a.toString() :""), i = Object.assign({}, i, {
ttype:n,
checkin:a
});
var s = $.ajax({
type:"get",
url:"/search_history_and_suggestions",
data:i,
success:function(e, i, n) {
_i_("4ab:598"), t(null, e), _r_();
},
error:function(e, i, n) {
if (_i_("4ab:599"), "abort" === i) return _r_();
t(new Error("service-booking-error " + n), null), _r_();
}
}), o = function() {
_i_("4ab:550"), s && s.abort && s.abort(), _r_();
};
return _r_({
abort:o
});
}
}), _r_();
}), B.define("component/search/destination/input-shadow-autocomplete", function(t, e, i) {
"use strict";
_i_("4ab:21");
var n = t("jquery"), a = t("component/search/destination/input");
i.exports = a.extend({
init:function() {
_i_("4ab:362"), a.prototype.init.apply(this, arguments), this.shadowItem = null, this.lang = B.env.b_lang, this.isRtl = "he" == B.env.b_lang || "ar" == B.env.b_lang, this.inputWidth = this.$input.outerWidth(), this.$shadowParent = this.$input.parent(), this.$shadowParent.addClass("c-autocomplete--shadow"), this.$inputShadow = n("<div />", {
"class":this.$input.attr("class")
}), this.$inputShadow.insertBefore(this.$input), n(window).on("resize", this.windowResize.bind(this)), this.windowResize(), _r_();
},
adjustWidth:function() {
_i_("4ab:363"), this.undoShadowParentWidth();
var t = this.$shadowParent.outerWidth();
this.$shadowParent.css("max-width", t + "px"), _r_();
},
addInputEventListeners:function() {
_i_("4ab:364"), a.prototype.addInputEventListeners.apply(this, arguments), this.$input.on("input", this.populateShadowInput.bind(this)), _r_();
},
onBlurAndEnter:function() {
_i_("4ab:365"), null !== this.shadowItem && this.choose(this.shadowItem), this.resetShadow(), _r_();
},
inputEnter:function(t) {
_i_("4ab:366"), a.prototype.inputEnter.apply(this, arguments), this.onBlurAndEnter(), _r_();
},
inputBlurSync:function(t) {
_i_("4ab:367"), a.prototype.inputBlurSync.apply(this, arguments), this.preventBlurClose || this.onBlurAndEnter(), this.undoShadowParentWidth(), _r_();
},
inputKeyUp:function(t) {
_i_("4ab:368"), a.prototype.inputKeyUp.apply(this, arguments);
var e = 39 == t.which;
e && this.onBlurAndEnter(), _r_();
},
inputFocus:function() {
_i_("4ab:369"), this.adjustWidth(), a.prototype.inputFocus.apply(this, arguments), _r_();
},
listItemClick:function(t) {
_i_("4ab:370"), a.prototype.listItemClick.apply(this, arguments), this.resetShadow(), _r_();
},
render:function(t, e) {
_i_("4ab:371"), a.prototype.render.apply(this, arguments), this.populateShadowInput(), _r_();
},
resetShadow:function() {
_i_("4ab:372"), this.shadowItem = null, this.$inputShadow.html(""), _r_();
},
populateShadowInput:function() {
_i_("4ab:373");
var t = this.$input.val(), e = "", i = null;
this.results && t && this.results.forEach(function(n, a) {
_i_("4ab:610"), !e && n.label && 0 == n.label.toLowerCase().indexOf(t.toLowerCase()) && (!this.isRtl || this.isRtl && n.lc == this.lang) && (e = n.label.slice(t.length), e = '<span style="color: transparent;">' + t + "</span>" + e, i = a), _r_();
}.bind(this)), this.shadowItem = i, this.$inputShadow.html(e), _r_();
},
setValue:function() {
_i_("4ab:374"), a.prototype.setValue.apply(this, arguments), this.populateShadowInput(), _r_();
},
undoShadowParentWidth:function() {
_i_("4ab:375"), this.$shadowParent.css("max-width", "none"), _r_();
},
windowResize:function() {
_i_("4ab:376"), this.$input.is(":focus") && this.adjustWidth(), _r_();
}
}), _r_();
}), B.define("component/search/travel-purpose/checkbox", function(t, e, i) {
"use strict";
_i_("4ab:22");
var n = t("component"), a = t("search/searchbox/model");
i.exports = n.extend({
init:function() {
_i_("4ab:377"), this.$form = this.$el.closest("form"), this.$checkbox = this.$el.find("[name=sb_travel_purpose]"), this.profileSplitAccounts = B.env.b_connected_user_accounts, this.formAction = this.$form.attr("action"), this.model = a.getInstance(this.$form.attr("data-sb-id")), this.searchedBusiness = !1, this.$checkbox.length && "checked" === this.$checkbox[0].getAttribute("checked") && (this.searchedBusiness = !0), (this.searchedBusiness || this.profileSplitAccounts) && this.bindEvents(), _r_();
},
bindEvents:function() {
_i_("4ab:378"), this.$checkbox.on("change", this.handleCheckboxChange.bind(this)), _r_();
},
handleCheckboxChange:function() {
_i_("4ab:379"), this.$checkbox.prop("checked") ? (this.$hidden && (this.$hidden.remove(), this.$checkbox[0].setAttribute("name", "sb_travel_purpose")), this.createRedirectFormFields()) :(this.$hidden = $('<input name="sb_travel_purpose" value="leisure" type="hidden" />').appendTo(this.$el), this.$checkbox[0].setAttribute("name", "h_sb_travel_purpose"), this.createRedirectFormFields()), _r_();
},
createRedirectFormFields:function() {
if (_i_("4ab:380"), !this.profileSplitAccounts || !this.profileSplitAccounts.length || !B.env.feature_profile_split_sb_checkbox) return _r_();
this.model.setFields("bnss", []), this.model.trigger("change", {});
var t = this.findAccountType(this.$checkbox.prop("checked")), e = this.formAction, i = B.env.b_secure_domain + this.$el.attr("data-profile-switch-url");
-1 === e.indexOf(B.env.b_nonsecure_hostname) && (e = B.env.b_nonsecure_hostname + e), e += -1 === e.indexOf("?") ? +this.$form.serialize() :"&" + this.$form.serialize(), this.model.setFields("bnss", [ {
type:"hidden",
name:"redirect_url",
value:e
}, {
type:"hidden",
name:"switch_to_user_id",
value:t.b_user_id
} ]), this.$form.attr("method", "POST"), this.model.setFormAction(i), this.model.trigger("change", {}), _r_();
},
findAccountType:function(t) {
_i_("4ab:381");
var e, i, n;
for (e = 0, i = this.profileSplitAccounts.length; i > e; ++e) "business" === this.profileSplitAccounts[e].b_type && t ? n = this.profileSplitAccounts[e] :"business" === this.profileSplitAccounts[e].b_type || t || (n = this.profileSplitAccounts[e]);
return _r_(n);
}
}), _r_();
}), B.define("component/search/dates/date-field", function(t, e, i) {
"use strict";
_i_("4ab:23");
var n = t("caret"), a = t("component"), s = t("formatting/date"), o = t("keycodes"), r = t("read-data-options"), _ = t("ga-tracker"), l = t("search/searchbox/model");
i.exports = a.extend({
init:function() {
_i_("4ab:382"), this.options = r(this.el, {
forceInitRender:{
name:"force-init-render",
type:Boolean,
defaultValue:!1
},
modelId:{
name:"sb-id",
type:String,
required:!0
},
modelMode:{
name:"mode",
type:String,
defaultValue:"single"
},
validators:{
name:"validators",
type:String,
defaultValue:""
}
});
var t = this.options.validators.split(",");
this.model = l.getInstance(this.options.modelId), this.model.use("dates"), this.model.on("change", this.modelChange.bind(this)), this.model.dates.configure({
noValidation:!0,
allowMaxLos:!0,
notEmpty:t.indexOf("not-empty") >= 0
}), this.$display = this.$el.find("[data-display]"), this.$inputs = this.$el.find("[data-input]"), this.$inputYear = this.$inputs.filter('[data-input-fragment="year"]'), this.$inputMonth = this.$inputs.filter('[data-input-fragment="month"]'), this.$inputDay = this.$inputs.filter('[data-input-fragment="day"]'), this.$controls = this.$el.find("[data-controls]"), this.$iconDay = this.$el.find("[data-icon-day]"), this.$field = this.$el.find("[data-field]"), this.$controls.on("mousedown", this.controlsMouseDown.bind(this)), this.$inputs.on("focus", this.inputFocus.bind(this)), this.$inputs.one("focus", this.inputFocusTrack.bind(this)), this.$inputs.on("blur", this.inputBlur.bind(this)), this.$inputs.on("keydown", this.inputKeyDown.bind(this)), this.$inputs.on("keyup", this.inputKeyUp.bind(this)), this.$inputs.on("keypress", this.inputKeyPress.bind(this)), B.eventEmitter.on("CALENDAR:shown CALENDAR:closed", this.updateFocusClass.bind(this)), this.previousState = {}, this.state = {
editing:!1,
currentField:null
}, this.checkDateFields(), this.initModel(), _r_();
},
checkDateFields:function() {
_i_("4ab:383");
var t, e;
this.$inputYear.length && this.$inputMonth.length && this.$inputDay.length || (t = this.model.dates.getFallbackDates(this.options.modelMode), 0 === this.$inputYear.length && (e = t.year || "", this.$inputYear = this.createDateInputField(this.options.modelMode + "_year", e).appendTo(this.el), setTimeout(function() {
throw _i_("4ab:611"), Error("Date input field year was not found in " + B.env.b_action + " action");
}, 0)), 0 === this.$inputMonth.length && (e = t.month || "", this.$inputMonth = this.createDateInputField(this.options.modelMode + "_month", e).appendTo(this.el), setTimeout(function() {
throw _i_("4ab:612"), Error("Date input field month was not found in " + B.env.b_action + " action");
}, 0)), 0 === this.$inputDay.length && (e = t.day || "", this.$inputDay = this.createDateInputField(this.options.modelMode + "_monthday", e).appendTo(this.el), setTimeout(function() {
throw _i_("4ab:613"), Error("Date input field day was not found in " + B.env.b_action + " action");
}, 0))), _r_();
},
createDateInputField:function(t, e) {
return _i_("4ab:384"), _r_($("<input>").attr({
type:"hidden",
name:t,
value:e
}).val(e));
},
initModel:function() {
_i_("4ab:385");
var t = !1, e = this.$inputYear.val(), i = this.$inputMonth.val(), n = this.$inputDay.val();
e && i && n ? (t = this.model.dates.initDate(this.options.modelMode, {
year:+e,
month:+i - 1,
day:+n
}), this.$field.hasClass("-empty") && "index" === B.env.b_action && this.render()) :t = this.model.dates.initDate(this.options.modelMode, null), (!t || this.options.forceInitRender) && this.render(), _r_();
},
modelChange:function(t) {
if (_i_("4ab:386"), "dates" !== t.group || !t[this.options.modelMode]) return _r_();
this.render(), _r_();
},
controlsMouseDown:function(t) {
_i_("4ab:387"), this.inputBlurPrevented = !0, setTimeout(function() {
_i_("4ab:574"), this.inputBlurPrevented = !1, _r_();
}.bind(this)), _r_();
},
inputFocus:function(t) {
_i_("4ab:388"), clearTimeout(this.inputBlurTimer), this.state.editing = !0, this.state.currentField = t.target.getAttribute("data-input-fragment"), this.startEditing(), this.updateFocusClass(), _r_();
},
inputFocusTrack:function() {
_i_("4ab:389"), _.trackEvent(_.SearchBoxTracker, "Keyboard Focus", this.options.modelMode + " field"), B.et.stage("OTfdASFVFYBMFSIJWe", 1), _r_();
},
inputBlur:function(t) {
_i_("4ab:390");
var e = t.target, i = e.getAttribute("data-input-fragment");
this.inputBlurPrevented || (this.state.editing = !1, this.state.currentField = null), this.setDateFragment(i, e.value), this.inputBlurTimer = setTimeout(function() {
_i_("4ab:600"), this.apply(), this.updateFocusClass(), _r_();
}.bind(this)), _r_();
},
inputKeyDown:function(t) {
_i_("4ab:391");
var e = t.target, i = e.getAttribute("data-input-fragment");
if (o.isModifier(t.which)) return _r_();
o.isUpArrow(t.which) ? (this.adjustDateFragment(i, e.value, 1), t.preventDefault()) :o.isDownArrow(t.which) ? (this.adjustDateFragment(i, e.value, -1), t.preventDefault()) :o.isLeftArrow(t.which) || o.isBackspace(t.which) ? this.inputMoveAdjacent(t, -1, {
backspace:o.isBackspace(t.which)
}) :o.isRightArrow(t.which) && this.inputMoveAdjacent(t, 1), _r_();
},
inputKeyUp:function(t) {
_i_("4ab:392");
var e = t.target;
if (o.isModifier(t.which)) return _r_();
!o.isNavigation(t.which) && !o.isDeletion(t.which) && e.value.length >= Math.floor(e.getAttribute("maxlength")) && this.inputMoveAdjacent(t, 1, {
automatic:!0
}), _r_();
},
inputMoveAdjacent:function(t, e, i) {
_i_("4ab:393");
var a, s, o = t.target, r = this.$inputs.length, _ = n.getPosition(o), l = 0, h = this.$inputs.filter(o).index(), d = r - 1, i = i || {};
if (e > 0 && (l = o.value.length, d = 0), i.automatic && h == r - 1) return _r_();
if (!i.force && n.getSelectionLength(o)) return _r_();
(i.force || _ == l) && (h += e, (0 > h || h > r - 1) && (h = d), a = this.$inputs.get(h), i.automatic && a.value.length ? a.select() :(s = e > 0 ? 0 :a.value.length, n.setPosition(a, s), i.backspace || t.preventDefault())), _r_();
},
inputKeyPress:function(t) {
_i_("4ab:394"), t.keyCode && o.isNavigation(t.keyCode) || !(t.which < 48 || t.which > 57) || (this.inputMoveAdjacent(t, 1, {
automatic:!0,
force:!0
}), t.preventDefault()), _r_();
},
startEditing:function() {
_i_("4ab:395"), setTimeout(function() {
_i_("4ab:575"), this.model.dates.startEditing(), _r_();
}.bind(this)), this.render(), _r_();
},
setDateFragment:function(t, e) {
_i_("4ab:396"), e = "" === e ? null :+e, "month" === t && null !== e && (e -= 1), this.model.dates.setEditingFragment(this.options.modelMode, t, e), _r_();
},
adjustDateFragment:function(t, e, i) {
_i_("4ab:397"), e = "" === e ? 0 :+e, "month" === t && (e -= 1), this.model.dates.adjustEditingFragment(this.options.modelMode, t, e, i), _r_();
},
apply:function() {
_i_("4ab:398"), this.model.dates.applyEditing(this.options.modelMode), _r_();
},
render:function() {
_i_("4ab:399");
var t = this.$field.hasClass("-editing"), e = this.model.dates.get(), i = this.$inputYear.val(), n = this.$inputMonth.val(), a = this.$inputDay.val(), o = e[this.options.modelMode], r = e["editing_" + this.options.modelMode] || {}, _ = r.year, l = r.month, h = r.day, d = "date_with_weekday";
i = "" === i ? null :+i, n = "" === n ? null :+n, a = "" === a ? null :+a, _ = "number" == typeof _ ? _ :null, l = "number" == typeof l ? l + 1 :null, h = "number" == typeof h ? h :null, t != this.state.editing && (t = this.state.editing, this.$field.toggleClass("-editing", t)), i !== _ && (this.$inputYear.val(_), "year" === this.state.currentField && this.$inputYear.select()), n !== l && (this.$inputMonth.val(l), "month" === this.state.currentField && this.$inputMonth.select()), a !== h && (this.$inputDay.val(h), "day" === this.state.currentField && this.$inputDay.select()), t || o || (this.$field.addClass("-empty"), this.$display.html(this.$display.attr("data-placeholder")), this.$iconDay.html(this.$iconDay.attr("data-placeholder"))), !t && o && (this.$field.removeClass("-empty"), d = this.$display.data("date-format") || d, this.$display.html(s.format(o, d)), this.$iconDay.html(s.format(o, "{day_of_month}"))), _r_();
},
updateFocusClass:function() {
_i_("4ab:400"), setTimeout(function() {
_i_("4ab:576");
var t = this.$el.parent(), e = this.state.editing, i = !t.hasClass("c2-wrapper-s-hidden");
e || i ? this.$el.addClass("-focus") :this.$el.removeClass("-focus"), _r_();
}.bind(this), 100), _r_();
}
}), _r_();
}), B.define("search/dates/util", function(t, e, i) {
_i_("4ab:24"), i.exports = {
formatDate:function(t) {
_i_("4ab:202");
var e = new Date(t), i = "" + (e.getMonth() + 1), n = "" + e.getDate(), a = e.getFullYear();
return i.length < 2 && (i = "0" + i), n.length < 2 && (n = "0" + n), _r_([ a, i, n ].join("-"));
},
addDay:function(t) {
_i_("4ab:203");
var e = new Date(t);
return e.setDate(e.getDate() + 1), _r_(e);
},
substractDay:function(t) {
_i_("4ab:204");
var e = new Date(t);
return e.setDate(e.getDate() - 1), _r_(e);
},
daysBetween:function(t, e) {
_i_("4ab:205"), t = new Date(t), e = new Date(e);
var i = 864e5, n = t.getTime(), a = e.getTime(), s = Math.abs(n - a);
return _r_(Math.round(s / i));
}
}, _r_();
}), B.define("component/search/dates/dates-errors", function(t, e, i) {
"use strict";
_i_("4ab:25");
var n = t("component"), a = t("jstmpl"), s = t("read-data-options"), o = t("search/searchbox/model");
i.exports = n.extend({
init:function() {
_i_("4ab:401"), this.options = s(this.el, {
modelId:{
name:"sb-id",
type:String,
required:!0
}
}), this.model = o.getInstance(this.options.modelId), this.model.use("dates"), this.model.on("validation", this.modelValidation.bind(this)), this.template = a("fe_search_dates_errors"), _r_();
},
modelValidation:function(t) {
if (_i_("4ab:402"), "dates" !== t.group) return _r_();
var e = s(this.el, {
viewId:{
name:"view-id",
type:String,
defaultValue:""
}
});
t.valid ? this.$el.html("") :this.$el.html(this.template.render({
fe_error:t.validationError,
fe_new:!0,
fe_view:e.viewId
})), _r_();
}
}), _r_();
}), booking.jstmpl("search_dates_length_of_stay", function() {
_i_("4ab:46");
var t, e = [ "\n		", "\n\n", "\n\n    ", "\n        ", "\n    ", '\n\n    <div\n      class="sb-dates__los\n      ', " sb-dates__los--bold\n      ", '\n      ">\n\n      \n      ', '\n          <i class="bicon bicon-halfmoon sb_dates__los__icon"></i>\n          <span class="sb-dates__los__text">\n      ', "\n\n        ", "\n          ", "/private/bh_gf_sbox_general_dates_num_nights_1/name", "/private/sbox_general_dates_num_nights_1/name", "\n      ", "\n         </span>\n      ", "\n    </div>\n", '\n    <div class="sb-dates--los-placeholder"></div>\n', "\n" ], i = [ "b_action", "fe_sb_los_bold", "fe_sb_state_length_of_stay", "fe_is_family", "b_search_config" ];
return _r_(function(n) {
_i_("4ab:118");
var a = "", s = this.fn;
function o(a) {
return _i_("4ab:206"), a += e[1], s.MJ(s.MB(i[2])) ? (a += e[2], s.MJ(s.MB(i[1]) + "" == "") && (a += e[3], s.MN("fe_sb_los_bold", s.MJ(s.MC(i[0]) + "" == "hotel") && s.track_experiment("AEJPOTIKSBOEQC")), a += e[4]), a += e[5], s.MD(i[1]) && (a += e[6]), a += e[7], s.MD(i[1]) && (a += e[8]), a += e[9], a += s.MJ(s.MB(i[3])) || s.MJ(s.MC(i[4])) && s.MJ(s.MC(i[4]).b_children_total) ? [ e[10], (n.unshift({
num_nights:s.MB(i[2])
}), t = s.ME(e[11], s.MB, s.MN, s.MO(s.MC(i[2]), null, e[11])), n.shift(), t), e[3] ].join("") :[ e[10], (n.unshift({
num_nights:s.MB(i[2])
}), t = s.ME(e[12], s.MB, s.MN, s.MO(s.MC(i[2]), null, e[12])), n.shift(), t), e[3] ].join(""), a += e[13], s.MD(i[1]) && (a += e[14]), a += e[15]) :a += e[16], a += e[17], _r_(a);
}
return a += e[0], a = o(a), a += e[4], _r_(a);
});
}()), B.define("component/search/dates/length-of-stay", function(t, e, i) {
_i_("4ab:26");
var n = t("calendar-base").Calendar, a = t("component"), s = t("read-data-options"), o = t("search/searchbox/model");
i.exports = a.extend({
init:function() {
_i_("4ab:403"), this.options = s(this.$el, {
modelId:{
name:"sb-id",
type:String,
required:!0
},
isAvailability:{
name:"is-availability",
type:Boolean
}
}), this.model = o.getInstance(this.options.modelId), this.model.use("dates"), this.model.use("group"), this.model.on("change", this.modelChange.bind(this)), this.state = {};
var t = "hotel" === B.env.b_action && B.et.track("AEJPOTIKSBOEQC");
if (t && (this.state.fe_sb_los_bold = 1), this.template = B.jstmpl("search_dates_length_of_stay"), this.shouldStylePredictor = "airport" === B.env.b_action || "city" === B.env.b_action || "continent" === B.env.b_action || "country" === B.env.b_action || "district" === B.env.b_action || "landmark" === B.env.b_action || "region" === B.env.b_action, this.shouldStylePredictor && B.et.track("HINPScAESfHRdZdCXAYXHIWe")) {
this.$el.on("click", this.modelClicked.bind(this));
var e = this.$el.prevObject.parents("form:eq(0)").find(".los-placeholder");
e.on("click", this.modelClicked.bind(this));
var i = this.$el.prevObject.parents("form:eq(0)").find(".sb-dates"), n = !1, a = function() {
_i_("4ab:577"), n || (window.hj("trigger", "AdminHotjarRec"), window.hj("tagRecording", [ "los-predictor" ]), n = !0), _r_();
};
i.on("mouseenter", a);
}
_r_();
},
modelChange:function(t) {
if (_i_("4ab:404"), !t || "dates" != t.group && "group" != t.group) return _r_();
this.render(), _r_();
},
modelClicked:function(t) {
_i_("4ab:405");
var e = this.$el.prevObject.parents("form:eq(0)").find('[data-calendar2-type="checkout"]');
e.next(".c2-calendar").length || e.trigger("mouseenter.calendar2"), setTimeout(function() {
_i_("4ab:551");
var t = e.next(".c2-calendar");
t.length && t.trigger("showCalendar"), _r_();
}, 300), B.et.customGoal("HINPScAESfHRdZdCXAYXHIWe", 5), _r_();
},
render:function() {
_i_("4ab:406");
var t = this.model.dates.get(), e = this.model.group.get();
this.state.fe_is_family = e.children_ages && e.children_ages.length > 0 ? 1 :0, this.state.fe_is_availability = this.options.isAvailability, this.state.fe_sb_state_length_of_stay = !t.editing && t.checkin && t.checkout && n.diff(t.checkout, t.checkin) > 0 ? n.interval(t.checkin, t.checkout) - 1 :"", this.$el.html(this.template.render(this.state)), _r_();
}
}), _r_();
}), B.define("search/dates/date-public-holidays", function(t, e, i) {
_i_("4ab:27");
var n = t("component"), a = t("fragment"), s = t("search/dates/util"), o = {}, r = "AEJPAaNCWQQDQZJZGZVSBYQeRe", _ = null;
booking.jstmpl("search_calendar_date_public_holidays", function() {
_i_("4ab:138");
var t, e = [ "\n		", '<div class="sb-date-public-holidays">\n	<i class="sb-date-public-holidays__indicator"></i>\n	<span class="sb-date-public-holidays__single hidden">\n		', "/private/lp_sb_calendar_dates_public_holiday_one_date/name", '\n	</span>\n	<span class="sb-date-public-holidays__multiple hidden">\n		', "/private/lp_sb_calendar_dates_public_holiday_multiple/name", "\n	</span>\n</div>", "\n	" ], i = [ "country_name", "country_name_in" ];
return _r_(function(n) {
_i_("4ab:504");
var a = "", s = this.fn;
function o(a) {
return _i_("4ab:520"), a += [ e[1], (n.unshift({
country_name:s.MB(i[0]),
country_name_in:s.MB(i[1])
}), t = s.ME(e[2], s.MB, s.MN, null), n.shift(), t), e[3], (n.unshift({
country_name:s.MB(i[0]),
country_name_in:s.MB(i[1])
}), t = s.ME(e[4], s.MB, s.MN, null), n.shift(), t), e[5] ].join(""), _r_(a);
}
return a += e[0], a = o(a), a += e[6], _r_(a);
});
}());
var l = n.extend({
init:function(t) {
_i_("4ab:407"), !this.model && t.model && (this.model = t.model), B.eventEmitter.on("CALENDAR:shown", this.onCalendarShown.bind(this)), B.eventEmitter.on("CALENDAR:nextclick", this.onCalendarNextClick.bind(this)), B.eventEmitter.on("CALENDAR:previousclick", this.onCalendarNextClick.bind(this)), this.model.on("init", this.onCalendarRangeSelected.bind(this)), this.model.on("change", this.onCalendarRangeSelected.bind(this)), _r_();
},
onCalendarShown:function(t, e) {
if (_i_("4ab:408"), !e || !e.instance || !e.instance.options) return _r_();
this.getPublicHolidays().then(this.render.bind(this, e)), _r_();
},
onCalendarNextClick:function(t, e) {
if (_i_("4ab:409"), !e || !e.instance || !e.instance.options) return _r_();
this.getPublicHolidays().then(this.updateLegend.bind(this, e)), _r_();
},
onCalendarPrevClick:function(t, e) {
if (_i_("4ab:410"), !e || !e.instance || !e.instance.options) return _r_();
this.getPublicHolidays().then(this.updateLegend.bind(this, e)), _r_();
},
onCalendarRangeSelected:function() {
_i_("4ab:411");
var t = this.model.dates.get();
if (!t.checkin || !t.checkout) return _r_();
var e = t.checkin.toNative().getTime(), i = t.checkout.toNative().getTime();
this.getPublicHolidays().then(function(t) {
_i_("4ab:552");
for (var n = 0; n < t.length; n++) {
var a = t[n].getTime(), s = a >= e && i >= a;
if ($(".contains_public_holiday_input").val(s ? 1 :0), s) break;
}
_r_();
}), _r_();
},
getPublicHolidays:function() {
return _i_("4ab:412"), null === _ && (_ = this.requestPublicHolidays()), _r_(_);
},
requestPublicHolidays:function() {
_i_("4ab:413");
var t = B.env.ip_country, e = B.calendar2.checkinOptions, i = e.startDate, n = e.endDate;
if (!(t || i || n)) return _r_();
var o = {
cc1:t,
start_date:s.formatDate(i),
end_date:s.formatDate(n)
};
return _r_(a.call("lp.public_holidays_dates_for_country", o).then(this.normalize.bind(this)));
},
normalize:function(t) {
_i_("4ab:414");
for (var e = [], i = 0; i < t.length; i++) e.push(new Date(t[i]));
return _r_(e);
},
updateLegend:function(t, e) {
_i_("4ab:415");
for (var i = t.instance.$element, n = 0, a = [], s = t.instance.getVisibleMonths(), o = 0; o < s.length; o++) {
var _ = t.instance.months[s[o]];
a.push(_);
}
for (var o = 0; o < e.length; o++) for (var l = e[o], h = 0; h < a.length; h++) {
var _ = a[h];
l.getMonth() === _.month_ && l.getFullYear() === _.year_ && n++;
}
if (n > 0 && B.et.stage(r, 1), 2 > this.model.getFlag("highlight_public_holidays")) return _r_();
if (!i.find(".sb-date-public-holidays").length) {
var d = B.jstmpl("search_calendar_date_public_holidays").render({
public_holidays_amount:n,
country_name:B.env.ph_guest_country_name,
country_name_in:B.env.ph_guest_country_name_in
});
i.find(".c2-calendar-footer").prepend(d);
}
i.find(".sb-date-public-holidays").toggleClass("hidden", 0 === n), i.find(".sb-date-public-holidays__single").toggleClass("hidden", n > 1), i.find(".sb-date-public-holidays__multiple").toggleClass("hidden", 2 > n), _r_();
},
render:function(t, e) {
_i_("4ab:416");
var i = t.instance.$screen;
if (2 === this.model.getFlag("highlight_public_holidays")) for (var n = 0; n < e.length; n++) {
var a = e[n], s = i.find("[data-id=" + a.getTime() + "]");
s.addClass("c2-day-public-holiday");
var o = s.prev(".c2-day-public-holiday");
o.length && (s.addClass("c2-day-public-holiday-ml"), o.addClass("c2-day-public-holiday-mr"));
}
t.instance.adjustHeight(!0), this.updateLegend(t, e), _r_();
}
});
i.exports = {
getInstance:function(t) {
return _i_("4ab:207"), t = t || "searchbox", o[t] || (o[t] = new l()), _r_(o[t]);
}
}, _r_();
}), B.define("search/dates/model", function(t, e, i) {
"use strict";
_i_("4ab:28");
var n = t("calendar-base").Calendar, a = t("search/modules/search-date").SearchDate, s = B.env.b_timestamp, o = B.env.sunday_first, r = B.env.b_search_max_months || 13;
function _(t) {
_i_("4ab:88"), this._model = t, this._data = {
initialized:!1,
checkin:null,
checkout:null,
firstValidDay:null,
lastValidDay:null,
editing:!1,
editing_checkin:null,
editing_checkout:null,
length_of_stay:null,
week_start:o ? 0 :1
}, this._valid = !0, this._validationError = "", this._options = {
maxLos:30,
maxMonths:r,
syncLegacy:!0
};
var e = new Date(1e3 * (s - 39600));
this._data.firstValidDay = a.create({
year:e.getUTCFullYear(),
month:e.getUTCMonth(),
day:e.getUTCDate()
}), this._data.lastValidDay = a.createFlexible({
year:e.getUTCFullYear(),
month:e.getUTCMonth() + this._options.maxMonths,
day:0
}), this._data.firstValidCheckoutDay = a.create({
year:e.getUTCFullYear(),
month:e.getUTCMonth(),
day:e.getUTCDate() + 1
}), this._options.syncLegacy && (this.boundLegacyDateChange = this.legacyDateChange.bind(this), B.eventEmitter.on(B.Search.Events.DATE_CHANGED, this.boundLegacyDateChange)), _r_();
}
$.extend(_.prototype, {
init:function(t) {
_i_("4ab:208");
var e = a.create(t.checkin), i = a.create(t.checkout);
this.validateDate("checkin", e).valid && this.validateDate("checkout", i, {
checkin:e
}).valid && (this.setDate("checkin", e, {
init:!0
}), this.setDate("checkout", i, {
init:!0
}), this.emit("init")), _r_();
},
configure:function(t, e) {
_i_("4ab:209");
var i = this._options.maxMonths, n = this._options.syncLegacy;
void 0 !== e ? this._options[t] = e :"object" == typeof t && $.extend(this._options, t), i != this._options.maxMonths && (this._data.lastValidDay = a.createFlexible({
year:this._data.firstValidDay.year,
month:this._data.firstValidDay.month + this._options.maxMonths,
day:0
})), n !== this._options.syncLegacy && B.eventEmitter[this._options.syncLegacy ? "on" :"off"](B.Search.Events.DATE_CHANGED, this.boundLegacyDateChange), _r_();
},
getOption:function(t) {
return _i_("4ab:210"), _r_(this._options[t]);
},
get:function() {
return _i_("4ab:211"), _r_(this._data);
},
initDate:function(t, e, i) {
_i_("4ab:212"), i = i || {}, i.init = !0;
var n = !1;
if (this._data.initialized) return _r_(!1);
return e && (n = this.setDate(t, e, i)), this["initialized" + t] = !0, this.initializedcheckin && this.initializedcheckout && (this.emit("init"), this._data.initialized = !0), _r_(n);
},
setDate:function(t, e, i) {
_i_("4ab:213"), i = i || {};
var s, o, r, _ = {};
if (e = a.create(e), !this._options.noValidation && !this.validateDate(t, e, {
loose:!0
}).valid) return _r_(!1);
if ("checkin" == t) this._data.checkin = e, o = !0, a.compare(this._data.checkin, this._data.firstValidDay) < 0 && (this._data.checkin = a.create(this._data.firstValidDay)), a.compare(this._data.checkin, this._data.lastValidDay) > 0 && (this._data.checkin = a.createFlexible({
year:this._data.lastValidDay.year,
month:this._data.lastValidDay.month,
day:this._data.lastValidDay.day - 1
})), this._data.checkout ? (s = n.diff(this._data.checkout, e), 0 >= s ? (this._data.checkout = a.createFlexible({
year:e.year,
month:e.month,
day:e.day + 1
}), r = !0) :!this._options.allowMaxLos && s > this._options.maxLos && (this._data.checkout = a.createFlexible({
year:e.year,
month:e.month,
day:e.day + this._options.maxLos
}), r = !0)) :(this._data.checkout = a.createFlexible({
year:e.year,
month:e.month,
day:e.day + 1
}), r = !0); else {
if ("checkout" != t) return _r_(!1);
this._data.checkout = e, r = !0, a.compare(this._data.checkout, this._data.lastValidDay) > 0 && (this._data.checkout = a.create(this._data.lastValidDay)), 0 == a.compare(this._data.checkout, this._data.firstValidDay) && (this._data.checkin = a.create(this._data.firstValidDay), this._data.checkout = a.createFlexible({
year:this._data.firstValidDay.year,
month:this._data.firstValidDay.month,
day:this._data.firstValidDay.day + 1
}), r = !0), this._data.checkin && (s = n.diff(e, this._data.checkin), 0 >= s && (this._data.checkin = null)), this._data.checkin || (this._data.checkin = a.createFlexible({
year:e.year,
month:e.month,
day:e.day - 1
}), o = !0);
}
return o && (this._options.syncLegacy && B.search.setDate_("checkin", this._data.checkin.toString(), {
referrer:"search/dates/model"
}), this._data.editing_checkin = this._data.checkin, _.checkin = !0), r && (this._options.syncLegacy && B.search.setDate_("checkout", this._data.checkout.toString(), {
referrer:"search/dates/model"
}), this._data.editing_checkout = this._data.checkout, _.checkout = !0), (o || r) && (this._data.length_of_stay = this._data.checkin && this._data.checkout && n.interval(this._data.checkin, this._data.checkout) - 1), this._data.editing = !1, i.init || this.emit("change", _), _r_(!0);
},
startEditing:function() {
if (_i_("4ab:214"), this._data.editing) return _r_();
this._data.editing = !0, this.emit("change", {
editing:!0
}), _r_();
},
setEditingFragment:function(t, e, i) {
if (_i_("4ab:215"), "checkin" !== t && "checkout" !== t) throw new TypeError("invalid type");
if ("day" !== e && "month" !== e && "year" !== e) throw new TypeError("invalid fragment");
if ("number" != typeof i && null !== i) throw new TypeError("invalid value");
var n = this._data["editing_" + t] || {}, s = {
year:n.year,
month:n.month,
day:n.day
}, o = {
editing:!0
};
return s[e] = i, this._data.editing = !0, this._data["editing_" + t] = a.create(s), o[t] = !0, this.emit("change", o), _r_(!0);
},
adjustEditingFragment:function(t, e, i, n) {
if (_i_("4ab:216"), "checkin" !== t && "checkout" !== t) throw new TypeError("invalid type");
if ("day" !== e && "month" !== e && "year" !== e) throw new TypeError("invalid fragment");
var a = 1, s = i + n;
return "month" == e ? a = 0 :"year" == e && (a = this._data.firstValidDay.year), a > s && (s = a), _r_(this.setEditingFragment(t, e, s));
},
applyEditing:function(t) {
if (_i_("4ab:217"), "checkin" !== t && "checkout" !== t) throw new TypeError("invalid type");
return this._data["editing_" + t].complete ? _r_(this.setDate(t, this._data["editing_" + t])) :(this.clearDates(), _r_(!0));
},
clearDates:function() {
_i_("4ab:218"), this._data.checkin = null, this._data.checkout = null, this._data.editing = !1, this._data.editing_checkin = null, this._data.editing_checkout = null, this._data.length_of_stay = null, this._options.syncLegacy && (B.search.setDate_("checkin", "", {
referrer:"search/dates/model"
}), B.search.setDate_("checkout", "", {
referrer:"search/dates/model"
})), this.emit("change", {
checkin:!0,
checkout:!0
}), _r_();
},
validate:function(t) {
_i_("4ab:219"), t = t || {};
var e = !0, i = "";
if (!e || !t.notEmpty || this._data.checkin && this._data.checkout || (e = !1, i = "missing-dates"), e && !this._data.checkin && this._data.checkout && (e = !1, i = "missing-checkin"), e && this._data.checkin && !this._data.checkout && (e = !1, i = "missing-checkout"), e && this._data.checkin) {
var n = this.validateDate("checkin", this._data.checkin);
n.valid || (e = n.valid, i = n.validationError);
}
if (e && this._data.checkout) {
var n = this.validateDate("checkout", this._data.checkout);
n.valid || (e = n.valid, i = n.validationError);
}
if (e && t.validateTime) {
var a = new Date(1e3 * B.env.b_timestamp), s = a.getUTCDate(), o = a.getUTCMonth(), r = a.getUTCFullYear(), _ = a.getHours() + 2;
(!this._data.checkin || this._data.checkin.year === r && this._data.checkin.month === o && this._data.checkin.day == s) && this._data.checkinTime <= _ && (e = !1, i = "past-time");
}
return t.checkOnly || this._valid == e || (this._valid = e, this._validationError = i, this.emit("validation", {
valid:e,
validationError:i
})), _r_(e);
},
validateDate:function(t, e, i) {
_i_("4ab:220"), i = i || {}, i.checkin = i.checkin || this._data.checkin;
var s = null;
if (!t || "checkin" != t && "checkout" != t) return _r_({
valid:!1,
validationError:"invalid-data"
});
if (!e || void 0 === e.year || void 0 === e.month || void 0 === e.day || isNaN(e.year) || isNaN(e.month) || isNaN(e.day)) return _r_({
valid:!1,
validationError:"invalid-data"
});
if ("checkin" == t && a.compare(e, this._data.firstValidDay) < 0 || "checkout" == t && 0 == a.compare(e, this._data.firstValidDay)) return _r_({
valid:!1,
validationError:"past"
});
if ("checkout" == t && i.checkin && (s = n.diff(e, i.checkin)), null !== s) {
if (0 == s) return _r_({
valid:!1,
validationError:"more-than-one-day"
});
if (0 > s) return _r_({
valid:!1,
validationError:"negative-period"
});
if (s > this._options.maxLos) return _r_({
valid:!1,
validationError:"exceeds-max-los"
});
}
return _r_({
valid:!0,
validationError:""
});
},
legacyDateChange:function(t, e) {
_i_("4ab:221");
var i, n;
if ("search/dates/model" == e.referrer) return _r_();
i = "checkin" == e.type ? "checkin" :"checkout", n = a.createFromString(e.value.toString()), this.setDate(i, n), _r_();
},
emit:function(t, e) {
_i_("4ab:222"), e = e || {}, this._model.emit(t, $.extend(e, {
group:"dates"
})), _r_();
},
getFallbackDates:function(t) {
_i_("4ab:223");
var e, i;
return i = "checkin" === t ? B.env.b_checkin_date :B.env.b_checkout_date, i && (i = i.split("-"), e = {
year:parseInt(i[2], 10),
month:parseInt(i[1], 10),
day:parseInt(i[0], 10)
}), _r_(e || {});
}
}), i.exports = _, _r_();
}), booking.jstmpl("fe_search_dates_errors", function() {
_i_("4ab:47");
var t = [ "\n	", "\n\n		", "\n			", "\n				", "/error/checkout_date_invalid/name", "/error/checkin_date_invalid/name", "/private/sbox_error_checkin_future/name", "/error/checkin_date_to_far_in_the_future/name", "/private/sbox_error_checkout_after/name", "/private/sbox_error_30_night_res/name", "\n		", "\n					", "/private/iq_sbox_error_flights_return_date_invalid/name", "/private/iq_sbox_error_flights_departure_date_invalid/name", "/private/iq_sbox_error_dates/name", "/private/iq_sbox_error_flights_departure_date_too_far_future/name", "/private/iq_sbox_error_flights_return_after_departure/name", "\n	\n		", "/private/iq_sbox_error_cars_arrival_date_invalid/name", "/private/iq_sbox_error_cars_departure_date_invalid/name", "/private/iq_sbox_error_cars_departure_date_too_far_future/name", "/private/iq_sbox_error_cars_arrival_after_departure/name", "/private/iq_sbox_error_cars_1_hour_future/name", "\n\n\n\n\n\n", "\n\n    ", "\n        ", "data-", '="', '"', "\n    ", " data-", '<div data-component="onview-animate" data-anim-type="fadeInBottom"> ', '<div class="fe_banner ', "fe_banner__scale_small ", "fe_banner__w-icon ", "fe_banner__w-dismiss ", "fe_banner__", " ", "fe_banner__w-icon-", "fe_banner__bp fe_banner__inherit_font_size ", ' " ', 'id="', '" ', 'role="alert"', "> ", '<i class="fe_banner__icon ', '" aria-hidden="true"></i> ', '<img class="fe_banner__icon" src="', '"> ', '<span class="fe_banner__icon"> ', " </span> ", '<div class="fe_banner__btn_container"> <div class="fe_banner__btn_container_content"> ', '<h3 class="fe_banner__title"> ', " </h3> ", '<div class="fe_banner__message ', "fe_banner__genius-trial", " </div> ", '</div> <div class="fe_banner__button"> ', "</div> ", '<span class="fe_banner__dismiss js-close"><i class="bicon-btnclose" aria-label="close"></i></span> ', '<form action="', "/genius_activate_trial", '" class="fe_banner__genius-banner-form" method="post"> <input type="hidden" name="return_url" value="', '"> <input type="hidden" name="src" value="hp_banner"> <input type="hidden" name="campaign_id" value="', '"> <input type="submit" class="button fe_banner__genius-banner-button" value="', '"> </form> ', "\n", "\n\n\n\n", "\n\n", "0", "red" ], e = [ "fe_error_message", "fe_error", "s_raw_param_errorc_checkout_date_invalid", "s_raw_param_errorc_checkin_date_invalid", "s_raw_param_errorc_checkin_date_in_the_past", "s_raw_param_errorc_checkin_date_to_far_in_the_future", "s_raw_param_errorc_checkout_date_not_after_checkin_date", "s_raw_param_errorc_checkout_date_more_than_30_days_after_checkin", "fe_view", "fe_banner__data", "fe_banner__data_id", "fe_banner__data_value", "fe_banner__data_id_2", "fe_banner__data_value_2", "fe_banner__data_id_3", "fe_banner__data_value_3", "fe_banner__data_id_4", "fe_banner__data_value_4", "fe_banner__data_id_5", "fe_banner__data_value_5", "fe_banner__animate", "fe_banner__scale", "fe_banner__icon_class", "fe_banner__icon_img_url", "fe_banner__icon_svg", "fe_banner__close_button", "fe_banner__color_scheme", "fe_banner__color_scheme_classes", "fe_banner__icon_size", "b_action", "fe_banner__extra_classes", "fe_banner__id", "fe_banner__aria_alert", "fe_banner__btn_include", "fe_banner__title_text", "fe_banner__start_genius_trial", "fe_banner__message_text", "b_secure_hostname", "b_query_params_with_lang", "b_original_url", "fe_ge_trial_desktop_campaign_id", "ge_expand_hp_trial_sidebar_cta", "fe_banner__banners_count" ];
return _r_(function(i) {
_i_("4ab:119");
var n = "", a = this.fn;
function s(n) {
if (_i_("4ab:224"), a.MJ(a.MB(e[1])) || a.MJ(a.MC(e[2])) || a.MJ(a.MC(e[3])) || a.MJ(a.MC(e[4])) || a.MJ(a.MC(e[5])) || a.MJ(a.MC(e[6])) || a.MJ(a.MC(e[7]))) {
n += t[1];
var s = "";
if (s += t[2], a.MJ(a.MB(e[1]) + "" == "missing-checkout") || a.MJ(a.MC(e[2])) ? s += [ t[3], a.ME(t[4], a.MB, a.MN, null), t[2] ].join("") :a.MJ(a.MB(e[1]) + "" == "missing-checkin") || a.MJ(a.MC(e[3])) ? s += [ t[3], a.ME(t[5], a.MB, a.MN, null), t[2] ].join("") :a.MJ(a.MB(e[1]) + "" == "past") || a.MJ(a.MC(e[4])) ? s += [ t[3], a.ME(t[6], a.MB, a.MN, null), t[2] ].join("") :a.MJ(a.MB(e[1]) + "" == "checkin_date_to_far_in_the_future") || a.MJ(a.MC(e[5])) ? s += [ t[3], a.ME(t[7], a.MB, a.MN, null), t[2] ].join("") :a.MJ(a.MB(e[1]) + "" == "negative-period") || a.MJ(a.MC(e[6])) ? s += [ t[3], a.ME(t[8], a.MB, a.MN, null), t[2] ].join("") :a.MJ(a.MB(e[1]) + "" == "exceeds-max-los") || a.MJ(a.MC(e[7])) ? s += [ t[3], a.ME(t[9], a.MB, a.MN, null), t[2] ].join("") :a.MJ(a.MB(e[1])) && (s += [ t[3], a.ME(t[5], a.MB, a.MN, null), t[2] ].join("")), s += t[10], a.MN(e[0], s), n += t[1], a.MJ(a.MB(e[8]) + "" == "flights")) {
n += t[2];
var s = "";
s += t[3], a.MJ(a.MB(e[1]) + "" == "missing-checkout") ? s += [ t[11], a.ME(t[12], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "missing-checkin") ? s += [ t[11], a.ME(t[13], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "past") ? s += [ t[11], a.ME(t[14], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "checkin_date_to_far_in_the_future") ? s += [ t[11], a.ME(t[15], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "negative-period") ? s += [ t[11], a.ME(t[16], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "missing-dates") ? s += [ t[11], a.ME(t[13], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1])) && (s += [ t[11], a.ME(t[13], a.MB, a.MN, null), t[3] ].join("")), s += t[2], a.MN(e[0], s), n += t[10];
}
if (n += t[17], a.MJ(a.MB(e[8]) + "" == "rentalcars")) {
n += t[2];
var s = "";
s += t[3], a.MJ(a.MB(e[1]) + "" == "missing-checkout") ? s += [ t[11], a.ME(t[18], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "missing-checkin") ? s += [ t[11], a.ME(t[19], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "past") ? s += [ t[11], a.ME(t[14], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "checkin_date_to_far_in_the_future") ? s += [ t[11], a.ME(t[20], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "negative-period") ? s += [ t[3], a.ME(t[21], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "missing-dates") ? s += [ t[11], a.ME(t[19], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1]) + "" == "past-time") ? s += [ t[11], a.ME(t[22], a.MB, a.MN, null), t[3] ].join("") :a.MJ(a.MB(e[1])) && (s += [ t[11], a.ME(t[19], a.MB, a.MN, null), t[3] ].join("")), s += t[2], a.MN(e[0], s), n += t[10];
}
n += t[1], i.unshift({
fe_banner__close_button:t[69],
fe_banner__color_scheme:t[70],
fe_banner__message_text:a.MB(e[0])
}), n = o(n), i.shift(), n += t[68];
}
return n += t[66], _r_(n);
}
function o(i) {
if (_i_("4ab:225"), i += t[23], a.MD(e[36])) {
i += t[24], a.MD(e[10]) && (i += t[25], a.MN(e[9], [ t[26], a.MB(e[10]), t[27], a.MB(e[11]), t[28] ].join("")), i += t[29]), i += t[24], a.MD(e[12]) && (i += t[25], a.MN(e[9], [ a.MB(e[9]), t[30], a.MB(e[12]), t[27], a.MB(e[13]), t[28] ].join("")), i += t[29]), i += t[24], a.MD(e[14]) && (i += t[25], a.MN(e[9], [ a.MB(e[9]), t[30], a.MB(e[14]), t[27], a.MB(e[15]), t[28] ].join("")), i += t[29]), i += t[24], a.MD(e[16]) && (i += t[25], a.MN(e[9], [ a.MB(e[9]), t[30], a.MB(e[16]), t[27], a.MB(e[17]), t[28] ].join("")), i += t[29]), i += t[24], a.MD(e[18]) && (i += t[25], a.MN(e[9], [ a.MB(e[9]), t[30], a.MB(e[18]), t[27], a.MB(e[19]), t[28] ].join("")), i += t[29]), i += t[24], a.MD(e[20]) && (i += t[31]), i += t[32];
var n = a.MB(e[21]);
a.MJ(n + "" == "small") && (i += t[33]), (a.MJ(a.MB(e[22])) || a.MJ(a.MB(e[23])) || a.MJ(a.MB(e[24]))) && (i += t[34]), a.MD(e[25]) && (i += t[35]), a.MJ(a.MB(e[26])) && (i += [ t[36], a.MC(e[26]), a.MC(e[27]), t[37] ].join("")), a.MJ(a.MB(e[22])) && a.MJ(a.MB(e[28])) && (i += [ t[38], a.MC(e[28]), t[37] ].join("")), a.MJ(a.MC(e[29]) + "" == "book") && (i += t[39]), i += [ a.MC(e[30]), t[40] ].join(""), a.MD(e[31]) && (i += [ t[41], a.MC(e[31]), t[42] ].join("")), a.MD(e[9]) && (i += [ a.MC(e[9]), t[37] ].join("")), a.MD(e[32]) && (i += t[43]), i += t[44], a.MD(e[22]) ? i += [ t[45], a.MC(e[22]), t[46] ].join("") :a.MD(e[23]) ? i += [ t[47], a.MC(e[23]), t[48] ].join("") :a.MD(e[24]) && (i += [ t[49], a.MC(e[24]), t[50] ].join("")), a.MD(e[33]) && (i += t[51]), a.MD(e[34]) && (i += [ t[52], a.MC(e[34]), t[53] ].join("")), a.MD(e[36]) && (i += t[54], a.MD(e[35]) && (i += t[55]), i += [ t[48], a.MC(e[36]), t[56] ].join("")), a.MD(e[33]) && (i += [ t[57], a.MC(e[33]), t[56] ].join("")), a.MD(e[33]) && (i += t[58]), a.MD(e[25]) && (i += t[59]), a.MD(e[35]) && (i += [ t[60], a.MC(e[37]), t[61], a.MC(e[38]), t[62], a.MC(e[39]), t[63], a.MB(e[40]), t[64], a.MB(e[41]), t[65] ].join("")), i += t[58], a.MD(e[20]) && (i += t[58]), i += t[66];
}
return i += t[67], a.MN(e[26], void 0), i += t[66], a.MN(e[22], void 0), i += t[66], a.MN(e[23], void 0), i += t[66], a.MN(e[24], void 0), i += t[66], a.MN(e[28], void 0), i += t[66], a.MN(e[34], void 0), i += t[66], a.MN(e[36], void 0), i += t[66], a.MN(e[33], void 0), i += t[66], a.MN(e[25], void 0), i += t[66], a.MN(e[31], void 0), i += t[66], a.MN(e[30], void 0), i += t[66], a.MN(e[21], void 0), i += t[68], a.MN(e[10], void 0), i += t[66], a.MN(e[11], void 0), i += t[66], a.MN(e[12], void 0), i += t[66], a.MN(e[13], void 0), i += t[66], a.MN(e[14], void 0), i += t[66], a.MN(e[15], void 0), i += t[66], a.MN(e[16], void 0), i += t[66], a.MN(e[17], void 0), i += t[66], a.MN(e[18], void 0), i += t[66], a.MN(e[19], void 0), i += t[68], a.MN(e[27], void 0), i += t[68], a.MN(e[9], void 0), i += t[66], a.MN("fe_banner__banners_count", a.MI(a.MB(e[42])) + a.MI(1)), i += t[68], a.MJ(a.MC(e[29]) + "" == "book") && a.MJ(a.track_experiment_stage("bp_banner_module_normalize_banners", 2)) ? i += t[66] :a.MJ(a.track_experiment_stage("bp_banner_module_normalize_banners", 1)) && (i += t[66]), i += t[66], _r_(i);
}
return n += t[0], n = s(n), n += t[66], _r_(n);
});
}()), B.define("component/search/destination/country-only", function(t, e, i) {
"use strict";
_i_("4ab:29");
var n = t("component"), a = t("search/searchbox/model"), s = t("read-data-options");
i.exports = n.extend({
init:function() {
_i_("4ab:417"), this.options = s(this.$el, {
modelId:{
name:"sb-id",
type:String,
required:!0
}
}), this.model = a.getInstance(this.options.modelId), this.model.use("destination"), this.model.on("change", this.modelChange.bind(this)), this.$onlyCurrentCountry = this.$el.find("[data-input]"), this.$onlyCurrentCountry.bind("change", this.onlyCurrentCountryChange.bind(this)), this.modelInit(), _r_();
},
modelInit:function() {
_i_("4ab:418");
var t = this.$onlyCurrentCountry.is(":checked");
this.model.destination.initOnlyCurrentCountry(t), _r_();
},
modelChange:function(t) {
if (_i_("4ab:419"), !t || !t.onlyCurrentCountry) return _r_();
var e = this.$onlyCurrentCountry.is(":checked"), i = this.model.destination.getOnlyCurrentCountry();
e != i && this.$onlyCurrentCountry.prop("checked", i), _r_();
},
onlyCurrentCountryChange:function() {
_i_("4ab:420"), this.model.destination.setOnlyCurrentCountry(this.$onlyCurrentCountry.is(":checked")), _r_();
}
}), _r_();
}), B.define("component/search/group/group", function(t, e, i) {
_i_("4ab:30"), booking.jstmpl("search_group_group_html", function() {
_i_("4ab:139");
var t, e = [ "\n		", "\n\n\n\n\n", "\n", " \n\n\n\n", "\n    ", '\n        <div class="sb-searchbox-children-tooltip">\n            <span class="fly-dropdown-close fly-dropdown-close-icon"></span>\n            <h4 class="sb-searchbox-children-tooltip__title">', "/private/gs_index_model_header_family/name", '</h4>\n            <p class="sb-searchbox-children-tooltip__text">', "/private/gs_index_model_desc_family/name", "</p>\n        </div>\n    ", "\n\n\n", "\n\n", '\n\n\n\n<div class="u-clearfix" data-render>\n  ', '<div class="sb-custom-wrapper">', "\n\n  ", "\n  ", '\n    <div class="sb-group__field sb-group__field-rooms">\n      ', '\n          <label class="sb-searchbox__label sb-group__field__label ', "-inline", " -small ", "no_rooms", '"\n             ', '\n                for="no_rooms_', '"\n              ', '\n               for="no_rooms"\n              ', "\n          >\n              ", "/private/sbox_rooms/name", "\n          </label>\n      ", "\n      ", '<div class="sb-custom-select">', '\n    <select name="no_rooms"\n        ', '\n            id="no_rooms_', '"\n            class="no_rooms"\n        ', '\n            id="no_rooms"\n        ', '\n        data-group-rooms-count\n        aria-label="', "/private/index_sbox_rooms_aria/name", '"\n    >\n        ', '\n            <option value="', '" ', 'selected="selected"', ">\n                ", "/private/search_box_room_filter/name", "\n            </option>\n        ", "\n    </select>\n    ", "</div>", "\n    </div>\n  ", '\n    <input type="hidden" name="no_rooms" value="', '">\n  ', "\n\n\n  ", '\n    <div class="sb-group__field">\n      ', "\n        ", "/private/sbox_adults/name", "/private/pex_flights_search_traveller_adult_age/name", '\n  <div class="bui-stepper">\n    <div class="bui-stepper__title-wrapper">\n      <label class="bui-stepper__title" for="', '">', "</label>\n      ", '\n        <span class="bui-stepper__subtitle">', "</span>\n      ", '\n    </div>\n    <div class="bui-stepper__wrapper">\n      <input type="range" class="bui-stepper__input" id="', '" name="', '" min="', '" max="', '" value="', ' />\n      <button class="bui-button bui-button--secondary bui-stepper__subtract-button" type="button" aria-hidden="true" ', "disabled", '>\n        <span class="bui-button__text">-</span>\n      </button>\n      <span class="bui-stepper__display" aria-hidden="true">', '</span>\n      <button class="bui-button bui-button--secondary bui-stepper__add-button" type="button" aria-hidden="true" ', '>\n        <span class="bui-button__text">+</span>\n      </button>\n    </div>\n  </div>\n', "data-group-adults-count", "group_adults", "1", '\n        <label class="sb-searchbox__label sb-group__field__label ', "group_children", '"\n           ', '\n              for="group_adults_', '"\n            ', '\n             for="group_adults"\n            ', "\n         >\n          ", "/private/bbt_searchbox_travellers/name", "\n        </label>\n        ", '\n  <select\n    name="group_adults"\n    aria-label="', "/private/index_sbox_adults_aria/name", '"\n    ', '\n       id="group_adults_', '"\n       class="group_adults"\n    ', '\n       id="group_adults"\n    ', "\n    data-group-adults-count\n   >\n    ", '\n      <option value="', ">\n        ", "/private/search_box_adults_filter/name", "\n      </option>\n    ", "\n  </select>\n", '\n    <input type="hidden" name="group_adults" value="', '\n      <div class="sb-group__field sb-group-children ', "sb-group-children-universal", '">\n      ', "/private/sbox_children/name", "/private/pex_flights_search_traveller_children_age/name", "data-group-children-count", "0", '\n              for="group_children_', '\n             for="group_children"\n            ', "\n            >\n          ", '\n  <select\n    name="group_children"\n    aria-label="', "/private/index_sbox_children_aria/name", '\n        id="group_children_', '"\n        class="group_children"\n    ', '\n       id="group_children"\n    ', "\n    data-group-children-count ", 'data-component="search/group/children-ages-tooltip search/group/add-children-tooltip"\n    data-add-children-tooltip="', '"', "\n  >\n    ", "\n          ", "/private/search_box_no_children_filter_default/name", "/private/search_box_children_filter/name", "\n      \n      ", '\n      <div class="sb-group__children__field clearfix">\n        ', '\n        <label class="sb-searchbox__label -small sb-group__children__label">\n          ', "/private/sxp_index_sbox_horizontal_age_of_children_q/name", "/private/bh_gsb_search_box_checkout_age/name", "/private/bh_gsb_search_box_checkout_age_plural/name", "/private/loc_sbox_children_age_singular/name", "/private/loc_sbox_children_age_plural/name", "\n\n        ", '<div class="sb-group-children-age"><div class="sb-custom-select">', '\n    <select\n      name="age"\n      data-group-child-age="', '"\n      aria-label="', "/private/acc_index_child_age_screenread/name", '"\n    >\n      <option class="sb_child_ages_empty_zero" value="12 ">\n          ', "\n            ", "/private/sxp_index_sbox_horizontal_age_at_checkout/name", "/private/sxp_index_sbox_age_at_checkout/name", "\n      </option>\n      ", '\n        <option value="', ">\n            ", "\n                ", "/private/sxp_index_sbox_num_years_old/name", "/private/loc_counter_word_child_age_cjk/name", "\n        </option>\n      ", "</div></div>", "\n      </div>\n    ", " \n    ", "/private/pex_flights_search_traveller_infants/name", "data-group-infants-count", "group_infants", '\n      <div class="sb-group__field">\n        ', '\n                for="group_infants_', '\n                for="group_infants"\n              ', "\n           >\n            ", "\n          </label>\n        ", " \n  ", '\n    <select\n      name="group_infants"\n      ', '\n         id="group_infants_', '"\n         class="group_infants"\n      ', '\n         id="group_infants"\n      ', "\n      data-group-infants-count\n     >\n      ", ">\n          ", "\n    </select>\n  ", "\n\n</div>\n", "\n	" ], i = [ "fe_add_children_tooltip", "b_action", "b_search_config", "b_predicted_traveller_type", "fe_sb_universal_design", "fe_sb_group_block_labels", "fe_remove_duplicate_ids", "fe_sb_unique_id", "fe_sb_group_max_rooms", "fe_sb_state_number_of_rooms", "fe_sb_group_descriptive_dropdowns", "fe_sb_group_rooms_hide", "fe_sb_width", "fe_group_adults_title", "fe_group_adults_subtitle", "fe_bui_stepper_id", "fe_bui_stepper_title", "fe_bui_stepper_subtitle", "fe_bui_stepper_min", "fe_bui_stepper_max", "fe_bui_stepper_value", "fe_bui_stepper_additional_attrs", "fe_sb_group_max_adults", "fe_sb_state_number_of_adults", "fe_sb_group_use_bui_stepper", "fe_sb_group_use_adults_label", "fe_sb_group_adults_hide", "fe_sb_state_number_of_children", "fe_sb_state_rooms", "fe_sb_state_children_ages", "fe_sb_group_has_children", "fe_group_children_title", "fe_group_children_subtitle", "fe_sb_group_max_children", "fe_sb_xpi", "fe_sb_group_localized_short_date", "fe_sb_state_checkout", "fe_children_ages", "fe_child_i", "fe_sb_group_max_children_age", "b_lang_is_cjk", "fe_sb_group_children_hide", "fe_sb_group_children_ages_hide", "fe_group_infants_title", "fe_sb_group_max_infants", "fe_sb_state_number_of_infants", "fe_sb_group_infants_hide" ];
return _r_(function(n) {
_i_("4ab:505");
var a = "", s = this.fn;
function o(t) {
_i_("4ab:521"), t += e[150], s.MD(i[4]) && (t += e[29]), t += e[151], t += s.MD(i[6]) ? [ e[152], s.MC(i[7]), e[153] ].join("") :e[154], t += e[155];
var a = s.seq(0, s.MB(i[44])) || [];
n.unshift({
i:null
});
for (var o, r = 1, _ = a.length; _ >= r; r++) n[0].i = o = a[r - 1], t += [ e[133], s.F.entities(o.value), e[38] ].join(""), s.MJ(s.MB(i[45]) == o.value) && (t += e[39]), t += [ e[156], o.value, e[138] ].join("");
return n.shift(), t += e[157], s.MD(i[4]) && (t += e[44]), t += e[2], _r_(t);
}
function r(a) {
_i_("4ab:522"), a += e[15];
var o = u, r = h, _ = c, l = d, h = s.MC(i[37]) || [];
n.unshift({
fe_child_age:null
});
for (var d, u = 1, c = h.length; c >= u; u++) {
n[0].fe_child_age = d = h[u - 1], a += e[15], s.MD(i[4]) && (a += e[124]), a += [ e[125], s.F.entities(s.MC(i[38])), e[126], (n.unshift({
child_number:s.MI(s.MB(i[38])) + s.MI(1)
}), t = s.ME(e[127], s.MB, s.MN, null), n.shift(), t), e[128] ].join(""), s.MD(i[34]) ? a += [ e[129], s.ME(e[130], s.MB, s.MN, null), e[112] ].join("") :s.MD(i[4]) && (a += [ e[129], s.ME(e[131], s.MB, s.MN, null), e[112] ].join("")), a += e[132];
var p = u, f = h, b = c, g = m, h = s.seq(0, s.MB(i[39])) || [];
n.unshift({
i:null
});
for (var m, u = 1, c = h.length; c >= u; u++) n[0].i = m = h[u - 1], a += [ e[133], s.F.entities(m.value), e[38] ].join(""), s.MJ(d + "" != "") && s.MJ(d + "" == "" + m.value) && (a += e[39]), a += e[134], s.MJ(s.MB(i[4])) || s.MJ(s.MB(i[34])) ? a += [ e[135], (n.unshift({
num_years:m.value
}), t = s.ME(e[136], s.MB, s.MN, s.MO(m.value, null, e[136])), n.shift(), t), e[129] ].join("") :(a += [ e[135], m.value ].join(""), s.MD(i[40]) && (a += s.ME(e[137], s.MB, s.MN, null)), a += e[129]), a += e[138];
n.shift(), u = p, h = f, c = b, m = g, a += e[43], s.MD(i[4]) && (a += e[139]), a += e[4], s.MN("fe_child_i", s.MI(s.MB(i[38])) + s.MI(1)), a += e[15];
}
return n.shift(), u = o, h = r, c = _, d = l, a += e[2], _r_(a);
}
function _(a) {
_i_("4ab:523"), a += e[15];
var o = u, r = h, _ = c, l = d, h = s.MC(i[37]) || [];
n.unshift({
fe_child_age:null
});
for (var d, u = 1, c = h.length; c >= u; u++) {
n[0].fe_child_age = d = h[u - 1], a += e[15], s.MD(i[4]) && (a += e[124]), a += [ e[125], s.F.entities(s.MC(i[38])), e[126], (n.unshift({
child_number:s.MI(s.MB(i[38])) + s.MI(1)
}), t = s.ME(e[127], s.MB, s.MN, null), n.shift(), t), e[128] ].join(""), s.MD(i[34]) ? a += [ e[129], s.ME(e[130], s.MB, s.MN, null), e[112] ].join("") :s.MD(i[4]) && (a += [ e[129], s.ME(e[131], s.MB, s.MN, null), e[112] ].join("")), a += e[132];
var p = u, f = h, b = c, g = m, h = s.seq(0, s.MB(i[39])) || [];
n.unshift({
i:null
});
for (var m, u = 1, c = h.length; c >= u; u++) n[0].i = m = h[u - 1], a += [ e[133], s.F.entities(m.value), e[38] ].join(""), s.MJ(d + "" != "") && s.MJ(d + "" == "" + m.value) && (a += e[39]), a += e[134], s.MJ(s.MB(i[4])) || s.MJ(s.MB(i[34])) ? a += [ e[135], (n.unshift({
num_years:m.value
}), t = s.ME(e[136], s.MB, s.MN, s.MO(m.value, null, e[136])), n.shift(), t), e[129] ].join("") :(a += [ e[135], m.value ].join(""), s.MD(i[40]) && (a += s.ME(e[137], s.MB, s.MN, null)), a += e[129]), a += e[138];
n.shift(), u = p, h = f, c = b, m = g, a += e[43], s.MD(i[4]) && (a += e[139]), a += e[4], s.MN("fe_child_i", s.MI(s.MB(i[38])) + s.MI(1)), a += e[15];
}
return n.shift(), u = o, h = r, c = _, d = l, a += e[2], _r_(a);
}
function l(a) {
_i_("4ab:524"), a += e[15];
var o = s.MC(i[37]) || [];
n.unshift({
fe_child_age:null
});
for (var r, _ = 1, l = o.length; l >= _; _++) {
n[0].fe_child_age = r = o[_ - 1], a += e[15], s.MD(i[4]) && (a += e[124]), a += [ e[125], s.F.entities(s.MC(i[38])), e[126], (n.unshift({
child_number:s.MI(s.MB(i[38])) + s.MI(1)
}), t = s.ME(e[127], s.MB, s.MN, null), n.shift(), t), e[128] ].join(""), s.MD(i[34]) ? a += [ e[129], s.ME(e[130], s.MB, s.MN, null), e[112] ].join("") :s.MD(i[4]) && (a += [ e[129], s.ME(e[131], s.MB, s.MN, null), e[112] ].join("")), a += e[132];
var h = _, d = o, u = l, c = p, o = s.seq(0, s.MB(i[39])) || [];
n.unshift({
i:null
});
for (var p, _ = 1, l = o.length; l >= _; _++) n[0].i = p = o[_ - 1], a += [ e[133], s.F.entities(p.value), e[38] ].join(""), s.MJ(r + "" != "") && s.MJ(r + "" == "" + p.value) && (a += e[39]), a += e[134], s.MJ(s.MB(i[4])) || s.MJ(s.MB(i[34])) ? a += [ e[135], (n.unshift({
num_years:p.value
}), t = s.ME(e[136], s.MB, s.MN, s.MO(p.value, null, e[136])), n.shift(), t), e[129] ].join("") :(a += [ e[135], p.value ].join(""), s.MD(i[40]) && (a += s.ME(e[137], s.MB, s.MN, null)), a += e[129]), a += e[138];
n.shift(), _ = h, o = d, l = u, p = c, a += e[43], s.MD(i[4]) && (a += e[139]), a += e[4], s.MN("fe_child_i", s.MI(s.MB(i[38])) + s.MI(1)), a += e[15];
}
return n.shift(), a += e[2], _r_(a);
}
function h(a) {
_i_("4ab:525"), a += e[15];
var o = s.MC(i[37]) || [];
n.unshift({
fe_child_age:null
});
for (var r, _ = 1, l = o.length; l >= _; _++) {
n[0].fe_child_age = r = o[_ - 1], a += e[15], s.MD(i[4]) && (a += e[124]), a += [ e[125], s.F.entities(s.MC(i[38])), e[126], (n.unshift({
child_number:s.MI(s.MB(i[38])) + s.MI(1)
}), t = s.ME(e[127], s.MB, s.MN, null), n.shift(), t), e[128] ].join(""), s.MD(i[34]) ? a += [ e[129], s.ME(e[130], s.MB, s.MN, null), e[112] ].join("") :s.MD(i[4]) && (a += [ e[129], s.ME(e[131], s.MB, s.MN, null), e[112] ].join("")), a += e[132];
var h = _, d = o, u = l, c = p, o = s.seq(0, s.MB(i[39])) || [];
n.unshift({
i:null
});
for (var p, _ = 1, l = o.length; l >= _; _++) n[0].i = p = o[_ - 1], a += [ e[133], s.F.entities(p.value), e[38] ].join(""), s.MJ(r + "" != "") && s.MJ(r + "" == "" + p.value) && (a += e[39]), a += e[134], s.MJ(s.MB(i[4])) || s.MJ(s.MB(i[34])) ? a += [ e[135], (n.unshift({
num_years:p.value
}), t = s.ME(e[136], s.MB, s.MN, s.MO(p.value, null, e[136])), n.shift(), t), e[129] ].join("") :(a += [ e[135], p.value ].join(""), s.MD(i[40]) && (a += s.ME(e[137], s.MB, s.MN, null)), a += e[129]), a += e[138];
n.shift(), _ = h, o = d, l = u, p = c, a += e[43], s.MD(i[4]) && (a += e[139]), a += e[4], s.MN("fe_child_i", s.MI(s.MB(i[38])) + s.MI(1)), a += e[15];
}
return n.shift(), a += e[2], _r_(a);
}
function d(t) {
return _i_("4ab:526"), t += e[15], s.MK(s.MB(i[11])) ? (t += e[16], s.MD(i[4]) || (t += e[17], s.MD(i[5]) || (t += e[18]), t += e[19], s.MD(i[6]) && (t += e[20]), t += e[21], t += s.MD(i[6]) ? [ e[22], s.MC(i[7]), e[23] ].join("") :e[24], t += [ e[25], s.ME(e[26], s.MB, s.MN, null), e[27] ].join("")), t += e[28], t = b(t), t += e[45]) :t += [ e[46], s.F.entities(s.MC(i[9])), e[47] ].join(""), t += e[2], _r_(t);
}
function u(t) {
return _i_("4ab:527"), t += e[1], s.MN("fe_sb_group_max_rooms", 30), t += e[2], s.MN("fe_sb_group_max_pets", 10), t += e[2], s.MN("fe_sb_group_max_adults", 30), t += e[2], s.MN("fe_sb_group_max_children", 10), t += e[2], s.MN("fe_sb_group_max_children_age", 17), t += e[2], s.MN("fe_sb_group_max_infants", 10), t += e[3], s.MN("fe_add_children_tooltip", ""), t += e[2], s.MJ(s.MC(i[1]) + "" == "searchresults") && s.MJ(s.MC(i[2])) && s.MK(s.MC(i[2]).b_children_total) && s.MJ(s.MC(i[3]) + "" == "family") && (t += e[4], s.MN(i[0], [ e[5], s.ME(e[6], s.MB, s.MN, null), e[7], s.ME(e[8], s.MB, s.MN, null), e[9] ].join("")), t += e[2]), t += e[10], t += e[11], t += e[11], t += e[11], t += e[11], t += e[11], t += e[11], t += e[11], t += e[12], s.MD(i[4]) && (t += e[13]), t += e[14], s.MJ(s.MB(i[12])) && s.MJ(s.MB(i[4])) || (t += e[4], t = d(t), t += e[15]), t += e[48], s.MK(s.MB(i[26])) ? (t += e[49], s.MD(i[24]) ? (t += e[50], s.MN(i[13], s.ME(e[51], s.MB, s.MN, null)), t += e[50], s.MN(i[14], s.ME(e[52], s.MB, s.MN, null)), t += e[50], n.unshift({
fe_bui_stepper_additional_attrs:e[68],
fe_bui_stepper_id:e[69],
fe_bui_stepper_max:s.MB(i[22]),
fe_bui_stepper_min:e[70],
fe_bui_stepper_subtitle:s.MB(i[14]),
fe_bui_stepper_title:s.MB(i[13]),
fe_bui_stepper_value:s.MB(i[23]) ? s.MB(i[23]) :0
}), t = m(t), n.shift(), t += e[28]) :(t += e[50], s.MD(i[4]) || (t += e[71], s.MD(i[5]) || (t += e[18]), t += e[19], s.MD(i[6]) && (t += e[72]), t += e[73], t += s.MD(i[6]) ? [ e[74], s.MC(i[7]), e[75] ].join("") :e[76], t += e[77], t += s.MD(i[25]) ? s.ME(e[78], s.MB, s.MN, null) :s.ME(e[51], s.MB, s.MN, null), t += e[79]), t += e[50], t = p(t), t += e[28]), t += e[45]) :t += [ e[92], s.F.entities(s.MC(i[23])), e[47] ].join(""), t += e[14], s.MK(s.MB(i[41])) && (t += e[28], s.MN("fe_sb_group_has_children", s.MB(i[27]) && (s.MB(i[28]) || s.MB(i[29]))), t += e[93], s.MJ(s.MB(i[4])) && s.MJ(s.MB(i[30])) && (t += e[94]), t += e[95], s.MD(i[24]) ? (t += e[50], s.MN(i[31], s.ME(e[96], s.MB, s.MN, null)), t += e[50], s.MN(i[32], s.ME(e[97], s.MB, s.MN, null)), t += e[50], n.unshift({
fe_bui_stepper_additional_attrs:e[98],
fe_bui_stepper_id:e[72],
fe_bui_stepper_max:s.MB(i[33]),
fe_bui_stepper_min:e[99],
fe_bui_stepper_subtitle:s.MB(i[32]),
fe_bui_stepper_title:s.MB(i[31]),
fe_bui_stepper_value:s.MB(i[27]) ? s.MB(i[27]) :0
}), t = m(t), n.shift(), t += e[28]) :(t += e[50], s.MD(i[4]) || (t += e[71], s.MD(i[5]) || (t += e[18]), t += e[19], s.MD(i[6]) && (t += e[72]), t += e[73], t += s.MD(i[6]) ? [ e[100], s.MC(i[7]), e[75] ].join("") :e[101], t += [ e[102], s.ME(e[96], s.MB, s.MN, null), e[79] ].join("")), t += e[50], t = c(t), t += e[28]), t += e[115], s.MK(s.MB(i[41]) || s.MB(i[42])) && s.MJ(s.MB(i[4])) && (t += e[112], t = f(t), t += e[28]), t += e[45]), t += e[14], s.MK(s.MB(i[46])) && (t += e[141], s.MD(i[24]) ? (t += e[28], s.MN(i[43], s.ME(e[142], s.MB, s.MN, null)), t += e[28], n.unshift({
fe_bui_stepper_additional_attrs:e[143],
fe_bui_stepper_id:e[144],
fe_bui_stepper_max:s.MB(i[44]),
fe_bui_stepper_min:e[99],
fe_bui_stepper_title:s.MB(i[43]),
fe_bui_stepper_value:s.MB(i[45]) ? s.MB(i[45]) :0
}), t = m(t), n.shift(), t += e[4]) :(t += e[145], s.MD(i[4]) || (t += e[17], s.MD(i[5]) || (t += e[18]), t += e[19], s.MD(i[6]) && (t += e[144]), t += e[21], t += s.MD(i[6]) ? [ e[146], s.MC(i[7]), e[23] ].join("") :e[147], t += [ e[148], s.ME(e[142], s.MB, s.MN, null), e[149] ].join("")), t += e[50], t = o(t), t += e[140]), t += e[15]), t += e[14], s.MJ(s.MB(i[4])) && (t += e[4], t = d(t), t += e[15]), t += e[14], s.MD(i[4]) && (t += e[44]), t += e[14], s.MK(s.MB(i[41]) || s.MB(i[42]) || s.MB(i[4])) && (t += e[28], t = g(t), t += e[15]), t += e[158], _r_(t);
}
function c(a) {
_i_("4ab:528"), a += e[2], s.MD(i[4]) && (a += e[29]), a += [ e[103], s.ME(e[104], s.MB, s.MN, null), e[82] ].join(""), a += s.MD(i[6]) ? [ e[105], s.MC(i[7]), e[106] ].join("") :e[107], a += e[108], s.MD(i[4]) || (a += [ e[109], s.F.html(s.MC(i[0])), e[110] ].join("")), a += e[111];
var o = s.seq(0, s.MB(i[33])) || [];
n.unshift({
i:null
});
for (var r, _ = 1, l = o.length; l >= _; _++) n[0].i = r = o[_ - 1], a += [ e[87], s.F.entities(r.value), e[38] ].join(""), s.MJ(s.MB(i[27]) == r.value) && (a += e[39]), a += e[88], a += s.MJ(s.MB(i[10])) && s.MJ(0 == r.value) ? [ e[112], s.ME(e[113], s.MB, s.MN, null), e[50] ].join("") :s.MJ(s.MB(i[10])) ? [ e[112], (n.unshift({
num_kids:r.value
}), t = s.ME(e[114], s.MB, s.MN, s.MO(r.value, null, e[114])), n.shift(), t), e[50] ].join("") :[ e[112], r.value, e[50] ].join(""), a += e[90];
return n.shift(), a += e[91], s.MD(i[4]) && (a += e[44]), a += e[2], _r_(a);
}
function p(a) {
_i_("4ab:529"), a += e[2], s.MD(i[4]) && (a += e[29]), a += [ e[80], s.ME(e[81], s.MB, s.MN, null), e[82] ].join(""), a += s.MD(i[6]) ? [ e[83], s.MC(i[7]), e[84] ].join("") :e[85], a += e[86];
var o = s.seq(1, s.MB(i[22])) || [];
n.unshift({
i:null
});
for (var r, _ = 1, l = o.length; l >= _; _++) n[0].i = r = o[_ - 1], a += [ e[87], s.F.entities(r.value), e[38] ].join(""), s.MJ(s.MB(i[23]) == r.value) && (a += e[39]), a += e[88], s.MD(i[10]) ? (n.unshift({
num_adults:r.value
}), t = s.ME(e[89], s.MB, s.MN, s.MO(r.value, null, e[89])), n.shift(), a += t) :a += r.value, a += e[90];
return n.shift(), a += e[91], s.MD(i[4]) && (a += e[44]), a += e[2], _r_(a);
}
function f(a) {
if (_i_("4ab:530"), a += e[4], s.MJ(s.MB(i[27])) && (s.MJ(s.MB(i[28])) || s.MJ(s.MB(i[29])))) {
if (a += e[116], s.MD(i[4]) || (a += e[117], s.MD(i[34]) ? a += [ s.ME(e[118], s.MB, s.MN, null), e[2] ].join("") :s.MD(i[36]) ? (s.MN(i[35], s.DATE(s.MB(i[36]), "short_date", "", "", "")), a += s.MJ(1 == s.MB(i[27])) ? [ (n.unshift({
date:s.MB(i[35])
}), t = s.ME(e[119], s.MB, s.MN, null), n.shift(), t), e[2] ].join("") :[ (n.unshift({
date:s.MB(i[35])
}), t = s.ME(e[120], s.MB, s.MN, null), n.shift(), t), e[2] ].join("")) :a += s.MJ(1 == s.MB(i[27])) ? [ s.ME(e[121], s.MB, s.MN, null), e[2] ].join("") :[ s.ME(e[122], s.MB, s.MN, null), e[2] ].join(""), a += e[79]), a += e[123], s.MN("fe_child_i", 0), a += e[123], s.MD(i[29])) a += e[112], n.unshift({
fe_children_ages:s.MB(i[29])
}), a = l(a), n.shift(), a += e[50]; else if (s.MD(i[28])) {
a += e[112];
var o = s.MC(i[28]) || [];
n.unshift({
fe_room:null
});
for (var _, h = 1, d = o.length; d >= h; h++) n[0].fe_room = _ = o[h - 1], a += e[129], n.unshift({
fe_children_ages:s.MG((_ || {}).b_children_ages)
}), a = r(a), n.shift(), a += e[112];
n.shift(), a += e[50];
}
a += e[140];
}
return a += e[2], _r_(a);
}
function b(a) {
_i_("4ab:531"), a += e[4], s.MD(i[4]) && (a += e[29]), a += e[30], a += s.MD(i[6]) ? [ e[31], s.MC(i[7]), e[32] ].join("") :e[33], a += [ e[34], s.ME(e[35], s.MB, s.MN, null), e[36] ].join("");
var o = s.seq(1, s.MB(i[8])) || [];
n.unshift({
i:null
});
for (var r, _ = 1, l = o.length; l >= _; _++) n[0].i = r = o[_ - 1], a += [ e[37], s.F.entities(r.value), e[38] ].join(""), s.MJ(s.MB(i[9]) == r.value) && (a += e[39]), a += e[40], s.MD(i[10]) ? (n.unshift({
num_rooms:r.value
}), t = s.ME(e[41], s.MB, s.MN, s.MO(r.value, null, e[41])), n.shift(), a += t) :a += r.value, a += e[42];
return n.shift(), a += e[43], s.MD(i[4]) && (a += e[44]), a += e[2], _r_(a);
}
function g(a) {
if (_i_("4ab:532"), a += e[4], s.MJ(s.MB(i[27])) && (s.MJ(s.MB(i[28])) || s.MJ(s.MB(i[29])))) {
if (a += e[116], s.MD(i[4]) || (a += e[117], s.MD(i[34]) ? a += [ s.ME(e[118], s.MB, s.MN, null), e[2] ].join("") :s.MD(i[36]) ? (s.MN(i[35], s.DATE(s.MB(i[36]), "short_date", "", "", "")), a += s.MJ(1 == s.MB(i[27])) ? [ (n.unshift({
date:s.MB(i[35])
}), t = s.ME(e[119], s.MB, s.MN, null), n.shift(), t), e[2] ].join("") :[ (n.unshift({
date:s.MB(i[35])
}), t = s.ME(e[120], s.MB, s.MN, null), n.shift(), t), e[2] ].join("")) :a += s.MJ(1 == s.MB(i[27])) ? [ s.ME(e[121], s.MB, s.MN, null), e[2] ].join("") :[ s.ME(e[122], s.MB, s.MN, null), e[2] ].join(""), a += e[79]), a += e[123], s.MN("fe_child_i", 0), a += e[123], s.MD(i[29])) a += e[112], n.unshift({
fe_children_ages:s.MB(i[29])
}), a = h(a), n.shift(), a += e[50]; else if (s.MD(i[28])) {
a += e[112];
var o = s.MC(i[28]) || [];
n.unshift({
fe_room:null
});
for (var r, l = 1, d = o.length; d >= l; l++) n[0].fe_room = r = o[l - 1], a += e[129], n.unshift({
fe_children_ages:s.MG((r || {}).b_children_ages)
}), a = _(a), n.shift(), a += e[112];
n.shift(), a += e[50];
}
a += e[140];
}
return a += e[2], _r_(a);
}
function m(t) {
return _i_("4ab:533"), t += [ e[53], s.MC(i[15]), e[54], s.MC(i[16]), e[55] ].join(""), s.MD(i[17]) && (t += [ e[56], s.MC(i[17]), e[57] ].join("")), t += [ e[58], s.MC(i[15]), e[59], s.MC(i[15]), e[60], s.MC(i[18]), e[61], s.MC(i[19]), e[62], s.MC(i[20]), e[38], s.MC(i[21]), e[63] ].join(""), s.MD(i[20]) || (t += e[64]), t += [ e[65], s.MC(i[20]), e[66] ].join(""), s.MJ(s.MB(i[20]) == s.MB(i[19])) && (t += e[64]), t += e[67], _r_(t);
}
return a += e[0], a = u(a), a += e[159], _r_(a);
});
}());
var n = t("component"), a = t("morphdom"), s = t("read-data-options"), o = t("search-config"), r = t("search/searchbox/model");
i.exports = n.extend({
init:function() {
if (_i_("4ab:421"), this.options = s(this.$el, {
modelId:{
name:"sb-id",
type:String,
required:!0
},
sbWidth:{
name:"sb-width",
type:String
},
sbBBToolSearchbox:{
name:"sb-bbtool-searchbox",
type:Boolean
},
childrenHide:{
name:"sb-group-children-hide",
type:Boolean
},
childrenAgesHide:{
name:"sb-group-children-ages-hide",
type:Boolean
},
infantsHide:{
name:"sb-group-infants-hide",
type:Boolean
},
useBUIStepper:{
name:"sb-group-use-bui-stepper",
type:Boolean
},
petsHide:{
name:"sb-group-pets-hide",
type:Boolean
},
roomsHide:{
name:"sb-group-rooms-hide",
type:Boolean
},
useAdultsLabel:{
name:"sb-group-use_adults_label",
type:Boolean
},
blockLabels:{
name:"sb-group-block-labels",
type:Boolean
},
alwaysExpanded:{
name:"sb-group-always-expanded",
type:Boolean
},
descriptiveDropdowns:{
name:"fe_sb_group_descriptive_dropdowns",
type:Boolean
},
universalDesign:{
name:"fe_sb_universal_design",
type:Boolean
},
removeDuplicateIds:{
name:"fe_remove_duplicate_ids",
type:Boolean
},
searchBoxUniqueId:{
name:"fe_sb_unique_id",
type:String
},
searchboxXPI:{
name:"fe_sb_xpi",
type:Boolean
}
}), this.model = r.getInstance(this.options.modelId), this.model.use("group"), this.model.use("dates"), this.model.on("change", this.modelChange.bind(this)), this.$form = this.$el.parents("form"), o.on("change", this.searchConfigChange.bind(this)), this.$el.on("change", '[data-group-rooms-count=""]', this.groupRoomsChange.bind(this)), this.$el.on("change", '[data-group-adults-count=""]', this.groupAdultsChange.bind(this)), this.$el.on("change", '[data-group-children-count=""]', this.groupChildrenChange.bind(this)), this.$el.on("change", "[data-group-child-age]", this.groupChildAgeChange.bind(this)), this.$el.on("change", '[data-group-infants-count=""]', this.groupInfantsChange.bind(this)), this.renderEl = this.$el.find('[data-render=""]')[0], this.template = B.jstmpl("search_group_group_html"), this.$form.on("change", ".b-booker-type__input_business-booker", this.businessBookerSelected.bind(this)), this.modelInit(), "index" === B.env.b_action && "sessionStorage" in window && !o.childrenAges.length) {
var t = JSON.parse(window.sessionStorage.getItem("search_group_children_ages"));
if (t) {
this.model.group.set({
key:"children_count",
value:t.length
});
for (var e = 0; e < t.length; e++) this.model.group.set({
i:e,
key:"children_ages",
value:t[e]
});
}
}
_r_();
},
modelInit:function() {
_i_("4ab:422");
var t = {
rooms_count:o.rooms ? o.rooms.length :1,
adults_count:o.adults || 2,
children_ages:o.childrenAges || [],
default_empty_age_to:"12 "
};
this.options.infantsHide || (t.infants_count = o.infants), this.model.group.init(t), _r_();
},
modelChange:function(t) {
if (_i_("4ab:423"), !t || "group" != t.group && "dates" != t.group) return _r_();
this.render(), _r_();
},
searchConfigChange:function() {
_i_("4ab:424"), this.model.group.set({
key:"rooms_count",
value:Array.isArray(o.rooms) ? o.rooms.length :1
}), this.model.group.set({
key:"adults_count",
value:o.adults
}), this.model.group.set({
key:"children_count",
value:Array.isArray(o.childrenAges) ? o.childrenAges.length :1
}), this.options.infantsHide || this.model.group.set({
key:"infants_count",
value:o.infants
}), Array.isArray(o.childrenAges) && o.childrenAges.forEach(function(t, e) {
_i_("4ab:601"), this.model.group.set({
key:"children_ages",
i:e,
value:t
}), _r_();
}.bind(this)), _r_();
},
groupRoomsChange:function(t) {
_i_("4ab:425");
var e = $(t.currentTarget);
this.model.group.set({
key:"rooms_count",
value:e.val()
}), _r_();
},
groupAdultsChange:function(t) {
_i_("4ab:426");
var e = $(t.currentTarget);
this.model.group.set({
key:"adults_count",
value:e.val()
}), this.groupAdultsChanged = !0, _r_();
},
groupChildrenChange:function(t) {
_i_("4ab:427");
var e = $(t.currentTarget);
this.model.group.set({
key:"children_count",
value:e.val()
}), _r_();
},
groupInfantsChange:function(t) {
_i_("4ab:428");
var e = $(t.currentTarget);
this.model.group.set({
key:"infants_count",
value:e.val()
}), _r_();
},
groupChildAgeChange:function(t) {
_i_("4ab:429");
var e = $(t.currentTarget), i = e.attr("data-group-child-age");
this.model.group.set({
key:"children_ages",
i:+i,
value:e.val()
}), _r_();
},
render:function() {
_i_("4ab:430");
var t = {}, e = this.model.group.get(), i = this.model.dates.get();
e = {
fe_sb_state_number_of_rooms:e.rooms_count,
fe_sb_state_number_of_adults:e.adults_count,
fe_sb_state_number_of_children:e.children_ages.length,
fe_sb_state_children_ages:e.children_ages,
fe_sb_state_number_of_infants:e.infants_count,
fe_sb_state_traveller:e.fe_sb_state_traveller,
fe_sb_state_rooms:[ {
b_adults:e.adults_count,
b_children:e.children_ages.length,
b_children_ages:e.children_ages,
b_room_order:1
} ]
}, B.env.b_lang_is_cjk && (e.b_lang_is_cjk = B.env.b_lang_is_cjk), i.checkout && (e.fe_sb_state_checkout = i.checkout.toString()), this.options.sbWidth && (e.fe_sb_width = this.options.sbWidth), this.options.childrenHide && (e.fe_sb_group_children_hide = 1), this.options.childrenAgesHide && (e.fe_sb_group_children_ages_hide = 1), this.options.infantsHide && (e.fe_sb_group_infants_hide = 1), this.options.useBUIStepper && (e.fe_sb_group_use_bui_stepper = 1), this.options.petsHide && (e.fe_sb_group_pets_hide = 1), this.options.roomsHide && (e.fe_sb_group_rooms_hide = 1), this.options.blockLabels && (e.fe_sb_group_block_labels = 1), this.options.alwaysExpanded && (e.fe_sb_group_always_expanded = 1), this.options.useAdultsLabel && (e.fe_sb_group_use_adults_label = 1), this.options.sbBBToolSearchbox && (e.fe_sb_bbtool_searchbox = 1), this.options.descriptiveDropdowns && (e.fe_sb_group_descriptive_dropdowns = 1), this.options.universalDesign && (e.fe_sb_universal_design = 1), this.options.removeDuplicateIds && (e.fe_remove_duplicate_ids = 1), this.options.searchBoxUniqueId && (e.fe_sb_unique_id = this.options.searchBoxUniqueId), this.options.searchboxXPI && (e.fe_sb_xpi = 1);
var n = this.template.render(e).trim();
"msie" === B.env.b_browser && B.env.b_browser_version <= 8 && (t.onBeforeElUpdated = function(t, e) {
_i_("4ab:578");
var i = t.getAttribute(jQuery.expando);
return i && e.setAttribute(jQuery.expando, i), _r_(!0);
}), a(this.renderEl, n, t), _r_();
},
businessBookerSelected:function() {
_i_("4ab:431"), this.groupAdultsChanged || this.model.group.set({
key:"adults_count",
value:1
}), _r_();
},
groupChildrenAgeSave:function(e) {
_i_("4ab:432"), e.preventDefault();
var i = t("events");
i.trigger("SearchBox::SaveTravelGroupsClicked", e), _r_();
}
}), _r_();
}), B.define("search/group/model", function(t, e, i) {
"use strict";
_i_("4ab:31");
function n(t) {
_i_("4ab:89"), this.model = t, this.data = {
preset:-1
}, this.valid = !0, this.validationError = "", this.options = {}, _r_();
}
$.extend(n.prototype, {
init:function(t) {
_i_("4ab:226"), this.data = t, this.emit("init"), _r_();
},
configure:function(t, e) {
_i_("4ab:227"), void 0 !== e ? this.options[t] = e :"object" == typeof t && $.extend(this.options, t), _r_();
},
get:function() {
return _i_("4ab:228"), _r_(this.data);
},
setAll:function(t) {
if (_i_("4ab:229"), !t) return _r_(!1);
var e = this;
return Object.keys(t).forEach(function(i) {
_i_("4ab:534"), e.set({
key:i,
value:t[i]
}, !0), _r_();
}), this.emit("change"), _r_(!0);
},
set:function(t, e) {
if (_i_("4ab:230"), !t || !t.key) return _r_(!1);
if ("children_count" == t.key) if (this.data.children_ages || (this.data.children_ages = []), 0 == t.value) this.data.children_ages = []; else if (this.data.children_ages.length < t.value) for (var i = this.data.children_ages.length; i < t.value; i++) this.data.default_empty_age_to ? this.data.children_ages.push(this.data.default_empty_age_to) :this.data.children_ages.push(""); else this.data.children_ages.length > t.value && this.data.children_ages.splice(t.value, this.data.children_ages.length - t.value); else t.hasOwnProperty("i") ? this.data[t.key] ? this.data[t.key][t.i] = t.value :(this.data[t.key] = [], this.data[t.key][t.i] = t.value) :this.data[t.key] = t.value;
if ("index" === B.env.b_action && "sessionStorage" in window) {
var n = JSON.stringify(this.data.children_ages);
window.sessionStorage.setItem("search_group_children_ages", n);
}
return e || this.emit("change"), _r_(!0);
},
validate:function(t) {
_i_("4ab:231"), t = t || {};
var e = !0, i = "";
if (t.groupLimit) {
var n = 0;
this.data && this.data.adults_count && (n += parseInt(this.data.adults_count)), this.data && this.data.children_ages && (n += this.data.children_ages.length), n > t.groupLimit && (e = !1, i = "over-limit");
}
return this.valid != e && (this.valid = e, this.validationError = i, this.emit("validation", {
valid:e,
validationError:i
})), _r_(e);
},
modelChange:function(t) {
if (_i_("4ab:232"), !t || "traveller" !== t.group) return _r_();
var e = this.model.traveller.get().travellerType;
switch (e) {
case null:
case "":
case "couple":
this.data.rooms_count = 1, this.data.adults_count = 2, this.data.children_ages = [];
break;

case "solo":
case "business":
this.data.rooms_count = 1, this.data.adults_count = 1, this.data.children_ages = [];
break;

case "family":
this.data.adults_count = 1 == this.data.adults_count ? 2 :this.data.adults_count, this.data.children_ages && 0 != this.data.children_ages.length || (this.data.children_ages = [ this.data.default_empty_age_to ]);
break;

case "group":
this.data.adults_count = 1 == this.data.adults_count ? 2 :this.data.adults_count, this.data.children_ages = [];
}
this.data.fe_sb_state_traveller = e, this.emit("change"), _r_();
},
emit:function(t, e) {
_i_("4ab:233"), e = e || {}, this.model.emit(t, $.extend(e, {
group:"group"
})), _r_();
}
}), i.exports = n, _r_();
}), B.define("search/searchbox/analytics", function(t, e, i) {
_i_("4ab:32");
var n = {};
e.send = function(t, e, i) {
if (_i_("4ab:120"), !window.ga) return _r_();
window.ga("send", "event", "Searchbox", B.env.b_action, t, e, i), _r_();
}, e.sendNonInteractive = function(t, i) {
_i_("4ab:121"), e.send(t, i, {
nonInteraction:!0
}), _r_();
}, e.sendOnce = function(t, i) {
_i_("4ab:122");
var a = t + ":" + i;
n[a] || (e.send(t, i), n[a] = !0), _r_();
}, _r_();
}), B.define("search/searchbox/model", function(t, e, i) {
"use strict";
_i_("4ab:33");
var n = t("event-emitter"), a = t("search/modules/flags"), s = {};
function o(t) {
_i_("4ab:90"), n.extend(this), this.id = t, this.formAction, this.fieldGroups = {
track:[]
}, this.flags = {}, this.validators = [], _r_();
}
$.extend(o.prototype, {
use:function(e) {
if (_i_("4ab:234"), this[e]) return _r_();
switch (e) {
case "destination":
var i = t("search/destination/model");
this[e] = new i(this);
break;

case "origin":
var n = t("search/destination/model");
this[e] = new n(this);
break;

case "dates":
var a = t("search/dates/model");
this[e] = new a(this);
break;

case "group":
var s = t("search/group/model");
this[e] = new s(this);
break;

case "flights":
var o = t("search/flights/model");
this[e] = new o(this);
break;

case "traveller":
var r = t("search/traveller/model");
this[e] = new r(this);
break;

default:
return _r_();
}
if ("function" == typeof this[e].validate) {
var _ = this[e]._options ? this[e]._options :this[e].options;
_ || (_ = {}), this.validators.push(this[e].validate.bind(this[e], _));
}
_r_();
},
submit:function() {
_i_("4ab:235"), this.emit("submit"), _r_();
},
getFormAction:function() {
return _i_("4ab:236"), _r_(this.formAction);
},
setFormAction:function(t) {
_i_("4ab:237"), this.formAction = t, _r_();
},
getFields:function() {
_i_("4ab:238");
var t = [];
return Object.keys(this.fieldGroups).forEach(function(e) {
_i_("4ab:562"), Array.isArray(this.fieldGroups[e]) && (t = t.concat(this.fieldGroups[e])), _r_();
}.bind(this)), _r_(t);
},
setFields:function(t, e) {
_i_("4ab:239"), this.fieldGroups[t] = e, _r_();
},
hasFlag:function(t) {
return _i_("4ab:240"), _r_(t in this.flags);
},
getFlag:function(t) {
return _i_("4ab:241"), _r_(this.flags[t]);
},
updateFlags:function(t) {
_i_("4ab:242");
var e = a.parse(t);
Object.assign(this.flags, e), _r_();
},
validate:function() {
_i_("4ab:243");
var t = this.validators.filter(function(t) {
return _i_("4ab:553"), _r_(t.call());
});
return _r_(t.length == this.validators.length);
}
}), i.exports = {
getInstance:function(t) {
return _i_("4ab:244"), s[t] || (s[t] = new o(t)), _r_(s[t]);
}
}, _r_();
}), B.define("component/search/searchbox/searchbox", function(t, e, i) {
"use strict";
_i_("4ab:34");
var n = t("env"), a = t("component"), s = t("search/searchbox/model"), o = t("read-data-options"), r = t("search/dates/date-public-holidays"), _ = t("events"), l = !1, h = [ "country", "dest_id", "dest_type", "district", "iata", "landmark", "latitude", "longitude", "place_id", "place_id_lat", "place_id_lon", "region", "prefill_submitted" ];
i.exports = a.extend({
init:function() {
if (_i_("4ab:433"), this.hiddenFields = [], this.options = o(this.$el, {
modelId:{
name:"sb-id",
type:String,
required:!0
},
flags:{
name:"sb-flags",
type:String,
defaultValue:""
},
isFirstVisible:{
name:"is-first-visible",
type:Boolean
}
}), this.model = s.getInstance(this.options.modelId), this.model.on("init", this.modelChange.bind(this)), this.model.on("change", this.modelChange.bind(this)), this.model.on("submit", this.modelSubmit.bind(this)), this.model.updateFlags(this.options.flags), this.$form = this.$el.is("form") ? this.$el :this.$el.find("form:eq(0)"), this.$form.submit(this.formSubmit.bind(this)), this.originalAction = this.$form.attr("action"), this.options.isFirstVisible && this.model.hasFlag("sticky")) {
var e = t("search/searchbox/searchbox-sticky-controller").getController();
e.setElement(this.$form);
}
if (this.model.hasFlag("sticky") && this.model.hasFlag("deny_focus") && this.$el.get(0) && B.et.stage("OTfdASFUaXNNFfHBdJUKeYEGPKVFDZQdASALQZRO", 2) && this.model.getFlag("deny_focus")) {
var i = t("search/searchbox/searchbox-deny-focus-controller");
new i(this.$el.get(0));
}
this.$searchOverlay = this.$el.find("[data-searching-overlay]"), this.shouldShowSearchOverlay = this.model.getFlag("AEJPAcBacPONDcFGHT") && this.$searchOverlay.length, this.shouldShowSearchOverlay && (this.$searchOverlay.on("click", this.searchOverlayClick.bind(this)), $(document).on("keydown", this.hideSearchOverlay.bind(this))), this.initCurrentCountryField();
var a = $(".sb-searchbox-horizontal__dismissible-btn");
if (a.length && !l) {
var _ = a.parents(".sb-searchbox-horizontal");
l = !0, a.click(function() {
_i_("4ab:579"), _.hasClass("hidden") ? _.removeClass("hidden") :_.addClass("hidden"), _r_();
});
}
this.model.getFlag("highlight_public_holidays") && (this.datePublicHolidays = r.getInstance(), this.datePublicHolidays.init({
model:this.model
})), "www" == n.b_site_type && this.model.setFields("sr_traffic", [ {
name:"from_sf",
value:1
} ]), B.et.track("BdTeLGZefBJVSHT") && (this.model.setFields("sr_user_modifications", [ {
name:"user_changed_date",
value:0
} ]), B.eventEmitter.on("FORM:user-changes", function(t, e) {
_i_("4ab:614"), this.model.setFields("sr_user_modifications", [ {
name:"user_changed_" + e.type,
value:1
} ]), this.updateHiddenFields(), _r_();
}.bind(this))), _r_();
},
modelChange:function(t) {
_i_("4ab:434"), this.updateHiddenFields(), _r_();
},
modelSubmit:function() {
_i_("4ab:435"), this.$form.submit(), _r_();
},
initCurrentCountryField:function() {
_i_("4ab:436");
var t = !1;
this.$onlyCurrentCountry = this.$form.find("#limit-search-area"), this.$onlyCurrentCountry.length && (t = this.$onlyCurrentCountry.is(":checked"), this.$onlyCurrentCountry.bind("change", this.onlyCurrentCountryChange.bind(this)), this.model.use("destination"), this.model.destination.initOnlyCurrentCountry(t)), _r_();
},
onlyCurrentCountryChange:function() {
_i_("4ab:437"), this.model.use("destination"), this.model.destination.setOnlyCurrentCountry(this.$onlyCurrentCountry.is(":checked")), _r_();
},
updateHiddenFields:function() {
_i_("4ab:438");
var t = this.model.getFormAction(), e = this.$form.attr("action");
t || (t = this.originalAction), e != t && this.$form.attr("action", t), this.hiddenFields && this.hiddenFields.forEach(function(t) {
_i_("4ab:580"), t.$node.remove(), t.$node = null, _r_();
});
var i = this.model.getFields();
this.hiddenFields = [];
var a = [], s = !1;
if (i.forEach(function(t) {
_i_("4ab:581"), this.hiddenFields.push({
name:t.name,
value:t.value
}), a.push(t.name), -1 != h.indexOf(t.name) && (s = !0), _r_();
}.bind(this)), this.$form.find("input").filter(function() {
return _i_("4ab:582"), _r_(s && -1 != h.indexOf(this.name) || -1 != a.indexOf(this.name));
}).remove(), n.b_reg_user_is_genius && B.et.track("bHALOLOLOBINScINRSaQEPLfVWeLT")) {
var o = this.$form.find("#ge_genius_rate");
o.length && this.controlGroupDefaultSorting(o);
}
this.hiddenFields.forEach(function(t) {
_i_("4ab:583");
var e = $("<input>");
e.attr("type", "hidden"), e.attr("name", t.name), e.attr("value", t.value), t.$node = e, this.$form.append(e), _r_();
}.bind(this)), _r_();
},
controlGroupDefaultSorting:function(t) {
_i_("4ab:439");
var e = !0, i = this.$form.find("#group_adults"), n = this.$form.find("#group_children");
if (!i.length || !n.length) return _r_();
var a = i.val(), s = n.val();
(a > 2 || a >= 2 && s >= 1) && (e = !1), t.val(Number(e)), _r_();
},
selectFirstFromAutocomplete:function() {
_i_("4ab:440");
var t = this.model.destination && this.model.destination.ac;
"index" !== n.b_action && t && !t.selected && t.dataset && t.dataset.length && this.model.getFlag("bLYGbAHYeTCaC") && this.model.destination.set(t.dataset[0]), _r_();
},
formSubmit:function(t) {
_i_("4ab:441");
var e = this.model.validate();
if (this.model.getFlag("TAeKPWbOTAcBNZXQeJaeC") && B.et.customGoal("TAeKPWbOTAcBNZXQeJaeC", 1), this.model.getFlag("TAeKPWbOTAcBNZXQeJfOC") && B.et.customGoal("TAeKPWbOTAcBNZXQeJfOC", 1), !e) return t.preventDefault(), _r_();
_.trigger("SearchBox::Submit__Success", this), this.shouldShowSearchOverlay ? this.showSearchOverlay() :this.shouldShowSearchPageOverlay ? this.pageOverlay.show(this.model.destination.data.ss_raw) :this.shouldShowSRPP && this.SRPPOverlay.show(this.model.destination.data.ss_raw), this.selectFirstFromAutocomplete(), _r_();
},
searchOverlayClick:function() {
_i_("4ab:442"), this.abortSubmit(), this.hideSearchOverlay(), B.et.customGoal("AEJPAcBacPONDcFGHT", 1), _r_();
},
abortSubmit:function() {
_i_("4ab:443"), window.stop ? window.stop() :document.execCommand && document.execCommand("Stop"), _r_();
},
showSearchOverlay:function() {
_i_("4ab:444"), this.$searchOverlay.addClass("-visible"), _r_();
},
hideSearchOverlay:function() {
_i_("4ab:445"), this.$searchOverlay.removeClass("-visible"), _r_();
}
}), _r_();
}), B.define("search/searchbox/searchbox-sticky-controller", function(t, e, i) {
"use strict";
_i_("4ab:35");
var n = t("jquery"), a = t("event-emitter"), s = null;
function o() {
_i_("4ab:91"), a.extend(this), this.visible = !1, this.bottomPosition = null, this.$el = null, this.$sticky = null, this.$window = n(window), this.$window.on("scroll", this.windowScroll.bind(this)), this.$window.on("keydown", this.onKeyDown.bind(this)), this.$window.on("click", this.clickOnWindow.bind(this)), _r_();
}
Object.assign(o.prototype, {
setElement:function(t) {
if (_i_("4ab:245"), this.bottomPosition) {
var e = t.offset(), i = t.outerHeight();
if (e && e.top + i > this.bottomPosition) return _r_();
}
this.$el = t, this.recalculate(), _r_();
},
setStickyElement:function(t) {
_i_("4ab:246"), this.$sticky = t, _r_();
},
isVisible:function() {
return _i_("4ab:247"), _r_(this.visible);
},
recalculate:function() {
if (_i_("4ab:248"), null === this.$el) return _r_();
var t = this.$el.offset(), e = this.$el.outerHeight();
if (!t) return _r_();
this.bottomPosition = t.top + e, this.updateStatus(), _r_();
},
show:function() {
_i_("4ab:249"), this.visible = !0, this.emit("show"), _r_();
},
onKeyDown:function(t) {
_i_("4ab:250");
var e = 27 === t.keyCode;
e && this.visible && this.updateStatus(), _r_();
},
clickOnWindow:function(t) {
if (_i_("4ab:251"), this.$sticky && this.$sticky.length) {
var e = t.target, i = this.$sticky.get(0), a = n.contains(i, e) || i === e;
!a && this.visible && this.updateStatus();
}
_r_();
},
updateStatus:function() {
_i_("4ab:252"), !this.visible && this.$window.scrollTop() >= this.bottomPosition ? (this.visible = !0, this.emit("show")) :this.visible && this.$window.scrollTop() < this.bottomPosition && (this.visible = !1, this.emit("hide")), _r_();
},
windowScroll:function(t) {
if (_i_("4ab:253"), null === this.bottomPosition) return _r_();
this.updateStatus(), _r_();
}
}), i.exports = {
getController:function() {
return _i_("4ab:254"), s || (s = new o()), _r_(s);
}
}, _r_();
}), B.define("component/search/searchbox/searchbox-sticky", function(t, e, i) {
"use strict";
_i_("4ab:36");
var n = t("component"), a = t("events"), s = t("search/searchbox/searchbox-sticky-controller").getController();
i.exports = n.extend({
init:function() {
_i_("4ab:446"), s.on("show", this.show.bind(this)), s.on("hide", this.hide.bind(this)), s.setStickyElement(this.$el), s.isVisible() && this.hardShow(), _r_();
},
show:function(t) {
_i_("4ab:447"), this.$el.addClass("-visible-1"), a.trigger("searchbox-sticky:show"), setTimeout(function() {
_i_("4ab:584"), this.$el.addClass("-visible-2"), _r_();
}.bind(this), 0), _r_();
},
hardShow:function() {
_i_("4ab:448"), this.$el.addClass("-visible-1 -visible-2"), _r_();
},
hide:function(t) {
_i_("4ab:449"), this.$el.removeClass("-visible-2"), setTimeout(function() {
_i_("4ab:585"), this.$el.removeClass("-visible-1"), _r_();
}.bind(this), 1e3), _r_();
}
}), _r_();
}), B.define("search/searchbox/searchbox-deny-focus-controller", function(t, e, i) {
"use strict";
_i_("4ab:37");
var n = t("jquery"), a = t("deny-focus"), s = "a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), *[tabindex], *[contenteditable]";
function o(t) {
_i_("4ab:92"), this.el = t, this.state = null, this._timeoutId = null, this.deny();
var e = this.eventHandler.bind(this);
n(this.el).on("focus change blur", s, e), B.eventEmitter.bind("CALENDAR:dates_changed CALENDAR:dayclick", e), _r_();
}
o.prototype = o.prototype || {}, o.prototype.eventHandler = function(t) {
_i_("4ab:123"), this._timeoutId && clearTimeout(this._timeoutId), this._timeoutId = null, "focusout" === t.type || "blur" === t.type ? this._timeoutId = setTimeout(this.deny.bind(this), 100) :this.allow(), _r_();
}, o.prototype.deny = function() {
if (_i_("4ab:124"), "deny" === this.state) return _r_();
this.state = "deny", a.deny(this.el), _r_();
}, o.prototype.allow = function() {
if (_i_("4ab:125"), "allow" === this.state) return _r_();
this.state = "allow", a.allow(this.el), _r_();
}, i.exports = o, _r_();
}), B.define("component/search/group/children-ages-tooltip", function(t, e, i) {
"use strict";
_i_("4ab:38");
var n = t("jquery"), a = t("jstmpl"), s = t("component"), o = t("events");
i.exports = s.extend({
init:function() {
_i_("4ab:450"), this.dropdown = !1, this.$form = this.$el.closest("form"), this.isPopupAlreadyShown = !1, this.agesSelector = '[name="age"]', this.addEventListeners(), _r_();
},
addEventListeners:function() {
_i_("4ab:451"), this.$el.change(this.showTooltip.bind(this)), this.$form.delegate(this.agesSelector, "click", this.hideTooltip.bind(this)), B.eventEmitter.bind("CALENDAR:opened", this.hideTooltip.bind(this)), "undefined" != typeof B.hotel.Events && (o.on(B.hotel.Events.RT.LIGHTBOX_CLOSE, this.hideTooltip.bind(this)), o.on(B.hotel.Events.RT.LIGHTBOX_OPEN, this.hideTooltip.bind(this))), _r_();
},
showTooltip:function() {
_i_("4ab:452");
var t = parseInt(this.$el.val()) > 0;
if (t && !this.isPopupAlreadyShown) var e = setTimeout(function() {
_i_("4ab:621");
var t = this.$form.find(this.agesSelector).eq(0);
if (0 === t.length) return _r_();
this.dropdown = n.fly.dropdown.extend({
defaults:{
position:"bottom left",
content:function() {
return _i_("4ab:634"), _r_(a("searchbox_children_ages_tooltip").render({}));
},
extraClass:"searchbox_children_ages_tooltip"
}
}).create(t[0]), this.dropdown.show(), this.isPopupAlreadyShown = !0, clearTimeout(e), _r_();
}.bind(this), 0);
_r_();
},
hideTooltip:function() {
_i_("4ab:453"), this.dropdown && (this.dropdown.hide(), this.dropdown.destroy()), _r_();
}
}), _r_();
}), B.define("component/search/group/add-children-tooltip", function(t, e, i) {
"use strict";
_i_("4ab:39");
var n = t("jquery"), a = B.env.rtl ? "left" :"right", s = "searchbox_children_tooltip", o = null, r = null === B.browserStorageHandler.getSessionValue("gs_sb_add_children_tooltip"), _ = t("component");
i.exports = _.extend({
init:function() {
_i_("4ab:454"), r && this.$el.data("add-children-tooltip") && (this.showTooltip(), B.browserStorageHandler.addSessionValue("gs_sb_add_children_tooltip", 1), r = !1, B.eventEmitter.bind("CALENDAR:opened", this.hideTooltip), n(".sb-destination__input").on("focus", this.hideTooltip)), _r_();
},
showTooltip:function() {
_i_("4ab:455");
var t = this.$el;
o && o.hide(), o = n.fly.dropdown.extend({
defaults:{
position:a,
content:function() {
return _i_("4ab:628"), _r_(t.data("add-children-tooltip"));
},
extraClass:s
},
actions:{
click:function(t) {
_i_("4ab:629"), n(t.target).is("select") && this.hide(), _r_();
}
},
_autohide:function() {},
init:function() {
_i_("4ab:623"), this.bind(this.events.show, function() {
_i_("4ab:630"), n("." + s).delegate(".fly-dropdown-close", "click", function(t) {
_i_("4ab:632"), o.hide(), _r_();
}), _r_();
}), _r_();
}
}).create(t), o.show(), _r_();
},
hideTooltip:function() {
_i_("4ab:456"), o && o.hide(), _r_();
}
}), _r_();
}), booking.jstmpl("guest_errors", function() {
_i_("4ab:48");
var t = [ "\n	", "\n		", "/private/iq_sbox_error_flights_group_size/name", "\n\n	", "\n\n\n\n\n\n", "\n\n    ", "\n        ", "data-", '="', '"', "\n    ", " data-", '<div data-component="onview-animate" data-anim-type="fadeInBottom"> ', '<div class="fe_banner ', "fe_banner__scale_small ", "fe_banner__w-icon ", "fe_banner__w-dismiss ", "fe_banner__", " ", "fe_banner__w-icon-", "fe_banner__bp fe_banner__inherit_font_size ", ' " ', 'id="', '" ', 'role="alert"', "> ", '<i class="fe_banner__icon ', '" aria-hidden="true"></i> ', '<img class="fe_banner__icon" src="', '"> ', '<span class="fe_banner__icon"> ', " </span> ", '<div class="fe_banner__btn_container"> <div class="fe_banner__btn_container_content"> ', '<h3 class="fe_banner__title"> ', " </h3> ", '<div class="fe_banner__message ', "fe_banner__genius-trial", " </div> ", '</div> <div class="fe_banner__button"> ', "</div> ", '<span class="fe_banner__dismiss js-close"><i class="bicon-btnclose" aria-label="close"></i></span> ', '<form action="', "/genius_activate_trial", '" class="fe_banner__genius-banner-form" method="post"> <input type="hidden" name="return_url" value="', '"> <input type="hidden" name="src" value="hp_banner"> <input type="hidden" name="campaign_id" value="', '"> <input type="submit" class="button fe_banner__genius-banner-button" value="', '"> </form> ', "\n", "\n\n\n\n", "\n\n", "0", "red" ], e = [ "fe_error_message", "fe_banner__data", "fe_banner__data_id", "fe_banner__data_value", "fe_banner__data_id_2", "fe_banner__data_value_2", "fe_banner__data_id_3", "fe_banner__data_value_3", "fe_banner__data_id_4", "fe_banner__data_value_4", "fe_banner__data_id_5", "fe_banner__data_value_5", "fe_banner__animate", "fe_banner__scale", "fe_banner__icon_class", "fe_banner__icon_img_url", "fe_banner__icon_svg", "fe_banner__close_button", "fe_banner__color_scheme", "fe_banner__color_scheme_classes", "fe_banner__icon_size", "b_action", "fe_banner__extra_classes", "fe_banner__id", "fe_banner__aria_alert", "fe_banner__btn_include", "fe_banner__title_text", "fe_banner__start_genius_trial", "fe_banner__message_text", "b_secure_hostname", "b_query_params_with_lang", "b_original_url", "fe_ge_trial_desktop_campaign_id", "ge_expand_hp_trial_sidebar_cta", "fe_banner__banners_count", "fe_error" ];
return _r_(function(i) {
_i_("4ab:126");
var n = "", a = this.fn;
function s(n) {
return _i_("4ab:255"), a.MJ(a.MB(e[35])) && (n += t[0], a.MN(e[0], [ t[1], a.ME(t[2], a.MB, a.MN, null), t[0] ].join("")), n += t[3], i.unshift({
fe_banner__close_button:t[50],
fe_banner__color_scheme:t[51],
fe_banner__message_text:a.MB(e[0])
}), n = o(n), i.shift(), n += t[47]), n += t[47], _r_(n);
}
function o(i) {
if (_i_("4ab:256"), i += t[4], a.MD(e[28])) {
i += t[5], a.MD(e[2]) && (i += t[6], a.MN(e[1], [ t[7], a.MB(e[2]), t[8], a.MB(e[3]), t[9] ].join("")), i += t[10]), i += t[5], a.MD(e[4]) && (i += t[6], a.MN(e[1], [ a.MB(e[1]), t[11], a.MB(e[4]), t[8], a.MB(e[5]), t[9] ].join("")), i += t[10]), i += t[5], a.MD(e[6]) && (i += t[6], a.MN(e[1], [ a.MB(e[1]), t[11], a.MB(e[6]), t[8], a.MB(e[7]), t[9] ].join("")), i += t[10]), i += t[5], a.MD(e[8]) && (i += t[6], a.MN(e[1], [ a.MB(e[1]), t[11], a.MB(e[8]), t[8], a.MB(e[9]), t[9] ].join("")), i += t[10]), i += t[5], a.MD(e[10]) && (i += t[6], a.MN(e[1], [ a.MB(e[1]), t[11], a.MB(e[10]), t[8], a.MB(e[11]), t[9] ].join("")), i += t[10]), i += t[5], a.MD(e[12]) && (i += t[12]), i += t[13];
var n = a.MB(e[13]);
a.MJ(n + "" == "small") && (i += t[14]), (a.MJ(a.MB(e[14])) || a.MJ(a.MB(e[15])) || a.MJ(a.MB(e[16]))) && (i += t[15]), a.MD(e[17]) && (i += t[16]), a.MJ(a.MB(e[18])) && (i += [ t[17], a.MC(e[18]), a.MC(e[19]), t[18] ].join("")), a.MJ(a.MB(e[14])) && a.MJ(a.MB(e[20])) && (i += [ t[19], a.MC(e[20]), t[18] ].join("")), a.MJ(a.MC(e[21]) + "" == "book") && (i += t[20]), i += [ a.MC(e[22]), t[21] ].join(""), a.MD(e[23]) && (i += [ t[22], a.MC(e[23]), t[23] ].join("")), a.MD(e[1]) && (i += [ a.MC(e[1]), t[18] ].join("")), a.MD(e[24]) && (i += t[24]), i += t[25], a.MD(e[14]) ? i += [ t[26], a.MC(e[14]), t[27] ].join("") :a.MD(e[15]) ? i += [ t[28], a.MC(e[15]), t[29] ].join("") :a.MD(e[16]) && (i += [ t[30], a.MC(e[16]), t[31] ].join("")), a.MD(e[25]) && (i += t[32]), a.MD(e[26]) && (i += [ t[33], a.MC(e[26]), t[34] ].join("")), a.MD(e[28]) && (i += t[35], a.MD(e[27]) && (i += t[36]), i += [ t[29], a.MC(e[28]), t[37] ].join("")), a.MD(e[25]) && (i += [ t[38], a.MC(e[25]), t[37] ].join("")), a.MD(e[25]) && (i += t[39]), a.MD(e[17]) && (i += t[40]), a.MD(e[27]) && (i += [ t[41], a.MC(e[29]), t[42], a.MC(e[30]), t[43], a.MC(e[31]), t[44], a.MB(e[32]), t[45], a.MB(e[33]), t[46] ].join("")), i += t[39], a.MD(e[12]) && (i += t[39]), i += t[47];
}
return i += t[48], a.MN(e[18], void 0), i += t[47], a.MN(e[14], void 0), i += t[47], a.MN(e[15], void 0), i += t[47], a.MN(e[16], void 0), i += t[47], a.MN(e[20], void 0), i += t[47], a.MN(e[26], void 0), i += t[47], a.MN(e[28], void 0), i += t[47], a.MN(e[25], void 0), i += t[47], a.MN(e[17], void 0), i += t[47], a.MN(e[23], void 0), i += t[47], a.MN(e[22], void 0), i += t[47], a.MN(e[13], void 0), i += t[49], a.MN(e[2], void 0), i += t[47], a.MN(e[3], void 0), i += t[47], a.MN(e[4], void 0), i += t[47], a.MN(e[5], void 0), i += t[47], a.MN(e[6], void 0), i += t[47], a.MN(e[7], void 0), i += t[47], a.MN(e[8], void 0), i += t[47], a.MN(e[9], void 0), i += t[47], a.MN(e[10], void 0), i += t[47], a.MN(e[11], void 0), i += t[49], a.MN(e[19], void 0), i += t[49], a.MN(e[1], void 0), i += t[47], a.MN("fe_banner__banners_count", a.MI(a.MB(e[34])) + a.MI(1)), i += t[49], a.MJ(a.MC(e[21]) + "" == "book") && a.MJ(a.track_experiment_stage("bp_banner_module_normalize_banners", 2)) ? i += t[47] :a.MJ(a.track_experiment_stage("bp_banner_module_normalize_banners", 1)) && (i += t[47]), i += t[47], _r_(i);
}
return n += t[0], n = s(n), n += t[47], _r_(n);
});
}()), B.define("component/xp-index/guest-errors", function(t, e, i) {
"use strict";
_i_("4ab:40");
var n = t("component"), a = t("jstmpl"), s = t("read-data-options"), o = t("search/searchbox/model");
i.exports = n.extend({
init:function() {
_i_("4ab:457"), this.options = s(this.el, {
modelId:{
name:"sb-id",
type:String,
required:!0
}
}), this.model = o.getInstance(this.options.modelId), this.model.use("group"), this.model.on("validation", this.modelValidation.bind(this)), this.template = a("guest_errors"), _r_();
},
modelValidation:function(t) {
if (_i_("4ab:458"), "group" !== t.group) return _r_();
var e = s(this.el, {
viewId:{
name:"view-id",
type:String,
required:!0
}
});
t.valid ? this.$el.html("") :this.$el.html(this.template.render({
fe_error:t.validationError,
fe_new:!0,
fe_view:e.viewId
})), _r_();
}
}), _r_();
}), B.define("component/search/group/group-with-modal", function(t, e, i) {
_i_("4ab:41");
var n = t("component"), a = t("search/searchbox/model"), s = t("read-data-options"), o = t("jquery");
i.exports = n.extend({
init:function() {
_i_("4ab:459"), this.options = s(this.$el, {
modelId:{
name:"sb-id",
type:String,
required:!0
}
}), this.$modal = this.$el.find("[data-group-modal]"), this.$toggle = this.$el.find("[data-group-toggle]"), this.model = a.getInstance(this.options.modelId), this.model.use("group"), this.$roomCount = this.$el.find("[data-room-count]"), this.$guestCount = this.$el.find("[data-guest-count]"), this.$childrenCount = this.$el.find("[data-children-count]"), this.addModelListeners(), this.addEventListeners(), _r_();
},
addModelListeners:function() {
_i_("4ab:460"), this.model.on("change", this.modelChange.bind(this)), this.model.on("init", this.modelChange.bind(this)), _r_();
},
addEventListeners:function() {
_i_("4ab:461"), this.$toggle.on("click", function(t) {
_i_("4ab:586"), this.$modal.toggleClass("hidden"), _r_();
}.bind(this)), o(document).on("mouseup", function(t) {
_i_("4ab:587"), o(t.target).closest(this.$el).length || this.$modal.addClass("hidden"), _r_();
}.bind(this)), _r_();
},
modelChange:function(t) {
_i_("4ab:462"), "group" == t.group && this.render(), _r_();
},
render:function(t) {
_i_("4ab:463");
var t = this.model.group.get(), e = t.adults_count, i = t.children_ages.length;
this.$roomCount.html(B.jstmpl.translations("iq_sbox_accommodation_num_rooms", t.rooms_count, {
num_rooms:t.rooms_count
})), this.$guestCount.html(B.jstmpl.translations("sxp_index_sbox_horizontal_adults", e, {
num_adults:e
})), this.$childrenCount.html(B.jstmpl.translations("sxp_lp_sbox_num_children", i, {
num_children:i
})), _r_();
}
}), _r_();
}), B.define("component/search/searchbox/searchbox-xp", function(t, e, i) {
"use strict";
_i_("4ab:42");
var n = t("component/search/searchbox/searchbox"), a = t("jquery");
i.exports = n.extend({
init:function() {
_i_("4ab:464"), n.prototype.init.apply(this, arguments), this.model.use("dates"), this.addDestinationLogic(), this.addCalendarsLogic(), _r_();
},
addDestinationLogic:function() {
_i_("4ab:465");
var t = this.$el.find("[data-destination-input]");
t.find("#ss").on("focus", function() {
_i_("4ab:588"), t.find("#destination__error").removeClass("-visible"), t.find(".sb-searchbox__error").hide(), _r_();
}.bind(this)), _r_();
},
addCalendarsLogic:function() {
_i_("4ab:466");
var t = a("body"), e = this.$el.find("[data-dates-errors]");
B.env.b_hijri_calendar_available && t.addClass("c2-wrapper-s-has-hijri-calendar"), B.eventEmitter.on("CALENDAR:opened", function(i, n) {
_i_("4ab:554"), e.html(""), t.addClass("calendar-open"), _r_();
}), B.eventEmitter.on("CALENDAR:closed", function(e, i) {
_i_("4ab:555"), t.removeClass("calendar-open"), _r_();
}), _r_();
}
}), _r_();
}), B.define("component/search/dates/prompt", function(t, e, i) {
"use strict";
_i_("4ab:43");
var n = "sb-dates-prompt-dismissed", a = 200, s = "mdot" === B.env.b_site_type, o = t("component"), r = t("click-out"), _ = !s && "searchresults" === B.env.b_action && t("searchresults/events");
i.exports = o.extend({
init:function() {
if (_i_("4ab:467"), this.boundHide = this.hide.bind(this), this.boundCleanUp = this.cleanUp.bind(this), this.$el.find(".sb-dates-prompt__close").on("click", this.dismiss.bind(this)), this.isDismissed()) return _r_();
_ && this.isLandingScrollStarted() ? _.once(_.UI_LANDING_SCROLL_COMPLETED, this.show.bind(this)) :this.show(), _r_();
},
show:function() {
if (_i_("4ab:468"), this.hiding) return _r_();
this.$el.removeClass("g-hidden").addClass("fadein"), this.monitorId = r.addMonitor(this.el, this.boundHide), _r_();
},
hide:function() {
_i_("4ab:469"), this.hiding = !0, this.$el.removeClass("fadein").addClass("fadeout"), window.setTimeout(this.boundCleanUp, a), _r_();
},
dismiss:function() {
_i_("4ab:470"), B.et.customGoal("BbVIDQOJHZWSdKWNIFfEWNVdIbNdRIYdNSXe", 1), s && B.et.customGoal("TZdPKPZFKLCSCDWOOWAUFHKBVT", 1), l(), this.hide(), _r_();
},
cleanUp:function() {
_i_("4ab:471"), this.monitorId && r.removeMonitor(this.monitorId), this.$el.addClass("g-hidden").removeClass("fadeout"), this.hiding = !1, _r_();
},
isDismissed:function() {
_i_("4ab:472");
var t = s ? B.storage({
key:n,
location:"sessionstorage"
}) :"true" === B.browserStorageHandler.getSessionValue(n);
return _r_(t);
},
isLandingScrollStarted:function() {
return _i_("4ab:473"), _r_(B.sr && B.sr.landingScrollStarted || B.env.fe_landing_scroll_started);
}
});
function l() {
_i_("4ab:93"), s ? B.storage({
key:n,
value:!0,
location:"sessionstorage"
}) :B.browserStorageHandler.addSessionValue(n, !0), _r_();
}
_r_();
}), B.define("component/search/dates/date-field-select", function(t, e, i) {
"use strict";
_i_("4ab:44");
var n = "OTfdASFVFYBMFSIJWe", a = t("et"), s = t("component"), o = t("read-data-options"), r = t("search/searchbox/model"), _ = t("formatting/date"), l = t("ga-tracker"), h = "checkin", d = 12, u = "-", c = {
display:"[data-display]",
controls:"[data-controls]",
field:"[data-field]",
iconDay:"[data-icon-day]",
part:".js-date-field__part",
select:".js-date-field__select",
value:".js-date-field__value",
partMonthYear:'.js-date-field__part[data-type="month-year"]',
partDate:'.js-date-field__part[data-type="date"]',
inputYear:".js-date-field__year",
inputMonth:".js-date-field__month"
}, p = {
emptyMode:"-empty",
editMode:"-editing",
editSelectMode:"-editing-select",
selectDisabled:"sb-date-field__select_disabled",
selectFocused:"sb-date-field__select_focused",
valueEmpty:"sb-date-field__value_empty"
};
i.exports = s.extend({
init:function() {
_i_("4ab:474"), this.options = o(this.el, {
forceInitRender:{
name:"force-init-render",
type:Boolean,
defaultValue:!1
},
modelId:{
name:"sb-id",
type:String,
required:!0
},
modelMode:{
name:"mode",
type:String,
defaultValue:"single"
},
validators:{
name:"validators",
type:String,
defaultValue:""
}
});
var t = this.options.validators.split(",");
this.model = r.getInstance(this.options.modelId), this.model.use("dates"), this.model.on("change", this.handleModelChange.bind(this)), this.model.dates.configure({
noValidation:!0,
allowMaxLos:!0,
notEmpty:t.indexOf("not-empty") >= 0
}), this.$display = this.$el.find(c.display), this.$iconDay = this.$el.find(c.iconDay), this.$controls = this.$el.find(c.controls), this.$field = this.$el.find(c.field), this.$part = this.$el.find(c.part), this.$monthYear = this.$el.find(c.partMonthYear), this.$monthYearSelect = this.$monthYear.find(c.select), this.$date = this.$el.find(c.partDate), this.$dateSelect = this.$date.find(c.select), this.$select = this.$el.find(c.select), this.$inputYear = this.$el.find(c.inputYear), this.$inputMonth = this.$el.find(c.inputMonth), this.$part.on("focus", c.select, this.handleSelectFocus.bind(this)), this.$part.on("blur", c.select, this.handleSelectBlur.bind(this)), this.$monthYearSelect.on("change", this.handleMonthYearChange.bind(this)), this.$dateSelect.on("change", this.handleDateChange.bind(this)), this.$select.one("focus", this.trackSelectFocus.bind(this)), this.initModel.call(this), _r_();
},
initModel:function() {
_i_("4ab:475");
var t = this.$inputYear.val(), e = this.$inputMonth.val(), i = this.$dateSelect.attr("data-selected"), n = t && e && i;
this.model.dates.initDate(this.options.modelMode, n && {
year:+t,
month:+e - 1,
day:+i
}), this.renderFields.call(this), _r_();
},
toggleMode:function(t) {
_i_("4ab:476"), this.$field.toggleClass(p.editMode, t), this.$field.toggleClass(p.editSelectMode, t), _r_();
},
trackSelectFocus:function() {
_i_("4ab:477"), a.customGoal(n, 1), l.trackEvent(l.SearchBoxTracker, "Keyboard Focus", this.options.modelMode + " field"), _r_();
},
handleModelChange:function() {
_i_("4ab:478"), this.renderFields.call(this), _r_();
},
handleSelectFocus:function(t) {
_i_("4ab:479"), clearTimeout(this.inputBlurTimer), $(t.delegateTarget).addClass(p.selectFocused), this.toggleMode(!0), setTimeout(function() {
_i_("4ab:589"), this.model.dates.startEditing(), _r_();
}.bind(this)), a.stage(n, 1), _r_();
},
handleSelectBlur:function(t) {
_i_("4ab:480"), $(t.delegateTarget).removeClass(p.selectFocused), this.toggleMode(!1), this.inputBlurTimer = setTimeout(function() {
_i_("4ab:602"), this.applyChange(), _r_();
}.bind(this)), _r_();
},
handleMonthYearChange:function(t) {
_i_("4ab:481");
var e = this.options.modelMode, i = t.target, s = i.value.split(u);
this.model.dates.setEditingFragment(e, "month", +s[0]), this.model.dates.setEditingFragment(e, "year", +s[1]), this.model.dates.setEditingFragment(e, "day", null), a.customGoal(n, 2), _r_();
},
handleDateChange:function(t) {
_i_("4ab:482");
var e = t.target, i = this.options.modelMode;
this.renderDateValue.call(this), this.model.dates.setEditingFragment(i, "day", +e.value), this.applyChange.call(this), a.customGoal(n, 3), _r_();
},
applyChange:function() {
_i_("4ab:483");
var t = this.model.dates.get();
if (!t["editing_" + this.options.modelMode]) return _r_();
this.model.dates.applyEditing(this.options.modelMode), _r_();
},
getOptionHtml:function(t, e, i) {
_i_("4ab:484");
var n, a = [];
if (i) for (var s in i) if (i.hasOwnProperty(s)) {
var o = i[s];
if (!o) break;
n = s, "boolean" != typeof o && (n += "=" + o), a.push(n);
}
return _r_('<option value="' + t + '" ' + a.join(" ") + ">" + e + "</option>");
},
renderMonthYearField:function() {
_i_("4ab:485");
var t = this.options.modelMode, e = this.model.dates.get(), i = e[t], n = e["editing_" + t], a = n || i, s = this.$monthYearSelect, o = t === h ? e.firstValidDay :e.firstValidCheckoutDay, r = e.lastValidDay, l = o.month, c = r.month, p = o.year, f = r.year;
for (s.html(this.getOptionHtml("", "", {
disabled:!0,
selected:!a
})); c >= l || f > p; ) {
var b = l + 1, g = _.format({
year:p,
month:b,
day:0
}, "month_with_year"), m = [ l, p ].join(u);
s.append(this.getOptionHtml(m, g, {
selected:a && l === a.month && p === a.year
})), b === d ? (l = 0, p += 1) :l += 1;
}
this.renderMonthYearValue.call(this), _r_();
},
renderDateField:function() {
_i_("4ab:486");
var t = this.options.modelMode, e = this.model.dates.get(), i = e[t], n = e["editing_" + t], a = n || i, s = a && a.month, o = a && a.year, r = "number" != typeof s, l = !r && new Date(o, s, 1), d = t === h ? e.firstValidDay :e.firstValidCheckoutDay, u = e.lastValidDay, c = t === h ? u.day - 1 :u.day, f = this.$dateSelect;
if (f.html(this.getOptionHtml("", "", {
disabled:!0,
selected:!a || !a.day
})), f.prop("disabled", r), this.$date.toggleClass(p.selectDisabled, r), l) for (;l.getMonth() === s; ) {
var b = l.getDate(), g = s === d.month && o === d.year ? b >= d.day :!0, m = s === u.month && o === u.year ? c >= b :!0;
if (g && m) {
var v = _.format({
year:o,
month:s,
day:b
}, "{day_of_month}, {weekday}");
f.append(this.getOptionHtml(b, v, {
selected:a && a.day === b
}));
}
l.setDate(b + 1);
}
this.renderDateValue.call(this), _r_();
},
renderValue:function(t, e) {
_i_("4ab:487");
var i = e.find(c.value), n = t.options[t.selectedIndex], a = i.data("placeholder") || "", s = n && !n.disabled;
i.text(s ? n.innerHTML :a), i.toggleClass(p.valueEmpty, !s), _r_();
},
renderMonthYearValue:function() {
_i_("4ab:488"), this.renderValue(this.$monthYearSelect[0], this.$monthYear), _r_();
},
renderDateValue:function() {
_i_("4ab:489"), this.renderValue(this.$dateSelect[0], this.$date), _r_();
},
renderFields:function() {
_i_("4ab:490");
var t = this.options.modelMode, e = this.model.dates.get(), i = e[t], n = e["editing_" + t], a = n || i, s = n && !n.complete;
if (this.renderMonthYearField.call(this), this.renderDateField.call(this), a && "number" == typeof a.month && this.$inputMonth.val(a.month + 1), a && "number" == typeof a.year && this.$inputYear.val(a.year), a && "number" == typeof a.day && this.$dateSelect.val(a.day), !s && i) {
var o = this.$display.data("date-format") || "date_with_weekday";
this.$field.removeClass(p.emptyMode), this.$display.html(_.format(i, o)), this.$iconDay.html(_.format(i, "{day_of_month}"));
}
s || i || (this.$field.addClass(p.emptyMode), this.$display.html(this.$display.attr("data-placeholder")), this.$iconDay.html(this.$iconDay.attr("data-placeholder"))), _r_();
}
}), _r_();
});